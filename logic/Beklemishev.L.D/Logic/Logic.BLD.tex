\documentclass[a4paper, dvipsnames]{article}
\usepackage[cp1251]{inputenc}
\usepackage{dmvn}
\usepackage[russian]{babel}
\usepackage[unicode, colorlinks=true,linkcolor = Red,unicode=true,bookmarks=false]{hyperref}
\usepackage{cmll}
\usepackage{epigraph}
\usepackage{bussproofs}

\newcounter{lecture}
\setcounter{lecture}{1}
\newcommand{\firstlectmark}[1]{\par{\scriptsize \itshape \hrule height 0.2pt \smallskip \noindent Начало лекции № \arabic{lecture} от #1} \label{lecture1}}
\newcommand{\lectmark}[2]{\par \smallskip {\scriptsize \itshape \hfill Конец лекции № \arabic{lecture} от #1 (\hyperref[lecture\arabic{lecture}]{к началу})%
\stepcounter{lecture} \smallskip \hrule height 0.2pt \smallskip \noindent Начало лекции № \arabic{lecture} от #2} \smallskip \label{lecture\arabic{lecture}}}
\newcommand{\latestlectmark}[1]{\par \smallskip {\scriptsize \itshape \hfill Конец лекции № \arabic{lecture} от #1 (\hyperref[lecture\arabic{lecture}]{к началу}) \smallskip \hrule height 0.2pt}}

\newcommand{\spn}{\stackrel{\mbox{\tiny\rm п.н.}}{\longrightarrow}}
\newcommand{\rado}[1]{\text{TODO: #1}}
\newcommand{\nez}{}
\newcommand{\Llra}{\Longleftrightarrow}
\newcommand{\ardef}{\stackrel{\text{def}}{\Llra}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\ran}{\mathop{\mathrm{ran}}\nolimits}
\newcommand{\Fm}{\mathop{\mathrm{Fm}}\nolimits}
\newcommand{\eva}[1]{\ev{#1}{6pt}}
\newcommand{\INT}{\mathop{\mathrm{Int}}\nolimits}
\newcommand{\CL}{\mathop{\mathrm{CL}}\nolimits}

\makeatletter

\newcommand*{\xraa}[2]{\mathrel{
 \settowidth{\@tempdima}{$\scriptstyle#1$}
 \settowidth{\@tempdimb}{$\scriptstyle#2$}
 \ifdim\@tempdimb>\@tempdima\@tempdima=\@tempdimb\fi
 \mathop{\vcenter{
   \offinterlineskip\ialign{\hbox to\dimexpr\@tempdima+1em{##}\cr
   \rightarrowfill\cr}}}\limits^{\!#1}_{\!#2}}}

\renewcommand{\phi}{\varphi}
\renewcommand{\epsilon}{\varepsilon}
\newcommand{\sref}[2]{\hyperref[#2]{ #1 \ref*{#2} (\nameref*{#2})}}
\newcommand{\dref}[2]{\hyperref[#2]{ #1 }}
\newcommand{\RC}{\mathbb{R\,(\mathbb{C})}}
\newcommand{\rproof}{\fbox{$\Ra $}\;}
\newcommand{\lproof}{\fbox{$\Lar $}\;}

\newcommand{\Ext}{\mbox{Ext}}
\newcommand{\ext}{\mbox{Ext}}

\newcommand{\cupsq}{\cupsqs{}}
\newcommand{\dbar}{}
\newcommand{\xna}{\xra{\mathrm{на}}}
\newcommand{\ova}[1]{\overrightarrow{#1}}

\newcommand{\efef}{\eqdef}
\newcommand{\mpr}[1]{\fbox{\textbf{#1}}}
\newcommand{\nar}[1]{\evu{#1}{5pt}{6pt}}
\newcommand{\convus}[1]{\xraa{\mathrm{п.н.}}{#1}}
\newcommand{\xraosn}[1]{\stackrel{#1}{\Ra}}
\newcommand{\I}{\mathbb{I}}

%\hfuzz = 500pt
%\hbadness = 10001
\headheight = 10pt
\pagestyle{headings}

\makeatletter
 \renewcommand{\headheight}{11mm}
 \renewcommand{\headsep}{4mm}
 \renewcommand{\sectionmark}[1]{}
 \renewcommand{\subsectionmark}[1]{\markright{\thesubsection. #1}}
 \renewcommand{\subsubsectionmark}[1]{\markright{\thesubsubsection. #1}}
 \renewcommand{\@oddhead}{\vbox{\hbox to\textwidth{\scriptsize\thepage\hfil\rightmark\strut}\hrule}}
 \renewcommand{\@oddfoot}{\hfil\thepage\hfil}
\makeatother

\newtheorem{ax}{Аксиома}[section]
\newtheorem{exer}{Упражнение}[section]
\newcommand{\Ord}{\mathop{\mathrm{Ord}}\nolimits}
\newcommand{\Const}{\mathop{\mathrm{Const}}\nolimits}

\renewcommand{\baselinestretch}{1.25}

\newcommand{\mypage}{\texttt{http:/\kern-.1em/vk.com/id183071829}}
\newcommand{\mymail}{\texttt{rudetection@gmail.com}}

\newcommand{\trail}{%
\par\bigskip{\footnotesize\rightline{Последняя компиляция: \texttt{\сегодня~г}.}%
\rightline{Обновления документа\т на странице \mypage.}%
\rightline{Об опечатках и неточностях пишите на \mymail.}\par}}

\begin{document}
\dmvntitle{Конспект спецкурса}{по математической логике}{Лекторы\т Лев Дмитриевич Беклемишев, Татьяна Леонидовна Яворская}
 {III курс, 5\,--\,6 семестры, поток математиков}{Москва, 2015 г.}
\pagebreak

\tableofcontents

\pagebreak

\section*{Предисловие}

Предлагаемый конспект охватывает материалы курса лекций по математической логике, прочитанного профессором кафедры математической логики и теории алгоритмов Львом Дмитриевичем Беклемишевым и доцентом кафедры Татьяной Леонидовной Яворской на механико-математическом факультете МГУ в 2014-2015 учебном году. Курс охватывает четыре основных раздела логики: теорию множеств, исчисление высказываний, исчисление предикатов (теория моделей и теорема о полноте) и начала теории доказательств (теоремы о неполноте).

Данный текст ни в коем случае не претендует на истину в последней инстанции! Это не курс лекций, а лишь скромный конспект; вина за все опечатки и смысловые ошибки целиком и полностью возлагается на наборщика. Этот конспект не ставит перед собой цели заменить собой полноценный учебник по предмету и не претендует на полноту охвата предмета; для более глубокого знакомства с математической логикой рекомендуется обратиться к приведённому в конце пособия списку литературы.

Эта сборка была скомпилирована \сегодня~г. Актуальная информация о спецкурсе и порядке его сдачи, а также дополнительные материалы для подготовки к экзамену предложены на сайте:
\begin{center}
\texttt{http:/\kern-.1em/www.mi.ras.ru/\textasciitilde bekl/Obyazat-2014-15/obyazat14.html}
\end{center}

Свежие сведения о спецкурсе и улучшениях данных материалов будеут выкладываться на странице ВКонтакте \mypage. Для пожеланий, критических замечаний и сообщений об опечатках можно использовать и электронный адрес:
\begin{gather*}
\mymail
\end{gather*}

Эпиграфы к главам текста целиком и полностью находятся на совести наборщика, помещены без согласия авторов, с грубым нарушением авторских прав и со своеобразной интерпретацией их отношения к основной теме повествования.

Документ подготовлен Александром Запрягаевым, студентом группы 304, в издательской системе \LaTeX. Особая благодарность Анастасии Оноприенко, Арсению Каданеру и Ираклию Глунчадзе за неоценимую помощь, без которой этот конспект не увидел бы свет.

\hfill Версия: \texttt{0.94}

\pagebreak

\section*{Список лекций}

\pt{1} 25 сентября 2014: Введение. Аксиомы ZFC. %Б

\medskip

\pt{2} 2 октября 2014: Порядки. Вполне упорядоченность.

\medskip

\pt{3} 9 октября 2014: Ординалы и их свойства.

\medskip

\pt{4} 16 октября 2014: Трансфинитная рекурсия. Аксиома выбора.

\medskip

\pt{5} 23 октября 2014: Доказательство эквивалентности различных формулировок аксиомы выбора.

\medskip

\pt{6} 30 октября 2014: Мощности и алефы.

\medskip

\pt{7} 6 ноября 2014: Континуум-гипотеза. Гильбертова аксиоматика логики высказываний. Теорема о дедукции.

\medskip

\pt{8} 13 ноября 2014: Примеры выводов. Теорема о корректности и полноте. Семантика Крипке.

\medskip

\pt{9} 20 ноября 2014: Теорема о корректности и полноте в интуиционистской логике. Свойство дизъюнктивности.

\medskip

\pt{10} 27 ноября 2014: Разрешимость $\INT$. Теорема Гливенко, неконечнозначность интуиционистской логики.

\medskip

\pt{11} 4 декабря 2014: Исчисление предикатов. Теорема о корректности.

\medskip

\pt{12} 18 декабря 2014: Теорема о дедукции. Теорема о полноте.

\medskip

\pt{13} 12 февраля 2015: Теорема о полноте (продолжение). Следствия.

\medskip

\pt{14} 19 февраля 2015: Теории с равенством. Теоремы Лёвенгейма-Скулема. %Б

\medskip

\pt{15} 5 марта 2015: Элиминация кванторов. Теорема Тарского-Зайденберга. %Я

\medskip

\pt{16} 12 марта 2015: Упорядоченные поля. %Я

\medskip

\pt{17} 19 марта 2015: Упорядоченные поля (продолжение). Категоричные теории. %Я

\medskip

\pt{18} 9 апреля 2015: Примитивно рекурсивные функции. Примеры. %Б

\medskip

\pt{19} 16 апреля 2015: Свойства примитивной рекурсивности. %Я

\medskip

\pt{20} 23 апреля 2015: Рекурсивные функции (в широком смысле).

\medskip

\pt{21} 30 апреля 2015: Кодирование синтаксиса языка. %Б

\medskip

\pt{22} 14 мая 2015: Бета-функция Гёделя. %Б

\medskip

\pt{23} 21 мая 2015: Теорема Гёделя о неполноте. %Б

\pagebreak

\section*{Программа ВАК 01.01.06: математическая логика}
\begin{enumerate}
\item Понятие алгоритма и его уточнения. Вычислимость по Тьюрингу, частично рекурсивные функции, рекурсивно перечислимые и рекурсивные множества. Тезис Чёрча.
\item Универсальные вычислимые функции. Существование перечислимого неразрешимого множества. Алгоритмические проблемы.
\item Построение полугруппы с неразрешимой проблемой распознавания равенства.
\item Классы P и NP. Полиномиальная сводимость и NP-полные задачи. Теорема об NP-полноте задачи ВЫПОЛНИМОСТЬ.
\item Логика высказываний. Представимость булевых функций формулами логики высказываний. Конъюнктивные и дизъюнктивные нормальные формы.
\item \dref{Исчисление высказываний.}{prop}Полнота и непротиворечивость.
\item Логика предикатов. Приведение формул логики предикатов к предварённой нормальной форме.
\item Исчисление предикатов. Непротиворечивость. Теорема о дедукции. Полнота исчисления предикатов. Теорема Мальцева о компактности.
\item *Элементарные теории классов алгебраических систем. Категоричные в данной мощности теории. Теорема о полноте теории, не имеющей конечных моделей и категоричной в бесконечной мощности.
\item \dref{Разрешимые теории. Теория плотного линейного порядка.}{Elim}
\item Формальная арифметика. Теорема о представимости вычислимых функций в формальной арифметике (без доказательства).
\item *Теорема Гёделя о неполноте формальной арифметики. Теорема Тарского о невыразимости арифметической истинности в арифметике.
\item *Неразрешимость алгоритмической проблемы выводимости для арифметики и логики предикатов.
\item \dref{*Аксиоматическая теория множеств.}{axiother}\dref{Порядковые числа, принцип трансфинитной индукции.}{ordinals}\dref{Аксиома выбора.}{choice}
\end{enumerate}

\newpage
\firstlectmark{25 сентября 2014 г.}
\section{Теория множеств и философия оснований математики}
\epigraph{Я совершил ещё одно преступление, Хедли. Я снова разгадал правду.}{\textit{Три гроба} \\ \textsc{Джон Диксон Карр}}
\label{axiother}
\subsection{История вопроса}
Осознанная история исследования аксиоматизации как отдельной научной проблемы восходит, пожалуй, к~тем временам, когда Евклид в~<<Началах>> изложил основы известной геометрии в~наборе аккуратных аксиом. Сразу же возник вопрос об их избыточности и~возможности вывода одних из них через другие. Под подозрение попал пятый постулат о~параллельных\footnote{<<И~если прямая, падающая на две прямые, образует внутренние и~по одну сторону углы, меньшие двух прямых, то продолженные неограниченно эти прямые встретятся с~той стороны, где углы меньше двух прямых\ldots>>}, который на протяжении тысячелетий казался геометрам теоремой, выводимой из остальных утверждений. Однако многочисленные доказательства, даже если не содержали ошибок, где-нибудь всё равно использовали факт, в~действительности эквивалентный пятому постулату\footnote{<<Через точку, не лежащую на прямой можно провести прямую, параллельную данной, и~притом только одну>>, <<Сумма углов треугольника равна $\pi$>>, <<Существуют подобные, но не равные треугольники>> и т. д.}. Лобачевский произвёл революцию, предложив идею о~возможности существования непротиворечивой геометрии с~отрицанием пятого постулата, что означало бы, что его нельзя доказать или опровергнуть, возможно лишь принять за аксиому. Но что конкретно было доказано? Даже когда Бельтрами предложил псевдосферу, на поверхности которой двумерная плоскость Лобачевского реализуется в~пространстве Евклида, не существовало сколько-нибудь полного осознания границ геометрии, полной аксиоматизации, которую можно было бы предъявить и сказать <<мы работаем в ней>>.

Решающий вклад в проблему внёс Давид Гильберт в своей передовой работе Grundlagen der Geometrie (1899), где была впервые изложена полная система аксиом элементарной геометрии. Аксиоматическая теория Гильберта, вообще говоря, не является теорией первого порядка. В дальнейшем Тарский (1959) предложил упрощённую систему аксиом для геометрии и~доказал полноту и разрешимость построенной им теории.

Гильберт верил в~то, что аналогичная полная аксиоматизация возможна и~для теории чисел и~анализа. После работ Кантора строгое изложение математического анализа базировалось на понятии множества. Но если полную аксиоматизацию элементарной геометрии всё же удалось построить, то с теорией множеств возникли проблемы. В~известном парадоксе Рассела\footnote{Бертран Рассел сообщил его Фреге в ответ на статью последнего, где предлагалось аксиоматическое описание теории чисел на языке предикатов, но его теория оказалась противоречивой.} предлагается рассмотреть множество вида \mbox{$\{\,x\mid x\notin x\,\},$} которое принадлежит самому себе тогда и~только тогда, когда не принадлежит.

Таким образом, программа Гильберта диктовала аксиоматическое изложение уже самих знаний о множествах. Одними из первых были Рассел и Уайтхед с~их <<теорией типов>>, тщательно и~формально собиравшей более сложные объекты из простых <<кирпичиков>>. Но она крайне сложна для понимания и~не обладает интуитивной наглядностью, естественностью изложения. Наиболее рациональную и общепринятую конструкцию предложил Э.~Цермело (Zermelo) из школы Гильберта, к аксиомам которого А.~Френкель (Fraenkel) добавил ещё две (регулярности и~схему подстановки), в результате чего сложилась аксиоматика ZF теории множеств. Именно о ней\footnote{Точнее, о~ZFC, где добавлена аксиома выбора.} и~пойдёт наш разговор. Насколько могут судить современные специалисты, эта система непротиворечива (по крайней мере, пока противоречия не найдено) и~годится в~равной степени для всей математики.

Эта теория страдает очевидным изъяном. Чтобы аксиомы имели смысл, нужно как-то доказать не только их непротиворечивость друг другу, но и~их реализацию в~какой-то модели. А~о~какой модели может идти речь, когда мы сами этими аксиомами и~строим те объекты, с~которыми в~дальнейшем работаем? Остаётся лишь поверить\ldots До теорем Гёделя о полноте многие логики не до конца различали синтаксическое и~семантическое понятия следования. Поэтому после работ Гёделя настал серьёзный кризис. Как доказать, что ZFC непротиворечива? Вторая теорема о~неполноте говорит, что этого нельзя сделать, оставаясь в~рамках теории. А~если б\'{о}льшей теории нет? И~модель мы не предъявим --- это будет свед\'{е}ние к~чему-то более сложному! Остаётся апеллировать к~максимальной наглядности, свести утверждения о~бесконечном к~понятным конечным вещам, которые человеческая интуиция уже способна, по нашей вере, охватить. Итак, изнутри узнать, противоречива ли ZFC, невозможно, программа Гильберта провалилась --- и~всё же мы знаем больше, чем знали раньше.

Важно различать {\itshape теорию,} в~которой мы работаем, формализуем её, подчиняем строгому своду правил, и~{\itshape метатеорию} над ней, в~качестве которой у~нас всё время незримо будет выступать ZFC.

\subsection{Аксиоматика теории множеств ZFC}
\epigraph{Consider the set of all sets that have never been considered. Hey! They're all gone!! Oh, well, never mind\ldots}{Dr. David Batchelor}
\subsubsection{Конечные аксиомы}
Пусть сигнатура состоит из двух символов бинарных отношений: $\sigma = \{\in , =\}$. Обозначение $x \in y$  будем читать как <<$x$ принадлежит $y$>>. Наличие обычных аксиом равенства (рефлексивность, транзитивность, симметричность, $x=x_1 \wedge y=y_1 \to (x \in y \leftrightarrow x_1 \in y_1)$) подразумеваем без комментариев; иначе, считаем теорию {\itshape нормальной}. В~некоторых вариациях аксиоматики предполагается ограничиться только отношением принадлежности, а равенство определять через него по следующей аксиоме-<<определению>>:
\begin{ax}[Объёмности]
\begin{gather}
x=y \leftrightarrow \forall z (z \in x \leftrightarrow z \in y).
\end{gather}
\end{ax}
Начнём описывать, какие множества у нас будут допустимыми.
\begin{ax}[Пары]
\begin{gather}
\forall x,y \, \exists z: \forall w (w \in z \leftrightarrow (w=x \vee w=y)).
\end{gather}
\end{ax}
Неформальный смысл: существует {\itshape неупорядоченная пара} $\{x,y\}$, состоящая из элементов $x,y$. Если взять один и~тот же, то существует {\itshape синглетон} --- множество $\{x\}$ ровно из одного элемента.
Возникает вопрос: а существует ли тройка, четвёрка и~ т. д.? Для их введения нам понадобится
\begin{ax}[Объединения]
\begin{gather}
\forall x \exists y(y=\cup x).
\end{gather}
\end{ax}
Здесь под $\cup x$ мы подразумеваем множество, состоящее из объединения элементов всех его элементов:
\begin{gather}
y=\cup x \stackrel{\text{def}}{\Longleftrightarrow} \forall z(z \in y \leftrightarrow \exists w \in x(z \in w))
\end{gather}
Отсюда мгновенно выводим стандартное понятие объединения двух множеств: $a\cup b\Leftrightarrow \cup\{ a,b\}.$ Теперь мы получаем и~желанную тройку: $\{x,y,z\}\eqdef\{x,y\}\cup\{z\}$. Более того, имеем и~неупорядоченные $n$-ки для любого $n$ (хотя, оставаясь в рамках теории первого порядка, мы и~не можем формально записать и~доказать такое обобщение).

Следующая аксиома была предложена специально для ликвидации проблем в~духе парадокса Рассела. Говоря неформально, мы хотим, чтобы для любого <<свойства>> $\varphi$ (записанного формулой логики предикатов в~сигнатуре теории множеств) и~множества $x$ существует его подмножество
\begin{gather}
z=\{\,y \in x\mid \varphi(y)\,\}
\end{gather}
и не более. <<Множества всех множеств>> из теории исключаются. Записывая формально:
\begin{ax}[Выделения (схема аксиом)]
\begin{gather}
\exists z\:\forall y(y \in z \leftrightarrow y \in x \wedge \varphi (y)).
\end{gather}
\end{ax}
Однако, такая запись недостаточно удовлетворительна. Смотрите: формул всего счётное число, значит, из любого по мощности множества можно выделить лишь счётное число различных подмножеств. Неужели мы не имеем права описать все лучи вида $I_a,\,a\in\RR,$ где
\begin{gather}
I_a=\{x\in\RR\mid x<a\}?
\end{gather}
Чтобы исправить проблему, оказывается, нужно допустить параметры (свободные переменные) в формулах $\varphi$. Тогда оказывается, что, например, предложенные лучи выделяются единственной формулой $\varphi(x,a)=(x<a).$

Внезапный вопрос на сообразительность: а~почему по всем этим аксиомам вообще существует хотя бы одно множество? Ответ: мы не заостряли внимания, но, кроме аксиом равенства и~смысловых математических аксиом, скрыто существуют и~логические, утверждающие, среди прочего, что $\exists x\colon\, x=x$. Теперь, кстати, мы можем обосновать существование пустого множества: раз хоть какое-то множество $w$ существует, выберем какое-нибудь свойство, которое заведомо ни для чего не выполняется $(x\ne x),$ и~выделим им пустое подмножество из $w$ по аксиоме выделения. Аксиома объёмности, в~свою очередь, гарантирует, что такое множество ровно одно; обозначим его привычным нам символом $\varnothing$.

В~качестве упражнения теперь докажите:
\begin{stm}
$x \ne \varnothing \to \exists y=\cap x,$ то есть $\exists u\:(u\in x)\to\exists y\,(\forall z\,(z\in y\leftrightarrow \forall u\in x\,z\in u)).$
\end{stm}
\begin{ax}[Степени]
\begin{gather}
\forall x\,\exists y\:(\forall z\:(z\in y\lra z\subseteq x)).
\end{gather}
\end{ax}

%FUTURE Ввести упорядоченные пары, декартовы произведения, отношения, функции, инъекцию/сюръекцию/биекцию; классы. (См. на сайте.)
\subsubsection{Натуральные числа}
Впрочем, ни одна из имеющихся аксиом пока не гарантирует нам существования чего-то большего, нежели конечные множества. (Убедитесь, что совокупность всех наследственно конечных множеств является для уже описанных аксиом моделью: множество называется \textit{наследственно конечным,} если оно само конечно, и~любой его элемент наследственно конечен.) Чтобы перейти к~бесконечности, предъявим одно из них конструктивно и~положим, что оно существует.
\begin{df}
Множество $X$ называется {\itshape индуктивным,} если
\begin{gather}
(\varnothing \in X) \wedge \,(\forall y \in X\:y\cup\{y\}\in X).
\end{gather}
\end{df}
Интуитивно: если мы обозначим $\varnothing$ за 0, $\{\varnothing\}$ за 1, $\{\es,\{\es\}\}$ за 2 и т. д., получим последовательность своего рода <<натуральных чисел>>.

Теперь скажем, что такие последовательности существуют.
\begin{ax}[Бесконечности] Существует индуктивное множество:
\begin{gather}
\exists w (\varnothing \in w\wedge(\forall y\in w\:y\cup\{y\}\in w)).
\end{gather}
\end{ax}
Почему существует множество всех натуральных чисел $\mathbb{N}$ (иначе обозначаемое $\omega$)? Можно сказать, что мы фиксируем среди всех индуктивных множеств минимальное по включению; или же, мы просто берём $\bigcap\limits_{I\text{ -- индуктивно}}I$.
\begin{df}
$\mathbb{N}$ --- наименьшее из индуктивных множеств, то есть \mbox{$\mathbb{N}\eqdef \bigcap\{J\subset I\mid J\text{ -- индуктивно}\}$}. Здесь $I$ --- какое-то индуктивное множество, минимальность подразумевается по включению.
\end{df}
Введём на числах естественный порядок:
\begin{df}
Пусть $n,m\in\mathbb{N}.$ Тогда $n<m\stackrel{def}{\Longleftrightarrow}n\in m.$
\end{df}
и~операцию взятия следующего элемента:
\begin{df}
$n+1\eqdef S(n)=n\cup\{n\}.$
\end{df}
\begin{exer}
Докажите, что $x<y+1\Longleftrightarrow(x<y\vee x=y).$
\end{exer}

\textit{Решение:}

\begin{gather}
x<y+1\Leftrightarrow x\in y\cup\{y\}\Leftrightarrow x\in y\vee x=y\Leftrightarrow x<y\vee x=y.
\end{gather}
Пора доказать на основании аксиом 1 -- 6 фундаментальное свойство натуральных чисел.
\begin{theorem}[Принцип индукции]
Пусть $0\in A\wedge\forall n\,(n\in A\rightarrow n+1\in A)$. Тогда $\forall n\in\mathbb{N}\,n\in A,$ то есть $\mathbb{N}\subset A.$
\end{theorem}
\begin{proof}
$\mathbb{N}\cap A$ - индуктивно. Но $\mathbb{N}$ --- минимальное по включению среди индуктивных $\Rightarrow\,\mathbb{N}\cap A\equiv\mathbb{N},\,\mathbb{N}\subseteq A$.
\end{proof}
Это утверждение можно несколько обобщить.
\begin{theorem}[Порядковая индукция]
Если $\forall n\in\mathbb{N}\,(\forall m<n\,m\in A\rightarrow n\in A),$ то $\mathbb{N}\subseteq A.$
\end{theorem}
\begin{proof}
Рассмотрим $A'\eqdef \{n\in\mathbb{N}\mid\forall m<n\:m\in A\}$. Докажем, что множество $A'$ индуктивно.

$0\in A'$ --- тривиально.

$n\in A'\rightarrow\forall (m<n)\:m\in A\xrightarrow{\text{предп. инд.}}n\in A\rightarrow n+1\in A\rightarrow\forall (m<n+1)\:m\in A.$
\end{proof}
\begin{imp}
Всякое непустое подмножество натуральных чисел имеет минимальный элемент:
\begin{gather}
\forall A\subseteq\NN\:(\exists x\:(x\in A)\to\exists x\:(x\in A\wedge\forall y<x\:y\notin A)).
\end{gather}
\end{imp}

\lectmark{25 сентября 2014 г.}{2 октября 2014 г.}
\subsection{Порядок и ординалы}
\epigraph{Дважды два равно четырём. И не здесь и сейчас, а всегда!}{Жак Фатрелл}
\subsubsection{Линейные и полные порядки}
\begin{df}
Пусть на множестве $P$ задано бинарное отношение $<$. Будем говорить, что это {\itshape отношение частичного порядка,} если оно

\pt{1} иррефлексивно: $\forall x\,\neg(x<x)$;

\pt{2} транзитивно: $\forall x,y,z\,(x<y\wedge y<z)\rightarrow x<z$.

Само множество $P$ называется при этом {\itshape частично упорядоченным множеством}.
\end{df}
Нас будут особо интересовать
\begin{df}
{\itshape Линейные порядки } --- это частичные порядки с дополнительным условием

\pt{3} $\forall x,y\in P\,(x=y\vee x<y\vee y<x)$ --- любые два элемента сравнимы.
\end{df}
Очевидно, не все порядки линейны: рассмотрите отношение <<быть делителем>> на $\mathbb{N}$. Договоримся обозначать {\itshape нестрогий порядок} $x\leqslant y\Leftrightarrow x<y\vee x=y.$
Введём понятия, характеризующие элементы в частично упорядоченном множестве $P$:
\begin{df}
{\itshape Максимальным (минимальным)} называется элемент $x\in P$, такой, что $\neg\exists a\in P\:(a>x)$ (соответственно, $(a<x)$).
\end{df}
Не путать со следующим определением!
\begin{df}
{\itshape Наибольший (наименьший)} элемент множества $P$ --- это такой $x\in P,$ что $\forall a\in P\:(a\le x)$ (соответственно, $a\ge x$).
\end{df}
Точно так же определяются эти элементы для подмножеств $A\subset P$.

Рассмотрим отношение делимости на множестве $\{0\sco 10\}$. Там есть максимум, и даже не один (10, 9, 8, 7, 6 годятся), но не имеется наибольшего элемента. Наибольший элемент, если он есть, является максимальным, но обратное, вообще говоря, неверно. В линейном порядке эти понятия эквивалентны.
\begin{df}
Элемент $a\in P$ называется \textit{верхней (нижней) гранью} подмножества $A\subseteq P$, если $\forall x\in A\:(x\le a)$ (соответственно, $x\ge a$).

$a=\sup A$ --- \textit{точная верхняя грань,} если $a$ --- наименьшая среди всех верхних граней. Аналогично определяется $\inf A$ --- наибольшая среди всех нижних граней.
\end{df}
\begin{ex}
У множества $\{x\in\mathbb{Q}\mid x^2\le 2\}$ в $\mathbb{Q}$ много верхних граней, но точной нет.
\end{ex}
\begin{df}
Пусть $(P,<_P)$ и $(Q,<_Q)$ --- частично упорядоченные множества. Отображение $f\colon P\rightarrow Q$ {\itshape возрастает (сохраняет порядок),} если
\begin{gather}
\forall x,y\in P\:(x<y\Rightarrow f(x)<f(y)).
\end{gather}
\end{df}
\begin{df}
Отображение $f$ --- {\itshape изоморфизм (порядков),} если $f$ сохраняет порядок и является биекцией между $P$ и $Q$. Такие порядки $<_P$ и $<_Q$ называются {\itshape изоморфными}. Обозначение: $(P,<_P)\simeq(Q,<_Q).$
\end{df}
\begin{ex}
\pt{1} $\mathbb{N}$ и $\mathbb{Q}$ --- не изоморфны (наименьший должен переходить в наименьший).

\pt{2} $\hr{-\frac{\pi}{2};\frac{\pi}{2}}$ и $\mathbb{R}$ --- изоморфны $(\arctg)$.

\pt{3} $(0;1)\cup(2;3)$ и $\mathbb{R}$ - не изоморфны (изоморфизм монотонно возрастает в обычном числовом смысле, поэтому у него не более чем счётное число разрывов первого рода, но разрывов первого рода быть не может в силу существования обратного отображения).

\pt{4} $\mathbb{Q}\wo\{ a\}$ изоморфно $\mathbb{Q}$: <<всё счётные плотные линейные порядки без первого и последнего элемента изоморфны>> (а несчётные --- совсем нет).
\end{ex}
Решающим определением в этом разделе курса станет следующее.
\begin{df}
Пусть $(P,<_P)$ --- линейный порядок. $P$ называется {\itshape вполне упорядоченным множеством,} если любое непустое подмножество $P$ имеет наименьший элемент.
\end{df}
\begin{ex}
$(\mathbb{N},<).$
\end{ex}
Какова наша основная цель? Отношение порядкового изоморфизма разбивает все вполне упорядоченные множества на классы эквивалентности --- так называемые <<порядковые типы>>. Будем их изучать.
\begin{stm}[О монотонности]
\label{monot}
Пусть $(W,<)$ --- вполне упорядочено; $f\colon W\rightarrow W$ возрастает. Тогда $\forall x\in W\,f(x)\ge x$.
\end{stm}
\begin{proof}
От противного. Пусть $A\eqdef \{x\mid f(x)<x\}\ne \es$. $A\subseteq W\Rightarrow \exists a$ --- наименьший элемент $A$. Что можно сказать про $f(a)$? $f(a)<a,$ поскольку $a\in A$. Но $f$ возрастает, поэтому применим к~неравенству $f$ ещё раз: $f(f(a))<f(a)$. Обозначив $b=f(a),$ имеем $f(b)<b.$ Но $b<a\Rightarrow b\ne a\Rightarrow f(b)\ge b$ в~силу того, что $a$ был в $A$ наименьшим. Противоречие.
\end{proof}
\begin{imp}
Пусть $(W,<)$ --- вполне упорядочено; $f\colon W\rightarrow W$ --- автоморфизм\footnote{То есть изоморфизм на себя.}. Тогда $\forall x\in W\:(f(x)=x).$
\end{imp}
\begin{proof}
По доказанному, $\forall x\:(f(x)\ge x).$ Но существует $f^{-1}$ --- тоже автоморфизм, и $f^{-1}(x)\ge x$. Навешивая $f$, имеем $f(f^{-1}(x))=x\le f(x)\Rightarrow f(x)\equiv x.$
\end{proof}
\begin{imp}
Если $(W_1,<_1)$ и $(W_2,<_2)$ - изоморфные вполне упорядоченные множества, то их изоморфизм --- единственен.
\end{imp}
\begin{proof}
Пусть $f,g\colon W_1\rightarrow W_2$ --- два изоморфизма. Тогда $\id_{W_2}=f\circ g^{-1}\colon W_2\rightarrow W_2$ --- автоморфизм; $\id_{W_1}=g^{-1}\circ f\colon W_1\rightarrow W_1$ --- автоморфизм $\Rightarrow f=(g^{-1})^{-1}=g$.
\end{proof}
\begin{df}
Пусть $(W,<)$ --- вполне упорядоченное множество, $u\in W$. {\itshape Начальным отрезком} $W$ назовём подмножество $W(u)\eqdef\{x\in W\mid x<u\},$ упорядоченное ограничением отношения $<$. В силу того, что минимальные элементы в подмножествах сохраняются, начальный отрезок --- тоже вполне упорядочен.
\end{df}
\begin{stm}[О неизоморфности]
\label{non-iso}
Пусть $(W,<)$ --- вполне упорядочено. Тогда ни для какого $u\in W$ упорядоченные множества $W$ и $W(u)$ не изоморфны.
\end{stm}
\begin{proof}
Если $f\colon(W,<)\to(W(u),<)$ --- изоморфизм, то $f(u)\in W(u)\Ra f(u)<u.$ Противоречие.
\end{proof}
\begin{theorem}[О сравнении вполне упорядоченных множеств]
Пусть $W_1,\:W_2$ --- два вполне упорядоченных множества. Тогда имеет место одна из трёх возможностей:

\pt{1} $W_1$ и $W_2$ изоморфны;

\pt{2} $W_1$ изоморфно $W_2(u)$ для некоторого $u$;

\pt{3} $W_2$ изоморфно $W_1(u)$ для некоторого $u$.

Неформально: любые два вполне упорядоченных множества сравнимы.
\end{theorem}
\begin{proof}
Обозначим $f\subseteq W_1\times W_2,\,f\eqdef\{\ha{x,y}\in W_1\times W_2\mid\text{$W_1(x)$ и $W_2(y)$ изоморфны}\}.$ Тогда $f$ функционально и инъективно (воспользуйтесь только что доказанным \sref{утверждением}{non-iso}!). $f$ сохраняет порядок: пусть $W_1(x_1)$ и $W_2(f(x_1))$ изоморфны, $W_1(x_1)$ и $W_2(f(x_1))$ --- тоже, где $W_1(x_1)\subseteq W_1(x_2).$ Второй изоморфизм будет служить продолжением первого, откуда $W_2(f(x_1))\subseteq W_2(f(x_2)),$ что и влечёт $f(x_1)<f(x_2)$.

Обозначим:
\begin{gather}
\begin{aligned}
\dom f=\{x\mid\exists y\:\ha{x,y}\in f\}\\
\ran f=\{y\mid\exists x\:\ha{x,y}\in f\}
\end{aligned}
\end{gather}
Возможны следующие варианты:

\pt{A} $\dom f=W_1,\,\ran f=W_2$ --- это первый пункт.

\pt{B} $\ran f\ne W_2,\,W_2\wo\ran f\ne\es.$ Выберем наименьший элемент в $W_2\wo\ran f,$ то есть $\ran f=W_2(y).$ Допустим, при этом оказалось, что $\dom f\ne W_1.$ Тогда\footnote{Если $x_2\in\dom f$ и $x_1<x_2,$ то $x_1\in\dom f.$} $\dom f=W_1(x),\,x\in W_1.$ Но это влечёт $\ha{x,y}\in f\Lra y\in\ran f$ --- противоречие с выбором $y.$ Итак, $\dom f=W_1$ --- второй пункт.

\pt{C} $\dom f\ne W_1$ --- аналогично.
\end{proof}

\subsubsection{Ординалы}
\label{ordinals}
\epigraph{Дети прекрасно знают, что считать можно до бесконечности. Они стремятся превзойти друг друга, говоря <<бесконечность>>, затем <<бесконечность плюс один>>, и так далее.}{Саймон Сингх}
Чтобы не рассуждать о <<классах эквивалентности вполне упорядоченных множеств>>, введём соответствующую аксиоматику: предъявим по конкретному множеству каждого класса и будем изучать их.
\begin{df}
Множество $A$ называется {\itshape транзитивным,} если $\forall x\:(x\in A\rightarrow x\subseteq A)$.
\end{df}
\begin{df}
$A$ --- {\itshape ординал,} если

\pt{1} $A$ --- транзитивно;

\pt{2} $(A,\in)$ вполне упорядочено (по отношению принадлежности).
\end{df}

Ординалы существуют: сразу понятно, что $\es$ --- ординал. $\{\es\},$ $\{\es,\{\es\}\},$ $\{\es,\{\es\},\{\es,\{\es\}\}\}$ --- все тоже таковы, и так далее.

Возьмём $\Ord$ --- {\itshape класс} всех ординалов. На нём установим порядок: $\forall\alpha,\beta\in\Ord,\,\alpha<\beta\ardef\alpha\in\beta.$ Докажем ряд простых свойств, вытекающих из этих определений.
\lectmark{2 октября 2014 г.}{9 октября 2014 г.}
\begin{lemma}[Свойства ординалов]
\label{ord-prop}

\pt{1} $0=\es\in\Ord.$

\pt{2} $\alpha\in\Ord\wedge\beta\in\alpha\Rightarrow\beta\in\Ord.$

\pt{3} $\alpha,\beta\in\Ord\wedge\alpha\subsetneq\beta\Rightarrow\alpha\in\beta.$

\pt{4} $\alpha,\beta\in\Ord\Rightarrow\alpha\subset\beta$ или $\beta\subset\alpha.$
\end{lemma}
\begin{proof}
\pt{1} Очевидно.

\pt{2} $\beta\in \alpha\Rightarrow\beta\subseteq\alpha.$

$(\alpha,\in)$ вполне упорядочено $\Rightarrow(\beta,\in)$ вполне упорядочено.

Покажем транзитивность: $y\in x\in\beta(\in\alpha)\Rightarrow$ (ибо $\beta\subseteq\alpha$ из транзитивности) $y\in x\in\alpha\stackrel{x\subseteq\alpha}{\Longrightarrow}\beta\in\alpha,x\in\alpha,y\in\alpha,y\in x\in\beta.$ Но $\in$ на $\alpha$ --- отношение порядка. Поэтому $y\in\beta$.

\pt{3} $\beta\wo\alpha\ne\es.$ Возьмём какой-нибудь $\gamma\in(\beta\wo\alpha).$ $\alpha=\beta(y)=\{x\in\beta\mid x<y\}.$ В~самом деле, пусть $x\in\alpha,x\ge\gamma.$ Тогда либо $\gamma\in x\in\alpha,$ либо $\gamma=x\in\alpha,$ и в обоих случаях $\gamma\in\alpha,$ вопреки выбору $\gamma$.

Итак, $\alpha=\{x\in\beta\mid x\in\gamma\}=y\in\beta\Rightarrow\alpha\in\beta.$

\pt{4} $\gamma=\alpha\cap\beta\in\Ord$ (проверьте пункты определения руками). Допустим, $\gamma\ne\alpha\wedge\gamma\ne\beta.$ Из этого следует, что $\gamma\in\alpha\wedge\gamma\in\beta\Rightarrow\gamma\in(\alpha\cap\beta)=\gamma.$ Но это противоречит определению ординала, требовавшего строгого порядка! Значит, или $\gamma=\alpha\Rightarrow\alpha\subset\beta,$ или $\gamma=\beta\Rightarrow\beta\subset\alpha.$
\end{proof}
Выведем ряд простых и важных следствий.
\begin{imp}

\pt{1} $<$ --- линейный порядок на Ord.

\pt{2} $\forall\alpha\in\Ord\:\alpha=\{\beta\in\Ord\mid\beta<\alpha\}.$

\pt{3} Пусть $C\ne\es,C\subseteq\Ord\Rightarrow\cap C\in\Ord,\,\cap C\in C,\,\cap C=\inf C$.

\pt{4} Пусть $X\ne\es,C\subseteq\Ord\Rightarrow\cup X\in\Ord,\,\cup X=\sup X$.

\pt{5} $\forall\alpha\in\Ord\:\alpha\cup\{\alpha\}\in\Ord,\,\alpha\cup\{\alpha\}=\min\{\beta\in\Ord\mid\beta>\alpha\}.$
\end{imp}
\begin{proof}
\pt{1} $\alpha\in\beta\in\gamma\Rightarrow\alpha\in\gamma,$ так как $\gamma$ --- транзитивно.

$\alpha,\beta\in\Ord\Rightarrow\Rightarrow\alpha\subset\beta$ или $\beta\subset\alpha\Rightarrow\alpha=\beta\vee\alpha\in\beta\vee\beta\in\alpha.$

\pt{2} Очевидно; $\subseteq$ по п. 2 \sref{леммы}{ord-prop}.

\pt{3} $\cap C\in\Ord$ --- очевидно.

$\alpha\in C,\,\cap C\subseteq\alpha\Rightarrow(\cap C)\in\alpha\in C.$

Если $\cap C\notin C,$ то $\forall\alpha\in C\,\neg\alpha=\cap C\Rightarrow\forall\alpha\in C\,\cap C\in\alpha\Rightarrow\cap C\in\cap C$ --- противоречие.

\pt{4} Пусть $Y\subseteq(\cup X).$ Для любого $\alpha\in\Ord$ такого, что $\alpha\cap Y\neq\es,$ это пересечение содержит наименьший элемент, который, поскольку $\alpha$ является начальным отрезком $X,$ оказывается наименьшим и для $Y.$ Итак, вполне упорядоченность установлена. Транзитивность очевидна при рассмотрении ограниченного начала.

\pt{5} Простая проверка показывает, что свойство транзитивности наследуется на $\alpha\cup\{\alpha\}.$ Упорядоченность тоже присутствует: мы просто объявили элемент $\alpha$ больше всех ранее имевшихся, ибо все прежние принадлежат $\alpha$ и~потому меньше. Итак, $\alpha\cup\{\alpha\}$ --- ординал. То, что он является какой-то верхней гранью, понятно из построения. Почему она точна? Если $\gamma>\alpha,$ то $\alpha\in\gamma\Rightarrow\alpha\subseteq\gamma.$
\end{proof}

Для дальнейшего нам понадобится следующая схема аксиом \textit{подстановки} или \textit{замены.}

\begin{ax}[Замены]
\label{z}
\begin{gather}
\forall x,y,z(\varphi(x,y,\vec{p})\wedge\varphi(x,z,\vec{p})\rightarrow y=z)\,\rightarrow\,\forall X\exists Y\forall y(y\in Y\leftrightarrow\exists x\in X\,\varphi(x,y,\vec{p})).
\end{gather}
\end{ax}

При заданных значениях параметров $\vec{p},$ формула $\varphi(x,y)$ задаёт бинарное отношение на классе всех множеств, которое также является, вообще говоря, классом. Посылка аксиомы говорит, что это отношение функционально (является частичной функцией). Заключение аксиомы говорит, что образ любого множества $X$ при этой функции является множеством. Менее формально, если $F$ --- функция-класс, то для любого множества $X$ совокупность $\{F(x)\mid x\in X\}$ также является множеством.

\begin{theorem}
Пусть $(W,<)$ --- вполне упорядочено. Тогда $\exu\alpha\in\Ord\colon\alpha\simeq(W,<).$
\end{theorem}
\begin{proof}
Единственность сразу следует из того, что разные ординалы являются начальными отрезками друг друга и~поэтому попарно неизоморфны. Докажем существование.
Пусть $x\in W.$ Обозначим
\begin{gather}
W(x)\eqdef\{y\in W\mid y<x\}.
\end{gather}
Рассмотрим формулу $\varphi(x,\alpha),$ выражающую предикат: <<$\alpha$ --- ординал, и~$W(x)$ изоморфно $\alpha$>>. $\varphi$ задаёт бинарное отношение-класс. Его функциональность очевидна, поскольку изоморфные как упорядоченные множества ординалы равны (\sref{лемма}{ord-prop}). Обозначим частичную функцию через $F.$

Докажем, что $F$ всюду определена на $W$. От противного: иначе существует наименьший элемент: $y\in\{x\in W\mid F(x)\text{ не определена}\}\subseteq W.$ Но тогда $\forall z<y\:W(z)\simeq F(z).$ По \sref{аксиоме}{z}, $\{F(z)\mid z<y\}$ есть множество ординалов. Рассмотрим $\alpha=\cup\{F(z)\mid z<y\}.$ Докажем, что $\alpha$ изоморфно $W(y).$ Действительно, в случае, если $\alpha$ изоморфно начальному отрезку $W(y),$ то этот отрезок изоморфен некоторому отрезку самого себя. И~наоборот, если $W(y)$ изоморфен некоторому отрезку $\alpha,$ то этот отрезок изоморфен своему собственному начальному отрезку. Таким образом, $F(y)=\alpha,$ что противоречит выбору $y.$

Итак, $F$ всюду определена на $W$. По \sref{аксиоме}{z}, $F(W)=\{F(x)\mid x\in W\}$ --- множество. Тогда существует наименьший ординал $\gamma\notin F(W)\subseteq\Ord.$ (Почему в~\mbox{$\Ord\wo F(W)$} есть элементы? Рассмотрим $\cup F(W)+1\notin F(W)$ заведомо.) Тогда $F(W)=\{F(x)\mid x\in W\}=\gamma$ (в силу минимальности $\gamma,$ во все меньшие что-то обязано перейти!). Но тогда $F$ - это изоморфизм между $W$ и ординалом $\gamma$.

\end{proof}

Ординал вида $\alpha\cup\{\alpha\}$ называется \textit{последователем.} Ординалы $\alpha\neq 0,$ не являющиеся последователями, называются \textit{предельными.} Если $\alpha$ предельный, то $\alpha=\sup\{\beta\mid\beta<\alpha\}=\cup\alpha.$ Наименьший предельный ординал обозначается $\omega$ и совпадает с множеством натуральных чисел $\NN$.

Следующая теорема выражает принцип \textit{трансфинитной индукции,} обобщающий индукцию с множества натуральных чисел на класс всех ординалов.

\begin{theorem}[Трансфинитная индукция]
Пусть $C\subseteq\Ord$ --- такой класс, что:

\pt{1} $0\in C,$

\pt{2} $\forall\alpha\in\Ord\:(\alpha\in C\Rightarrow\alpha+1\in C),$

\pt{3} Если $\alpha\ne 0$ и $\alpha$ --- предельный, то $\forall\beta<\alpha\:(\beta\in C\Rightarrow\alpha\in C).$

Тогда $C=\Ord.$
\end{theorem}
\lectmark{9 октября 2014 г.}{16 октября 2014 г.}
\begin{proof}
Если $C\ne\Ord,$ то рассмотрим наименьший ординал, не принадлежащий $C,$ и получаем противоречие.
\end{proof}
\begin{df}
\textit{Трансфинитной последовательностью} называется совокупность $\ha{a_\xi\mid\xi<\alpha},$ занумерованная ординалами ($\alpha\in\Ord$ --- \textit{длина} этой последовательности).
\end{df}
Пусть теперь $G$ --- функция, заданная на последовательностях.
\begin{theorem}[Трансфинитная рекурсия]
$\forall\Theta\:\exu\ha{a_\xi\mid\xi<\Theta}$ такое, что $a_\alpha=G(\ha{a_\beta\mid\beta<\alpha})\:\forall\alpha<\Theta.$ Иными словами: пусть $S$ --- класс трансфинитных последовательностей, $G$ --- функция на $S$. Тогда $\exu F$ --- функция на $\Ord$: $\forall\alpha\in\Ord\:F(\alpha)=G(F\eva{\alpha})$\footnote{Здесь незримо использована аксиома подстановки: нужно, чтобы $F\eva{\alpha}\eqdef\ha{F(\xi)\mid\xi<\alpha}$ было множеством, ведь только множества можно подставлять в качестве параметра в функцию $G$!}.
\end{theorem}
\begin{ex}
Прежде чем доказывать общий факт, рассмотрим некоторые примеры применения теоремы.
Определим сложение ординалов так:
\begin{gather}
\case{\alpha+0=\alpha, &\\ \alpha+(\beta+1)=(\alpha+\beta)+1, &\\ \alpha+\beta=\lim\limits_{\xi\ra\beta}(\alpha+\xi), & \beta\text{ --- предельный.}}
\end{gather}
(Здесь $\lim\limits_{\xi\ra\beta}(\alpha+\xi)=\sup\{\alpha+\xi\mid\xi<\beta\}.$) Тогда существует функция $+\colon\Ord\times\Ord\ra\Ord,$ обладающая свойствами 1---3.
В самом деле: определим такую функцию $G_\alpha$ следующим образом: $G_\alpha(\Lambda)=\alpha,\,G_\alpha(\ha{a_\xi\mid\xi<\gamma})=$
\begin{gather}
\case{a_\beta+1, &\gamma=\beta+1,\\ \sup\{a_\xi\mid\xi<\gamma\}, &\gamma\text{ --- предельная.}}
\end{gather}
Теперь применим теорему.

Умножение:
\begin{gather}
\case{\alpha\times 0=0, &\\ \alpha\times(\beta+1)=\alpha\times\beta+\alpha, &\\ \alpha+\lambda=\sup\limits_{\beta<\lambda}(\alpha\times\beta), & \lambda\text{ --- предельный.}}
\end{gather}

Возведение в степень:
\begin{gather}
\case{\alpha^{0}=1, &\\ \alpha^{\beta+1}=\alpha^{\beta}\times\alpha, &\\ \alpha^{\lambda}=\sup\limits_{\beta<\lambda}(\alpha^{\beta}), & \lambda\text{ --- предельный.}}
\end{gather}

Посчитаем:
$1+\omega=\sup\limits_{n<\omega}(1+n)=\omega\ne\omega+1,$ $2\times\omega=\omega$ и т. д.
\end{ex}
\begin{proof}
Докажем единственность. Пусть $F_1$ и $F_2$ --- функции на $\Ord,$ и $F_i(\alpha)=G(F_i\eva{\alpha}),\,i=1,2.$ Предположим, что $\exi\alpha\colon\:F_1(\alpha)\ne F_2(\alpha).$ Класс всех таких $\alpha$ непуст. Пусть $\alpha_0=\min\{\alpha\in\Ord\mid F_1(\alpha)\ne F_2(\alpha))\}.$ Тогда $\forall\beta<\alpha_0\:F_1(\beta)=F_2(\beta),\: F_1\eva{\alpha_0}=F_2\eva{\alpha_0}.$ Но при этом $F_1(\alpha_0)=F_2(\alpha_0)$ --- противоречие.

Докажем существование. Рассмотрим $\Fs$ --- семейство всех функций $f$ таких, что $\dom(f)\in\Ord,$ и $\forall\alpha\in\dom(f)\:f(\alpha)=G(f\eva{\alpha}).$ Это семейство непусто: например, $\es\in\Fs.$ Далее, пусть $\dom f=1=\{0\}=\{\es\}.$ Тогда, если $f(0)=G(f\ev{0}{6pt})=G(0),$ то $f\in\Fs.$

Положим $F\eqdef\bigcup\Fs.$ Что нужно проверить?

\pt{1} $F$ --- функция.

\pt{2} $\dom F=\Ord.$

\pt{3} $\forall\alpha\in\Ord\:F(\alpha)=G(F|\alpha).$

Нам понадобится следующая
\begin{lemma}
Если $\dom(f_1)=\alpha<\beta=\dom(f_2)$ ($f_1,f_2\in F$), то $f_1\subseteq f_2.$
\end{lemma}
\begin{proof}
Аналогично единственности.
\end{proof}
Это сразу доказывает первый пункт. Обоснуем второй. Если бы $\dom(F)\ne\Ord,$ то мы бы выбрали $\alpha_0=\min(\Ord\wo\dom F).$  Тогда $\forall\beta<\alpha_0\:\beta\in\dom F.$ Значит, существует такая конкретная $f\in\Fs,$ что определено $f(\beta).$ Но $f$ определена на каком-то ординале. Проверим третье. $F\eva{\alpha_0}$ у нас определено, положим $x\eqdef G(F\eva{\alpha_0}),\:f_0\eqdef(F\eva{\alpha_0})\cup\{\ha{\alpha_0,x}\},$ то есть продолжили $F\eva{\alpha_0}$ до $f_0,$ положив $f(\alpha_0)\eqdef x.$ По построению, $f_0\in\Fs,\:\dom(f_0)=\alpha_0+1.$ Противоречие.
\end{proof}
Ключевым моментом было использование аксиомы подстановки: нужно, чтобы $F\eva{\alpha}$ было множеством, ведь только множества можно подставлять в $G$!
\subsection{Аксиома выбора}
\label{choice}
\subsubsection{Теорема Цермело и лемма Цорна}
\epigraph{The Axiom of Choice is obviously true, the well-ordering principle obviously false, and who can tell about Zorn’s lemma?}{Jerry Bona}
\begin{ax}[Выбора, AC]
Пусть $S$ --- класс, состоящий из непустых множеств. Тогда $\exi f\colon S\ra\cup S$ такая, что $\forall x\in S\:f(x)\in x.$
\end{ax}
Особенность этой аксиомы --- невозможность явно предъявить эту функцию, можно лишь утверждать её существование. Следующие два неконструктивных утверждения не только следуют из аксиомы выбора, но и эквивалентны ей:
\begin{theorem}[Цермело, принцип вполне упорядочения]
Пусть $X$ --- произвольное множество; тогда существует такое отношение $<$ на $X,$ что $(X,<)$ --- вполне упорядочено.
\end{theorem}
\begin{lemma}[Цорна]
\label{Zorn}
Пусть $(X,<)$ --- частично упорядоченное множество, и всякая цепь\footnote{То есть линейно упорядоченное подмножество.} в нём обладает верхней гранью. Тогда в $X$ имеется максимальный элемент.
\end{lemma}

\begin{ex}
Существует {\itshape базис Гамеля $\RR$ над $\,\QQ$,} то есть такое подмножество векторов $B\subset\RR,$ что
\begin{gather*}
\forall x\in\RR\:\exu r_1\sco r_n\in B,\exu q_1\sco q_n\in\QQ\colon\:x={q_1}{r_1}+{q_2}{r_2}\spl{q_n}{r_n}.
\end{gather*}
\end{ex}
\begin{proof}
Используем лемму Цорна. Назовём множество $B$ {\itshape линейно независимым над $\QQ$,} если
\begin{gather}
\forall r_1\sco r_n\in B\:\forall q_1\sco q_n\in\QQ\:\:{q_1}{r_1}+{q_2}{r_2}\spl{q_n}{r_n}=0\Llra q_1=\ldots=q_n=0.
\end{gather}
Положим $\Bs\eqdef\{B\subseteq\RR\mid B\text{ --- линейно независимо над $\QQ$}\}$. Рассмотрим какую-нибудь цепь в $\Bs:$ объединив все её вложенные друг в~друга линейно независимые подмножества, получим тоже линейно независимое. В~самом деле, любая линейная комбинация, по определению, конечна, и~каждый вектор в~ней пришёл из какого-то конкретного множества в~объединении. Их только конечное число, поэтому можно найти среди них наибольший по включению. В~нём лежат все наши векторы линейной комбинации, но он уже был линейно независимым, поэтому все коэффициенты в~линейной комбинации равны нулю.

Применяя лемму Цорна, устанавливаем существование такого максимально линейно независимого подмножества $B_0\subseteq\RR$ (по включению), что к~нему нельзя добавить больше ни одного нового вектора, не нарушив линейной независимости. Оно и~будет искомым базисом.
\end{proof}
\lectmark{16 октября 2014 г.}{23 октября 2014 г.}
\begin{proof}
{\bfseries 1.\: Аксиома выбора $\Ra$ лемма Цорна.}

От противного: пусть $(A,<)$ --- частично упорядоченное множество, в~котором всякая цепь имеет верхнюю грань, но нет максимального элемента. Зафиксируем какую-нибудь цепь $C:$ тогда $\exists a\:\forall x\in C\:(a>x)$ --- так называемая <<строгая верхняя грань>> $C.$ В~самом деле: пусть $b$ --- какая-то верхняя грань $C$ (существует по условию). $b$ --- не максимум, поэтому $\exists d>b\geqslant x\in C,$ его и~возьмём. Обозначим $\Psi (C)=\{a\mid a\text{ --- строгая верхняя грань $C$}\}$. (Понятно, что это --- множество.) Применяем аксиому выбора: $\exists f\:\forall C\:f(\Psi(C))\in\Psi(C).$ Положим $\varphi(C)\eqdef f(\Psi(C))\in\Psi(C)$ и~используем это отображение, чтобы построить слишком большую цепь, которая не поместится в $A$ и~приведёт к~противоречию.

Назовём $B\subseteq A$ {\itshape корректным,} если:

\pt{1} $(B,<)$ --- вполне упорядочено,

\pt{2} $\forall x\in B\:x=\varphi(B_x),\:B_x\eqdef\{y\in B\mid y<x\}.$

Корректные множества бывают: например, $\es;\:\{\varphi(\es)\};\:\{\varphi(\es),\varphi(\{\varphi(\es)\})\}$ и т. д.
\begin{lemma}

\pt{1} Если $B,\,D $ корректны, то одно из них --- начальный отрезок другого.

\pt{2} Если $\Tc$ --- семейство корректных множеств, то и $\cup\Tc$ --- корректно.
\end{lemma}
\begin{proof}
\pt{1} Пусть множества даны как в~формулировке. Скажем, что $I_0$ --- {\itshape общее начало} $B$ и $D,$ если оно является начальным отрезком их обоих. Обозначим $I\eqdef\{I_0\mid I_0\text{ --- общее начало $B$ и $D$}\}.$ Тогда $I$ само по себе оказывается их общим началом. В самом деле: пусть $x\in I;$ тогда $\exists I_0\:(x\in I_0).$ Но тогда всякий $y\in B,$ меньший $x,$ тоже лежит в этом $I_0,$ то есть $y\in I.$

Если $I=B\vee I=D,$ то всё доказано: одно из множеств --- начальный отрезок второго. Пусть, однако, $I\ne B,\:I\ne D.$ Это даёт нам возможность (по вполне упорядоченности!) выбрать $b\eqdef\min_B(B\wo I),\:d\eqdef\min_D(D\wo I).$ $I$ --- общее начало для $B$ и $D;$ поэтому (второй пункт определения корректности) $b=\varphi(B_b)=\varphi(D_d)=d,$ ибо $B_b=D_d=I.$ Но теперь у нас $I\cup\{b\}$ --- общее начало для $B$ и $D,$ б\'{о}льшее, нежели объединение всех общих начал. Противоречие.

\pt{2} Пусть теперь $\Tc$ --- семейство корректных множеств, $U=\cup\Tc.$ Тогда выполняются следующие факты.

1.\:$(U,<)$ --- линейный порядок (по пункту 1).

2.\:$\forall B\in\Tc\:B$ --- начальный отрезок для $U.$ Проверим: пусть $x\in B,\,y\in U,\,y<x. $ Если существует $y\notin B\Leftrightarrow y\in U\wo B.$ $\exists D\in\Tc\:(y\in D)\Ra y\in D\wo B.$ По пункту 1, имеем два корректных множества $B$ и $D,$ причём понятно, что именно $B$ --- начальный отрезок $D$ (в $D$ есть элемент, которого нет в $B$). Но тогда и $y\in B.$ Противоречие.

3.\:$(U,<)$ --- вполне упорядочено. В самом деле: пусть $Y\subseteq U,\:Y\ne\es.$ Поскольку $Y\subseteq\cup\Tc,$ то $\exists B\in\Tc\:(y\in B),\:y\in Y\cap B\ne\es.$ Значит, $\exists m$ --- наименьший элемент в $Y.$ Тогда $m$ --- наименьший и в $Y$ (рассмотрим элемент $x\in Y,\:x<y$).

4.\:Выполняется $\forall x\in U\:x=\varphi(U_x).$ Почему? Возьмём $x\in B\in\Tc.$ Тогда $x=\varphi(B_x).$ Но $B,$ в свою очередь, является начальным отрезком в $U,$ откуда $B_x=U_x,$ и $x=\varphi(U_x).$
\end{proof}
Теперь мы готовы доказать лемму Цорна. Положим $\Sigma$ --- семейство {\itshape всех} корректных подмножеств $B\subseteq A.$ $U=\cup\Sigma$ --- вполне упорядочено $\Ra$ $U$ --- цепь, а $\varphi(U)$ --- строгая верхняя грань для $U.$ Тогда $U\cup\{\varphi(U)\}$ удовлетворяет определению корректного множества (полагаем новый элемент больше всех прежних, $B_x=U$). Но оно больше объединения всех корректных. Противоречие.

{\bfseries 2.\: Лемма Цорна $\Ra$ теорема Цермело.}

Хотим для заданного множества $X$ построить $<\subseteq X^2,$ чтобы $(X,<)$ стало вполне упорядоченным. Для $S\subseteq X$ будем рассматривать $\{(S,<_s)\mid(S,<_s)\text{ --- вполне упорядочено}\}\eqdef W(x).$ Введём порядок: $(S,<_s)\prec(T,<_t)\leftrightharpoons S\subsetneq T$ --- начальный отрезок в $(T,<_T),$ и $<_S={<_T}\eva{S}.$ Тогда оказывается, что $(W(x),\prec)$ удовлетворяет условиям леммы Цорна: пусть $C$ --- цепь в $(W(x),<);$ тогда, например, $\hr{\bigcup\limits_{(S,<_S)\in C} S,\:\bigcup\limits_{(S,<_S)\in C} <_S}\in W(x)$ является верхней гранью $C$ в $(W(x),\prec).$

Итак, в $(W(x),\prec)$ есть максимальный элемент $(M,<_M).$ Если мы докажем, что $M=X,$ то всё готово. От противного: пусть $M\subsetneq X;\:a\in X\wo M.$ Тогда $(M,<_M)<(M\cup\{a\},<_M\cup\{(m,a)\mid m\in M\})\in W(x).$ Противоречие с идеей о максимальности $(M,<_M)$ завершает доказательство.
\begin{theorem}[Кантора, о сравнении мощностей]
Для любых двух множеств $A$ и $B$ существует инъекция из $A$ в $B$ или инъекция из $B$ в $A,$ то есть мощность одного не превосходит мощности другого, и они сравнимы.
\end{theorem}
\begin{proof}
Вполне упорядочим оба множества и вспомним, что из двух вполне упорядоченных множеств одно является начальным отрезком другого.
\end{proof}
{\bfseries 3.\:Теорема Цермело $\Ra$ аксиома выбора.}

Фактически, эта часть уже доказана: если $(A,<_A),\:X\subseteq A,$ то положим $f(x)\eqdef\min_{<_A}X\in X,$ что будет искомой функцией выбора.
\end{proof}
\begin{imp} $(\RR,+)$ и $(\CC,+)$ изоморфны как группы.
\end{imp}
\begin{proof}
Установим изоморфизм по базисам Гамеля мощности континуум.
\end{proof}
\lectmark{23 октября 2014 г.}{30 октября 2014 г.}
\subsubsection{Мощности и алефы}
\epigraph{Q: What is the world's longest song?\\A: <<Aleph-nought Bottles of Beer on the Wall.>>}{Unknown}
\begin{df}
$A$ {\itshape равномощно} $B$ (обозначение: $A\sim B$), если $\exists f\colon A\ra B$ --- биекция.

$A$ {\itshape не превосходит} $B$ по мощности (обозначение: $A\lesssim B$), если $\exists f\colon A\ra B$ --- инъекция.
\end{df}
Считаем известным из анализа следующее утверждение.
\begin{theorem}[Кантора-Бернштейна]
Если $A\lesssim B$ и $B\lesssim A,$ то $A$ равномощно $B.$
\end{theorem}
В~условиях аксиомы выбора также устанавливается:
\begin{theorem}[О сравнимости]
\label{comp}
Для любых $A,\, B$ $A\lesssim B$ или $B\lesssim A.$
\end{theorem}
С~ней же устанавливается и~такая теорема:
\begin{theorem}
Всякое бесконечное множество содержит счётное подмножество.
\end{theorem}
Напомним определения:
\begin{df}
$A$ счётно, если $A\sim\omega.$ $A$ конечно, если $\exists n\in\omega\:A\sim n.$ $A$ бесконечно, если не является конечным.
\end{df}
\begin{proof}
В~чём тут суть аксиомы выбора? Пусть мы хотим выбрать из множества счётное число точек $a_1, a_2\etc$ Тогда мы хотим сопоставить $n\mapsto a_n,\:\omega\mapsto A,$ построив последовательность $a_n=F(\{a_1\sco a_n\}).$ Получаем функцию $F\colon P(A)\wo\{A\}\ra A.$ Но это почти что сама аксиома выбора: пусть $\varphi$ --- функция выбора на непустых подмножествах в $A;$ тогда положим $F(B)=\varphi(A\wo B).$ Можно вместо выбора по порядку и просто сослаться на полный порядок: если мы вполне упорядочили $A,$ то, по \sref{теореме}{comp}, $A\le\omega$ или $\omega\le A.$
\end{proof}
Продолжим выводить из AC следствия.
\begin{theorem}[О сюръекции]
\label{surj}
Если $\exists f\colon B\ra A$ --- сюръекция, то $A\lesssim B.$
\end{theorem}
\begin{proof}
Определим функцию $g:A\ra B$ через функцию выбора на множестве $\{f^{-1}(a)\mid a\in A\}.$ Она будет осуществлять инъекцию.
\end{proof}
\begin{theorem}[Объединение счётных множеств счётно]
$\bigcup\limits_{i\in\omega}A_i$ счётно, если все $A_i\sim\omega.$
\end{theorem}
\begin{proof}
$\forall i\:\exists a^{i}\colon\omega\ra A_i,$ осуществляющее сюръекцию. Из них мы получаем суммарное отображение $a\colon\omega\times\omega\ra\bigcup\limits_{i\in\omega}A_i.$ Без всякой AC, по лемме Кантора, устанавливается равномощность $\omega\times\omega$ и~$\omega.$ Осталось сослаться на \sref{теорему}{surj}.
\end{proof}
Дадим главное определение.
\begin{df}
Множество $\alpha$ --- \textit{кардинал,} если $\alpha\in\Ord,$ и~$\forall\beta<\alpha\:\beta\nsim\alpha.$
\end{df}
\begin{imp}
$\omega$ --- наименьший бесконечный кардинал.
\end{imp}
\begin{imp}
$\forall\alpha\in\Ord\:\exists\beta$ --- кардинал: $\alpha\sim\beta.$
\end{imp}
\begin{proof}
В совокупности всех ординалов, равномощных $\alpha,$ выберем минимальный элемент.
\end{proof}
\begin{imp}
Всякое множество $X$ равномощно единственному кардиналу.
\end{imp}
\begin{proof}
Вполне упорядочим $X$ и~рассмотрим $\sup\{\alpha\in\Ord\mid\alpha\text{ изоморфно начальному отрезку $X$}\}$ (равный его объединению --- по аксиоме подстановки, это множество). Тогда это ординал, изоморфный всему $X.$ По предыдущему следствию, есть и~изоморфный (единственный) кардинал.
\end{proof}
Введём иерархию алефов.
\begin{df}
\begin{gather}
\omega_0=\aleph_0\eqdef\omega.\\
\aleph_{\alpha+1}\eqdef\min\{x\mid x\text{ --- кардинал, и $\aleph_{\alpha}<x$}\}.\\
\aleph_{\lambda}\eqdef\sup\{\aleph_{\alpha}\mid\alpha<\lambda\},\text{ если $\lambda$ --- предельный.}
\end{gather}
\end{df}
\begin{stm}
$\forall\alpha\in\Ord\:\aleph_{\alpha}$ --- кардинал.
\end{stm}
\begin{proof}
В первых двух случаях всё очевидно. В третьем, если $\aleph_{\lambda}$ --- не кардинал, то существует $\beta<\aleph_{\lambda},$ равномощный $\aleph_{\lambda}\Lra\exists\alpha<\lambda:\:\beta<\aleph_{\alpha}.$ Тогда $\aleph_{\alpha}\sim\aleph_{\lambda} (\beta\subseteq\aleph_{\alpha}\subseteq\aleph_{\lambda},\text{ и применяем теорему Кантора-Бернштейна}),$ но тогда $\aleph_{\alpha}\sim \aleph_{\alpha+1}.$ Противоречие.
\end{proof}
\begin{df}
$\varkappa^{+}=\min\{\beta\mid\beta\text{ --- кардинал, и $\varkappa<\beta$}\}.$ $\varkappa$ --- предельный кардинал, если $\forall\beta<\varkappa\:\exists\mu$ --- кардинал такой, что $\beta<\mu<\varkappa.$
\end{df}
\begin{stm}
Для любого бесконечного кардинала $\varkappa$ существует и~единственен $\alpha\in\Ord:\:\varkappa=\aleph_{\alpha}.$ Таким образом, <<функция>> $\aleph$ не пропускает ни одного кардинала.
\end{stm}
\begin{proof}
От противного. Пусть $\varkappa$ --- наименьший кардинал, не являющийся алефом. Он не может быть $\omega,$ поэтому (рассмотрим множество всех кардиналов, строго меньших $\varkappa;$ там может либо достигается супремум, либо нет, в~каком случае он просто равен $\varkappa$) либо $\varkappa=\mu^{+},$ где $\mu<\varkappa,$ но тогда $\varkappa$ --- непосредственно следующий алеф, либо он предельный, все меньшие его --- уже алефы, и~он оказывается их супремумом, то есть $\aleph_{\lambda}$ для них.
\end{proof}
Теперь мы можем, наконец, спокойно вести определение.
\begin{df}
{\itshape Мощность} $A$ (обозначение: |A|) --- единственный кардинал, изоморфный $A.$
\end{df}
В предположении AC докажем важный факт.
\begin{theorem}[Обобщённая лемма Кантора]
Пусть $A$ бесконечно. Тогда $A\times A\sim A.$
\end{theorem}
\begin{proof}
Следуя Гёделю, введём {\itshape каноническое\footnote{Не лексикографическое!} вполне упорядочение} на $\Ord\times\Ord:$ скажем, что $(\alpha_1,\beta_1)<(\alpha_2,\beta_2),$ если выполняется одно из трёх:

\pt{1} $\max(\alpha_1,\beta_1)>\max(\alpha_2,\beta_2).$

\pt{2} $\max(\alpha_1,\beta_1)=\max(\alpha_2,\beta_2)$ и $\alpha_1<\alpha_2.$

\pt{3} $\max(\alpha_1,\beta_1)=\max(\alpha_2,\beta_2),$ $\alpha_1=\alpha_2$ и $\beta_1<\beta_2.$

Видим, что порядок линеен. Почему он полон? Чтобы найти минимальный элемент, нужно сперва отобрать те, где максимум минимален, затем минимизировать первый элемент и~из оставшихся --- второй, что даст глобальный минимум. Теперь запишем отображение $\pi\colon\Ord\times\Ord\ra\Ord$ (<<маршрут обхода произведения>>), действующее по схеме:
\begin{gather}
\pi(\alpha,\beta)=\text{ порядковый тип }\{(x,y)\mid(x,y)<(\alpha,\beta)\}.
\end{gather}
Видим, что $\pi(\alpha,\alpha)\ge\alpha;$ положим $\pi[\alpha\times\alpha]$ --- начальный сегмент (образ углового квадрата), определяемый $\pi(\alpha,\alpha).$
\lectmark{30 октября 2014 г.}{6 ноября 2014 г.}

Выпишем два полезных наблюдения о начальных сегментах.
\begin{stm}
\label{ordissegm}
Рассмотрим любой ординал $\alpha.$ Тогда $\alpha\times\alpha$ есть начальный сегмент в каноническом упорядочении, имеющий вид $\{(x,y)\mid(x,y)<(0,\alpha)\}.$
\end{stm}
\begin{proof}
Понятно при внимательном рассмотрении квадрата.
\end{proof}
\begin{stm}
$\pi[\alpha\times\alpha]\ge\alpha.$
\end{stm}
\begin{proof}
Обозначим $f(\alpha)\eqdef\pi[\alpha\times\alpha].$ Тогда $f$ сохраняет порядок: $\alpha<\beta\Ra f(\alpha)<f(\beta)$ (ибо $\alpha\times\alpha\subset\beta\times\beta$), откуда $f(\alpha)\ge\alpha$ по \sref{утверждению}{monot}.
\end{proof}
\begin{lemma}
$\pi[\aleph_{\alpha}\times\aleph_{\alpha}]=\{\pi(\alpha_1,\beta_1)\mid\alpha_1,\beta_1<\aleph_\alpha\}\footnote{Это множество --- начальный сегмент в $\Ord$ по \sref{утверждению}{ordissegm} выше, то есть само является ординалом.}=\aleph_{\alpha}$ для всех $\alpha.$
\end{lemma}
\begin{proof}
От противного. Положим $\varkappa$ --- наименьший бесконечный кардинал, при котором $\pi[\varkappa\times\varkappa]>\varkappa.$ Тогда существуют $\alpha,\beta<\varkappa:\:\pi(\alpha,\beta)=\varkappa.$ Возьмём $\delta\in\Ord:\:\alpha,\beta<\delta<\varkappa.$ В силу того, что, $\varkappa\in\pi[\delta\times\delta],$ а этот $\pi[\delta\times\delta]$ является ординалом, получаем $\varkappa\subseteq\pi[\delta\times\delta],$ что, казалось бы, должно означать, что $|\pi[\delta\times\delta]|=|\delta\times\delta|\ge|\varkappa|=\varkappa.$ Однако, с другой стороны, $|\delta\times\delta|=\hm{\hm{\delta}\times\hm{\delta}}=\footnote{$|\delta|\le\delta<\varkappa,$ и, по предположению индукции, $\pi[|\delta|\times|\delta|]=\delta.$}|\delta|<\varkappa.$ Противоречие.
\end{proof}
\end{proof}
\begin{imp}
Пусть $A,B$ --- бесконечны, $\varkappa_1,\varkappa_2$ --- бесконечные кардиналы. Тогда для кардинальных операций над кардиналами (не путать с одноимёнными ординальными, которые можно провести над теми же объектами с совершенно другими результатами!) $|A\times B|=|A|\times|B|,\,|A\sqcup B|=|A|+|B|, \varkappa_1+\varkappa_2=\varkappa_1\times\varkappa_2=\max(\varkappa_1,\varkappa_2).$

Для операций на кардиналах верным будет $\varkappa_1+\varkappa_2=\varkappa_1\times\varkappa_2=\max(\varkappa_1,\varkappa_2).$
\end{imp}
Введём степени кардиналов и операцию возведения двойки в степень:
\begin{df}
$\varkappa^\mu\eqdef|\{f\colon\mu\ra\varkappa\}|.$
\end{df}

{\itshape Континуум-гипотеза} CH: $2^{\aleph_0}=\aleph_1.$
\begin{gather}
\beth_\alpha\eqdef\case
{\beth_0=\aleph_0, &\\
\beth_{\alpha+1}=2^{\beth_\alpha}, &\\
\beth_\lambda=\sup\{\beth_\alpha\mid\alpha<\lambda\},\,\lambda\text{ --- предельный.}}
\end{gather}
Принято обозначать $2^{\aleph_0}=\mathfrak{c}$ --- <<континуум>>. Как оказалось, не зависит от ZFC ни обычная, ни \textit{обобщённая континуум-гипотеза:} $\beth_\alpha=\aleph_\alpha\:\forall\alpha.$

\newpage

\section{Исчисление высказываний}
\subsection{Аксиоматика Гильберта. Классическая логика}
\label{prop}
Будем считать понятия формулы и интерпретации логики высказываний (иначе --- \textit{пропозициональной логики}) хорошо известными из обязательного курса введения в математическую логику. Вместо этого мы сконцентрируемся в основном на выводимости и исчислениях, рассмотрев две наиболее часто применяемых системы логических аксиом и правил вывода и полностью описав классы выводимых в них формул.

Пусть $p_0,p_1\etc$ --- счётный набор пропозициональных символов, $\wedge,\vee,\ra,\neg$ --- логические связки. Следуя Гильберту, введём схемы аксиом:

\pt{1} $\varphi\ra(\psi\ra\varphi).$

\pt{2} $(\varphi\ra(\psi\ra\theta))\ra((\varphi\ra\psi)\ra(\varphi\ra\theta)).$

\pt{3} $\varphi\wedge\psi\ra\varphi,\:\varphi\wedge\psi\ra\psi.$

\pt{4} $\varphi\ra(\psi\ra(\varphi\wedge\psi)).$

\pt{5} $\varphi\ra\varphi\vee\psi,\:\psi\ra\varphi\vee\psi.$

\pt{6} $(\varphi\ra\theta)\ra((\psi\ra\theta)\ra((\varphi\vee\psi)\ra\theta)).$

\pt{7} $(\varphi\ra\psi)\ra((\varphi\ra\neg\psi)\ra\neg\varphi).$

\pt{8} $\varphi\ra(\neg\varphi\ra\psi)$ (ex falso sequitur quodibet)

\pt{9} $\neg\neg\varphi\ra\varphi.$ (снятие двойного отрицания)

Правило вывода единственно: modus ponens (MP).
\begin{prooftree}
\AxiomC{$\varphi,\,\varphi\ra\psi$}
\UnaryInfC{$\psi$}
\end{prooftree}

\begin{df}
{\itshape Вывод} --- это последовательность формул $\varphi_1\sco\varphi_n,$ в которой каждая $\varphi_i$ --- или аксиома, или получена из каких-либо $\varphi_k$ и $\varphi_l$ по MP. Обозначают $\vdash\varphi$ и говорят <<$\varphi$ выводимо>>, если существует вывод, оканчивающийся на формулу $\varphi.$

Понятным образом объясняется и понятие {\itshape вывода из гипотез $\Gamma$}: пусть $\Gamma$ --- множество формул (называемых {\itshape гипотезами}); тогда в выводе из гипотез всякая формула либо аксиома, либо принадлежит $\Gamma,$ либо получена модус поненсом из двух ранее выписанных. Обозначение: $\Gamma\vdash\varphi.$
\end{df}
Приведём конкретный пример вывода, который нам скоро пригодится.
\begin{stm}
$\vdash\varphi\ra\varphi$ для любой $\varphi.$
\end{stm}
\begin{proof}
Про аксиомы, начиная с третьей, забудем: говорим только об импликации. В аксиому 2 подставим $\varphi=\varphi,\,\theta=\varphi,\,\psi=(\varphi\ra\varphi):$

\pt{1} $\varphi\ra(\varphi\ra\varphi)$ (1)

\pt{2} $\varphi\ra((\varphi\ra\varphi)\ra\varphi)$ (1)

\pt{3} $(\varphi\ra((\varphi\ra\varphi)\ra\varphi))\ra((\varphi\ra(\varphi\ra\varphi))\ra(\varphi\ra\varphi))$ (2)

\pt{4} $(\varphi\ra(\varphi\ra\varphi))\ra(\varphi\ra\varphi)$ (MP из 2, 3)

\pt{5} $\varphi\ra\varphi$ (MP из 1, 4).
\end{proof}
Теперь приведём пример вывода из гипотез.
\begin{ex}
$p\wedge q\vdash q\wedge p.$
\end{ex}
\begin{proof}

\pt{1} $p\wedge q$

\pt{2} $p\wedge q\ra p,p\wedge q\ra q$

\pt{3} $p,q$

\pt{4} $q\ra(p\ra(q\wedge p))$

\pt{5} $q\wedge p$ по MP.
\end{proof}

 Логика без аксиомы 9 носит название {\itshape интуиционистской}. Почти все доказанные нами факты, кроме особо оговорённых, действительны не только в классической логике высказываний, но и в ней. При удалении аксиом 8 и 9 одновременно получается {\itshape минимальная логика,} на изучении которой мы останавливаться не будем.

Не требует доказательства ряд важных свойств выводимости из гипотез\footnote{Впрочем, существуют исчисления, в которых понятие вывода определяется иначе, и эти свойства перестают выполняться, что может оказаться полезным в приложениях. Так, немонотонным логикам посвящён целый раздел логики высказываний.}.

\begin{lemma}
\pt{1} $\Gamma\vdash\varphi$ и $\Gamma\subseteq\Delta\Ra\Delta\vdash\varphi$ (монотонность)

\pt{2} $\Gamma\vdash\varphi$ и $\forall\psi\in\Gamma\:\Delta\vdash\psi\Ra\Delta\vdash\varphi$ (транзитивность)

\pt{3} $\Gamma\vdash\varphi\Ra$ существует конечное $\Delta\subseteq\Gamma:\:\Delta\vdash\varphi$ (компактность)
\end{lemma}

И в классической, и в интуиционистской логике верна
\begin{theorem}[О дедукции]
\label{holmes}
$\Gamma,\varphi\vdash\psi\Lra\Gamma\vdash\varphi\ra\psi.$
\end{theorem}
\begin{proof}

\lproof Очевидно.

\rproof Индукция по длине вывода $\Gamma,\varphi\vdash\psi.$ Возможны четыре случая.

\pt{1} $\psi$ есть аксиома. Тогда достроим вывод так: $\psi\ra(\varphi\ra\psi),\:\varphi\ra\psi.$

\pt{2} $\psi\in\Gamma.$ То же самое: допишем $\psi,\:\psi\ra(\varphi\ra\psi),\:\varphi\ra\psi.$

\pt{3} $\psi=\varphi.$ Тогда нужно написать вывод для $\varphi\ra\varphi,$ что мы научились делать.

\pt{4} $\psi$ получена правилом MP из $\theta$ и $\theta\ra\psi.$ По предположению индукции, есть выводы: $\Gamma\vdash\varphi\ra\theta,\:\Gamma\vdash\varphi\ra(\theta\ra\psi).$ Допишем их к нашему текущему выводу, затем дополним $(\varphi\ra(\theta\ra\psi))\ra((\varphi\ra\theta)\ra(\varphi\ra\psi)),\:(\varphi\ra\theta)\ra(\varphi\ra\psi),\:\varphi\ra\psi.$

\end{proof}
\begin{ex}
Закон контрапозиции: $\varphi\ra\psi\vdash\neg\psi\ra\neg\varphi.$
\end{ex}
\begin{proof}
По теореме о дедукции, достаточно показать $\neg\psi,\varphi\ra\psi\vdash\neg\varphi.$ Проведём следующий вывод:

$(\varphi\ra\psi)\ra((\varphi\ra\neg\psi)\ra\neg\varphi).$ (7)

$\psi$ (гипотеза)

$\neg\psi\ra(\varphi\ra\neg\psi)$ (1)

$\varphi\ra\neg\psi$ (по MP)

$\neg\phi$ (по MP)
\end{proof}
\begin{ex}
Силлогизм: $\varphi\ra\psi,\psi\ra\theta\vdash\varphi\ra\theta.$
\end{ex}
\begin{proof}
$\varphi,\varphi\ra\psi,\psi\ra\theta\vdash\theta.$ Два раза модус поненс.
\end{proof}
\begin{ex}
Аксиома 8 следует из 9: $\varphi,\neg\varphi\vdash\psi.$
\end{ex}
\begin{proof}
Докажем, что $\varphi,\neg\varphi\vdash\neg\neg\psi.$ По теореме о дедукции, достаточно сделать $\neg\psi\ra\varphi,\neg\psi\ra\neg\varphi\vdash\neg\neg\varphi$ --- по аксиомам 1 и 7.
\end{proof}
\lectmark{6 ноября 2014 г.}{13 ноября 2014 г.}
\begin{ex}
$\vdash A\ra\neg\neg A.$
\end{ex}
\begin{proof}
$(\neg A\ra A)\ra((\neg A\ra\neg A)\ra\neg\neg A)$ (аксиома 7)

$A\ra(\neg A\ra A)$ (1)

$A$ (гипотеза)

$\neg A\ra A$ (MP 2,3)

$(\neg A\ra\neg A)\ra\neg\neg A$ (MP)

$\neg A\ra\neg A$ (умеем)

$\neg\neg A$ (MP 5,6)
\end{proof}
\begin{ex}
Обращение закона контрапозиции (только классическая логика!): $\neg B\ra\neg A\vdash A\ra B.$
\end{ex}
\begin{proof}
$\neg B\ra\neg A$

$\neg\neg A\ra\neg\neg B$

$\neg\neg B\ra B$

$\neg\neg A\ra B$

$A\ra \neg\neg A$

$A\ra B.$
\end{proof}
\begin{ex}
$A\wedge B\ra C\vdash A\ra(B\ra C),$

$A\ra(B\ra C)\vdash A\wedge B\ra C.$
\end{ex}
\begin{proof}

\pt{1} $A\wedge B\ra C$ (гипотеза)

$A$ (гипотеза)

$B$ (гипотеза)

$A\ra(B\ra A\wedge B)$ (4)

$A\wedge B$ (MP дважды)

$C$ (MP 1,5)

\pt{2} $A\ra(B\ra C)$ (гипотеза)

$A\wedge B$ (гипотеза)

$A\wedge B\ra A$ (3)

$A\wedge B\ra B$ (3)

$A$ (MP 2,3)

$B$ (MP 2,4)

$C$ (MP 1,5,6 дважды)
\end{proof}
Главным утверждением этой части курса служит:
\begin{theorem}[О корректности и полноте]
$\vdash A\Lra A$ --- тавтология.
\end{theorem}
\begin{proof}
\rproof Индукция по построению вывода. Все аксиомы являются тавтологиями (проверка таблиц истинности всех аксиом). Если применяется модус поненс, то по предположению индукции $A$ и $A\ra B$ истинны на всех наборах переменных. Тогда $B$ истинно по определению импликации.

\lproof Докажем, что всякая тавтология выводима. Приведём вариант рассуждения, который впоследствии будет удобно обобщить на интуиционистское исчисление высказываний и исчисление предикатов. Утверждение теоремы будет следовать из ряда лемм.
\begin{df}
Пусть $\Gamma$ --- множество формул; будем говорить, что $\Gamma$ непротиворечиво, если $\forall A_1\sco A_n\in\Gamma\:\nvdash\neg(A_1\wedge A_2\wedge ...\wedge A_n).$ $\Gamma$ максимально непротиворечиво, если $\forall A\in\Fm\:(A\in\Gamma\vee\neg A\in\Gamma).$
\end{df}
\begin{lemma}[0]
Пусть $\Gamma$ непротиворечиво, $A\in\Fm.$ Тогда одно из множеств $\Gamma\cup\{A\}$ или $\Gamma\cup\{\neg A\}$ непротиворечиво.
\end{lemma}
\begin{proof}
От противного: пусть $\Gamma$ непротиворечиво, но оба множества $\Gamma\cup\{A\}$ и $\Gamma\cup\{\neg A\}$ оказываются противоречивыми. Это означает, что существуют такие $A_1\sco A_j\in\Gamma,$ что $\vdash\neg(A\wedge\bigwedge\limits_{i=1}^n A_i)$ и $\vdash\neg(\neg A\wedge\bigwedge\limits_{j=1}^n A_j).$ Аккуратно применяя правило контрапозиции для того конечного поднабора формул в $\Gamma,$ что участвует в обоих этих выводах, устанавливаем, что тогда на самом деле выводятся и $\vdash\neg(A\wedge\bigwedge\limits_{i=1}^n A_i\wedge\bigwedge\limits_{j=1}^n A'_j)$ и $\vdash\neg(\neg A\wedge\bigwedge\limits_{i=1}^n A_i\wedge\bigwedge\limits_{j=1}^n A'_j).$ Далее обозначим $\bigwedge\limits_{i=1}^n A_i\wedge\bigwedge\limits_{j=1}^n A'_j$ за $B.$ Таким образом, имеем $\vdash\neg(A\wedge B)$ и $\vdash\neg(\neg A\wedge B),$ что по аксиоме 8 влечёт $\neg(A\wedge B)\ra(A\wedge B\ra C)$ ($C$ любое). Далее:

$\neg(A\wedge B)$

$A\wedge B\ra C$

$B\ra(A\ra C)$

Но $C$ -- любое, поэтому аналогичные утверждения можно повторить и для $\neg C,$ выведя, тем самым, и$B\ra(A\ra\neg C).$ Аксиома 7 далее приводит нас к $B\ra\neg A.$ Однако $\neg A$ позволяет провести точно такой де вывод и прийти к $B\ra A,$ что, опять же по аксиоме 7, позволяет вывести $\neg B.$ Согласно определению непротиворечивости, это означает, что множество $\Gamma$ было противоречивым изначально. Утверждение доказано.
\end{proof}
\begin{lemma}[1]
Если $\Gamma$ непротиворечиво, то существует максимально непротиворечивое $\Gamma'\supseteq\Gamma.$
\end{lemma}
\begin{proof}
Если множество переменных счётно, то и формул счётное число; будем добавлять всякую формулу либо отрицание по порядку. Счётное объединение в пределе тоже непротиворечиво, ибо непротиворечивость устанавливается конечным числом формул (по определению) и поэтому должна проявиться на конечном шаге. Пусть оно несчётно. Рассмотрим класс всех непротиворечивых множеств, упорядоченный по включению. По только что сказанному, всякая цепь имеет верхнюю грань. Тогда существует максимальный элемент, в котором в силу леммы 0 лежит всякая либо формула, либо отрицание. Значит, он максимально непротиворечив.
\end{proof}
\begin{lemma}[2]
Пусть $\Gamma$ максимально непротиворечиво. Тогда

\pt{0} $\Gamma\vdash A\Lra A\in\Gamma.$

\pt{1} $\Gamma\ni A\wedge B\Lra\Gamma\ni A$ и $\Gamma\ni B.$

\pt{2} $\Gamma\ni A\vee B\Lra\Gamma\ni A$ или $\Gamma\ni B.$

\pt{3} $\Gamma\ni \neg A\Lra\Gamma\not\ni A.$

\pt{4} $\Gamma\ni A\ra B\Lra\Gamma\not\ni A$ или $\Gamma\ni B.$

\end{lemma}
\begin{proof}

\pt{0} Пусть $\Gamma\vdash A,$ но $A\notin\Gamma.$ Тогда должно быть $\Gamma\ni\neg A.$ В частности, существует вывод $\neg A$ из $\Gamma;$ пусть $A_1\sco A_n\in\Gamma$ --- гипотезы, участвующие в этом выводе. Тогда $\vdash\neg(\neg A\wedge A_1\wedge...\wedge A_n)$ (ибо без отрицания она выводит $\neg A$ и $A$ одновременно --- аксиома 7!). Но $\Gamma$ непротиворечиво. Противоречие.

Все последующие номера --- упражнение с заменой выводимости на принадлежность, состоящее в честном переборе всех возможных по таблицам случаев и ссылкой на предположение индукции.

\end{proof}
Пусть $A$ --- невыводимая тавтология. Тогда $\Gamma_0=\{\neg A\}$ непротиворечиво. Расширим его до максимально непротиворечивого $\Gamma.$ Зададим оценку такую, что $v(p)=1\Lra p\in\Gamma,$ и 0 иначе.
\begin{lemma}[Основная]
$\forall F\in\Fm v(F)=1\Lra F\in\Gamma.$
\end{lemma}

Проверив этот факт индукцией по построению формулы, расширяем непротиворечивое множество формул до максимально непротиворечивого. Тогда, по основной лемме, существует оценка, обращающая все формулы расширенного (а, значит, и исходного $\Gamma$) множества в истину. Теорема о полноте доказана.
\end{proof}
\subsection{Интуиционистская логика высказываний}
В обычной логике адекватное понятие истинности --- <<быть тавтологией>>. Но в интуиционистской логике, хотя выводятся по-прежнему лишь тавтологии, совокупность всех выводимых формул \'{у}же, нежели в классической\footnote{Традиционный пример --- формула $p\vee\neg p.$}. Возникает вопрос: как можно описать класс всех выводимых в $\INT$ формул? Ответом служит строящаяся ниже \textit{семантика Крипке.}
\begin{df}
$K=(W,R,v),$ где пара $(W,R)$ называется {\itshape шкалой,} $W$ --- множество всех возможных миров, $R\subseteq W^2$ --- рефлексивно и транзитивно, оценка $v(p)\subseteq W$ удовлетворяет свойству наследования истинности в видимых мирах: если $x\in v(p)$ и $xRy,$ то и $y\in v(p).$

Пусть $x\in W,\:F\in\Fm.$ Определим истинность в конкретном мире так:
$K,x\models p\ardef$

\pt{1} $K,x\models p\Lra x\in v(p).$

\pt{2} $\vee,\wedge$ --- по таблицам истинности.

\pt{3} $K,x\models\neg F\Lra\forall y(xRy\Ra\not\models F).$

\pt{4} $K,x\models (F\ra G)\Lra\forall y(xRy\Ra y\not\models F\vee y\models G).$
\end{df}
\begin{stm}
$\models$ монотонно, то есть $\forall x,y\in W\:\forall F\in\Fm,$ если $x\models F$ и $xRy,$ то $y\models F.$
\end{stm}
\begin{proof}
Индукция по построению формулы.
\end{proof}
\lectmark{13 ноября 2014 г.}{20 ноября 2014 г.}
\begin{df}
$K\models A,$ если $A$ истинно во всех мирах всех шкал Крипке.
\end{df}
\begin{stm}
$\neg A\vee B\ra(A\ra B)$ (можно проверить). Напротив, $(A\ra B)\ra(\neg A\vee B)$ не является тавтологией семантики Крипке: Пусть $x\ra y$ --- два мира, и в $y$ выполняются $A$ и $B.$ Тогда $v(A)=v(b)=y,$ но $x\models A\ra B,\:x\not\models B,\:x\not\models\:\Longrightarrow\:x\not\models\neg A\vee B.$
\end{stm}
\begin{theorem}[О корректности и полноте в семантике Крипке]

\pt{1} Если $\INT\vdash A,$ то $K\models A.$

\pt{2} Если $\INT\nvdash A,$ то существует конечная $K,\:x\in W,$ что $K,x\not\models A.$
\end{theorem}
\begin{proof}

\pt{1} Индукция по выводу. Истинность аксиом проверяется непосредственно\footnote{Однако не все тавтологии верны во всех мирах: пусть дана формула $((p\ra q)\ra p)\ra p,$ и пара миров $x\ra y,$ где $p$ истинно только в $y.$ Тогда $y\not\models p\ra q,\:x\models p\ra q,\:x\models(p\ra q)\ra p.$}. Шаг индукции --- это применение правила вывода. Истинность $B$ при условиях $A,\,A\ra B$ следует из определения импликации в шкале.

\pt{2} Не имея закона исключённого третьего, мы не можем говорить, что либо формула, либо её отрицание содержится в максимальной непротиворечивой паре. Поэтому будем рассматривать пары: множество истинных и множество ложных формул.  Как сузим до конечных?

Пусть $Sub(A)$ --- множество подформул $A.$
\begin{df}
Пара $(\Gamma,\Delta)$ \textit{непротиворечива,} если $\INT\nvdash(\wedge\Gamma)\ra(\vee\Delta).$ Пара \textit{максимально непротиворечива,} если дополнительно к этому $\Gamma\cup\Delta=Sub(A).$
\end{df}
\begin{lemma}[1]
Если $(\Gamma,\Delta)$ --- непротиворечива, то существует максимально непротиворечивая $(\Gamma',\Delta')$ такая, что $\Gamma\subseteq\Gamma',\:\Delta\subseteq\Delta'.$
\end{lemma}
\begin{proof}
Пусть $B_1\sco B_n$ --- все подформулы $A,$ $(\Gamma,\Delta)$ непротиворечиво, тогда $(\Gamma\cup\{B_i\},\Delta)$ или $(\Gamma,\Delta\cup\{B_i\})$ --- непротиворечиво. В самом деле: пусть оба они противоречивы. Тогда $\INT\vdash(\bigwedge\Gamma)\wedge B_i\ra(\bigvee\Delta)$ и $\INT\vdash(\bigwedge\Gamma)\ra(\bigvee\Delta)\vee B_i.$ (Обозначим для краткости $\bigwedge\Gamma=G; \bigvee\Delta=D.$) Итак, строим вывод:

\pt{1} $G\wedge B_i\ra D$

\pt{2} $G\ra B_i\vee D$

\pt{3} $G$ (гипотеза)

\pt{4} $B_i\vee D$ (MP 2,3)

\pt{5} $G\ra(B_i\ra D)$ (аксиома 1)

\pt{6} $B_i\ra D$ (MP 3,5)

\pt{7} $D\ra D$ (уже умеем)

\pt{8} $(B_i\ra D)\ra((D\ra D)\ra(B_i\vee D\ra D))$ (аксиома)

\pt{9} $D$ (MP трижды)

\end{proof}
\begin{lemma}[2]
Пусть $(\Gamma,\Delta)$ --- максимально непротиворечивое. Тогда:

\pt{1} если $A\wedge B\in\Gamma,$ то $A,B\in\Gamma; $ если $A\wedge B\in\Delta,$ то $A\in\Delta$ или $B\in\Delta;$

\pt{2} если $A\vee B\in\Gamma,$ то $A\in\Gamma$ или $B\in\Gamma;$ если $A\vee B\in\Delta,$ то $A,B\in\Delta;$

\pt{3} если $A\ra B\in\Gamma,$ то $B\in\Gamma$ или $A\in\Delta;$

\pt{4} если $\neg A\in\Gamma,$ то $A\in\Delta.$

\end{lemma}
\begin{proof}

\pt{1} От противного: пусть $B\wedge C\in\Gamma,$ но $B\notin\Gamma.$ Тогда $B\in\Delta.$ Тогда $(B\wedge C\in)\wedge\Gamma\ra B\wedge C\ra B\ra\vee\Delta(\ni B),$ и $(\Gamma,\Delta)$ --- противоречивое.

Пусть $B\wedge C\in\Delta,$ но $B,C\notin\Delta;$ следовательно, $B,C\in\Gamma.$ Тогда $(B,C\in)\wedge\Gamma\ra B\wedge C\ra\vee\Delta(\ni B\wedge C).$ Аналогично.

\pt{2} Тем же способом.

\pt{3} Пусть $B\ra C\in\Gamma,C\notin\Gamma$ и $B\notin\Delta\Ra C\in\Delta,B\in\Gamma.$ Тогда $\wedge\Gamma\ra\vee\Delta.$
\end{proof}
Теперь мы готовы определить опровергающую модель. Пусть $K=(W,R,v),$ где:

$W$ --- множество всех максимально непротиворечивых пар;

$(\Gamma,\Delta)R(\Gamma',\Delta'),$ если $\Gamma\in\Gamma';$

$v(p)=\{(\Gamma,\Delta)\mid p\in\Gamma\}.$
\begin{lemma}[3]
$W$ непусто и конечно, $R$ рефлексивно и транзитивно, $v$ --- монотонно относительно $R.$
\end{lemma}
\begin{proof}
$W$ непусто (кладём невыводимую $A$ в $\Delta$ и расширяем) и конечно ($\Gamma$ и $\Delta$ --- подмножества конечных множеств). Рефлексивность и транзитивность очевидны. Монотонность прямо следует из согласованности определений $R$ и $v.$
\end{proof}
\begin{lemma}[4, основная семантическая лемма]
Пусть $(\Gamma,\Delta)\in W, B\in Sub(a).$ Тогда

$B\in\Gamma\Ra(\Gamma,\Delta)\models B;$

$B\in\Delta\Ra(\Gamma,\Delta)\not\models B.$
\end{lemma}
\begin{proof}
Индукция по построению формулы $B.$ База обеспечивается определением оценки $v.$ Конъюнкция: $B_1\wedge B_2\in\Gamma\stackrel{\text{л. 2}}{\Longrightarrow}B_1,B_2\in\Gamma.$ По индукции, $(\Gamma,\Delta)\models B_1,B_2\Ra(\Gamma,\Delta)\models B_1\wedge B_2.$ Наоборот, $B_1\wedge B_2\in\Delta\stackrel{\text{л. 2}}{\Longrightarrow}B_1\in\Delta$ или $B_2\in\Delta.$ По индукции, $(\Gamma,\Delta)\not\models B_1$ или $(\Gamma,\Delta)\not\models B_2\Ra(\Gamma,\Delta)\models B_1\wedge B_2.$ Дизъюнкция разбирается симметрично.

Импликация: пусть $B_1\ra B_2\in\Gamma.$ Тогда $(\Gamma,\Delta)R(\Gamma',\Delta'),$ по определению $R,$ означает, что $\Gamma\in\Gamma'\Ra B_1\ra B_2\in\Gamma'\stackrel{\text{л. 2}}{\Longrightarrow}B_1\in\Delta'$ или $B_2\in\Gamma',$ откуда по индукции получаем $(\Gamma',\Delta')\not\models B_1$ или $(\Gamma',\Delta')\models B_2.$ Следовательно, $(\Gamma,\Delta)\models B_1\ra B_2.$ В случае $B_1\ra B_2\in\Delta.$ Рассмотрим $(\Gamma\cup\{B_1\},\{B_2\}).$

Эта пара непротиворечива: в самом деле, если бы формула $\Gamma\wedge B_1\ra B_2$ была выводимой, то, по теореме о дедукции, выводилось бы и $\Gamma\ra(B_1\ra B_2).$ Но, поскольку $(B_1\ra\B_2)\in\Delta,$ это означало бы, что и исходная пара $(\Gamma,\Delta)$ уже была противоречивой! Итак, по лемме 1 расширяем $(\Gamma\cup\{B_1\},\{B_2\})$ до максимально непротиворечивой пары $(\Gamma',\Delta').$ Очевидно, что в силу $\Gamma\subseteq(\Gamma\cup\{B_1\})\subseteq\Gamma'$ выполнено соотношение $(\Gamma,\Delta)R(\Gamma',\Delta');$ кроме того, $(\Gamma',\Delta')\models B_1;\:(\Gamma',\Delta')\not\models B_2$ (предположение индукции). Итак, $(\Gamma,\Delta)\not\models B_1\ra B_2.$
\end{proof}

Пусть теперь $\INT\nvdash A.$ Тогда $(\es,\{A\})$ --- непротиворечиво. Расширим до максимально непротиворечивого $(\Gamma,\Delta)\in W,$ где $A\in\Delta.$ Тогда $(\Gamma,\Delta)\not\models A$ (так как $A\in\Delta !$). Теорема доказана.
\end{proof}

На самом деле, верно и более сильное утверждение.
\begin{theorem}
Можно считать опровергающую модель деревом.
\end{theorem}
\begin{proof}
Сузим рассмотрение до $W'\eqdef\{x\mid aRx\}$ ($a$ --- точка, где опровергается $A;$ $R$ здесь остаётся рефлексивным и транзитивным). $K'=(W',R,v),$ и, по-прежнему, $K,a\not\models A.$ Перейдём теперь к новой структуре, вершинами которой объявляются все маршруты, по которым можно дойти из опровергающей вершины до текущей в соответствии с отношением $R.$ Таким образом, каждая прежняя вершина расщепляется на несколько по числу незацикливающихся путей, ведущих в неё; оценка остаётся неизменной. В силу конечности модели данное построение приводит к опровергающему конечному дереву, и даже, более того, опровержение $A$ можно считать происходящим непосредственно в его корне.
\end{proof}
\begin{imp}
Свойство дизъюнктивности:
$\INT\vdash A\vee B\Ra\INT\vdash A$ или $\INT\vdash B.$
\end{imp}
\begin{proof}
Пусть $\INT\nvdash A$ и $\INT\nvdash B.$ Построим деревья $K_1$ и $K_2$, в нижних точках $a_1$ и $a_2$ которых опровергаются $A$ и $B.$ Добавим новый корень $a_0,$ направленный к $a_1$ и $a_2,$ в котором объявим ложным всё. Тогда истинности в поддеревьях не нарушаются, но $a_0\not\models A\vee B.$
\end{proof}
\lectmark{20 ноября 2014 г.}{27 ноября 2014 г.}

Продолжим выводить следствия об особенностях интуиционистской логики.
\begin{imp}
Интуиционистская логика разрешима (то есть разрешимо множество всех теорем интуиционизма).
\end{imp}
\begin{proof}
Все теоремы интуиционизма можно перечислить: строим всевозможные выводы (счётное число) и выписываем конечные формулы в них. Так перечисляются все теоремы. Обратно, дополнение всех формул до $\Int$ перечислимо: пусть формула не является теоремой; тогда существует конечная модель Крипке, опровергающая её. Перечисляем все модели и пробуем проверить в них истинность нашей формулы; как только нашли опровергающую, выдадим 0 и остановим процесс. Так построена полухарактеристическая функция для $\Fm\setminus\Int$, равная 1 на нём и не определённая на ней. По теореме Поста (запустим оба алгоритма одновременно, выдавая 1, если нашли её в алгоритме 1 и 0, если завершился алгоритм 2!) мы рано или поздно получим ответ о том, является ли формула теоремой $\Int.$
\end{proof}

\begin{theorem}[Гливенко]
$\CL\vdash\varphi\Longleftrightarrow\INT\vdash(\neg\neg\varphi).$
\end{theorem}
\begin{proof}
\lproof Очевидно: выведем формулу аксиомами $\INT,$ все они у нас есть; в конце снимем двойное отрицание.

\rproof От противного: пусть $\INT\nvdash\neg\neg\varphi.$ Построим опровергающее дерево для $\neg\neg\varphi.$ Поскольку в корне $\not\models\neg(\neg\varphi),$ то есть вершина $x,$ в которой $x\models\neg\varphi.$ Отсюда во всех $xRy\Ra y\not\models\varphi:$ на любом листе поддерева $y\not\models\varphi.$ Пусть $xRy,$ где $y$ --- лист в дереве. Но в листах дерева и отрицание, и импликация устроены по классическому образцу, то есть в них моделируется классическая логика! Итак, $y\nvDash\varphi$ уже в <<классике>>; значит, она не является тавтологией, и $\CL\nvdash\varphi.$
\end{proof}
\begin{theorem}[Гёдель]
Интуиционистская логика не конечнозначна: это значит, что нельзя предложить $n$ значений истинности с выделенной единицей и интерпретировать дизъюнкцию, конъюнкцию, импликацию и отрицание обычными функциями двумя (одной) дискретных переменных, чтобы воспроизвести интуиционистскую логику как множество формул, принимающих тождественно единицу. (Так, $\CL$ двузначна.)
\end{theorem}
\begin{proof}
От противного: пусть логика $\INT$ $n$-значна $(n\ge 2).$ Рассмотрим формулу $I_n\eqdef\bigvee\limits_{0\le i<j\le n}(p_i\lra p_j).$ Очевидно, что она не выводима в интуиционистской логике: построим дерево из корня и $n+1$ листов $a_1\sco a_n,$ в каждом из которых положим истинным ровно одно из $p_i$ со своим номером, а в корне ложны все. Тогда в корне ложна всякая из представленных эквивалентностей, а значит, и дизъюнкция в целом. Однако в любой $n$-значной логике функция, соответствующая такой формуле, содержала бы  не более $n$ различных значений на $(n+1)$ переменную, по принципу Дирихле одна из эквивалентностей обращалась бы в единицу и обращала бы в единицу и всю формулу $I_n.$ Противоречие.
\end{proof}
%Назовём правилом вывода любую фигуру вида: $(\varphi_i,\varphi\in\Fm)$
%
%\begin{prooftree}
%\AxiomC{$\varphi_0\sco\varphi_n$}
%\UnaryInfC{$\varphi.$}
%\end{prooftree}
%
%Скажем, что правило допустимо, если для любых $i$ и $\sigma$ $L\vdash\varphi_{i\sigma}$ следует $L\vdash\varphi_\sigma.$ Правило выводимо, если
%
%\begin{prooftree}
%\AxiomC{$\varphi_0\sco\varphi_n\vdash\varphi$}
%\UnaryInfC{$\varphi_{0\sigma}\sco\varphi_{n\sigma}\vdash\varphi_\sigma.$}
%\end{prooftree}
%
%Выводимые правила допустимы; в классической логике верно и обратное, а в интуиционизме --- нет! Правило Скотта:
%
%\begin{prooftree}
%\AxiomC{$(\neg\neg p\ra p)\ra p\vee\neg p$}
%\UnaryInfC{$\neg p\vee\neg\neg p$}
%\end{prooftree}
%
%Оно допустимо, но не выводимо. В самом деле, по теореме о дедукции для второго достаточно доказать, что $\INT\nvdash((\neg\neg p\ra p)\ra p\vee\neg p)\ra\neg p\vee\neg\neg p.$ Построим модель 1->2, 1->3, 2->4, где в 4 истинно $p.$ Тогда в $a$ ложны и $\neg p,$ (по 4) и $\neg\neg p$ (по 3, где $\neg p$). Тогда в~1 истинна посылка: в 4 $p\vee\neg p,$ потому что $p,$ а в 3 --- потому что $\neg p;$ в 2 $\not\models\neg\neg p\ra p:$ во всех точках есть посылка либо нет заключения, и~вся формула в~1 ложна. Для допустимости заметим, что единственная разрешённая подстановка $\sigma$ --- это заменить $p$ на какую-то формулу $\varphi.$ Допустим, что $\INT\nvdash\neg\varphi\vee\neg\neg\varphi.$ Построим модель, в корне которой она ложна. Тогда $\INT\nvdash\neg\varphi$ и $\INT\nvdash\neg\neg\varphi.$ Используя теорему Гливенко и снятие {\itshape тройного} отрицания в интуиционизме, получаем $\CL\nvdash\neg\varphi$ и $\CL\nvdash\varphi.$ Построим два дерева, в корнях которых $\not\models\neg\varphi$ и $\not\models\varphi$ соответственно, добавим к ним новый корень, в нём будет $\not\models\neg\neg\varphi,$ верхняя формула верна, а нижняя --- нет.

\lectmark{27 ноября 2014 г.}{4 декабря 2014 г.}

\newpage

\section{Исчисление предикатов. Теория моделей}

\subsection{Структура и основные теоремы логики предикатов}

Язык $\mathrm{L}_\Sigma$ исчисления предикатов состоит из:

{\itshape Сигнатуры} $\Sigma=\mathrm{Func}_\Sigma\cup\mathrm{Pred}_\Sigma$ --- множества имён предикатов и функций с указанием их валентности;

Стандартных символов: переменные $v_0,v_1,...;$

логические связки и кванторы $\vee,\wedge,\ra,\neg,\forall,\exists;$

вспомогательные символы: ( ) ,

\begin{df}
{\itshape Термы} $(\mathrm{Term}_\Sigma)$ --- это множество, построенное по следующим правилам:

\pt{1} $v_i$ и константа --- терм;

\pt{2} Если $f\in\mathrm{Func}_\Sigma$ --- функциональный символ валентности $n$ (часто будем писать $f^n$ или $val(f)=n$), $t_1\sco t_n$ --- термы, то и выражение $f(t_1\sco t_n)$ --- терм.

\end{df}
\begin{df}
{\itshape Формулы} $(\mathrm{Fm}_\Sigma)$ определяются по следующим индуктивным правилам:

\pt{1} Если $P\in\mathrm{Pred}_\Sigma,\:val(P)=n,\:t_1\sco t_n\in\mathrm{Term}_\Sigma,$ то $P(t_1\sco t_n)$ --- (атомарная) формула;

\pt{2} Если $A,B$ --- формулы, то $(A\wedge B),(\neg A),(A\vee B),(A\ra B)$ --- формулы;

\pt{3} Если $A$ --- формула, то $(\forall x A), (\exists x A)$ --- формулы.

\end{df}
\begin{df}
{\itshape Модель} сигнатуры $\Sigma$ --- это некоторое множество $M$ и отображение, сопоставляющее ($n$-местному) предикатному каждому символу $P\in\mathrm{Pred}_\Sigma$ ($n$-местный) предикат $P_M$ на $M$ (то есть отображение $P\colon M^n\ra\{0,1\}$), а функциональному символу $f\in\mathrm{Func}_\Sigma$ --- функцию $f_M,$ то есть отображение $f\colon M^n\ra M.$\end{df}

Для любой модели естественным образом определяются {\itshape значения} замкнутых формул и термов. А именно:

\begin{df}
Расширим модель $(M,\Sigma),$ до так называемого {\itshape языка диаграммы,} обогатив язык константами: $(M;\Sigma,\{a':a\in M\}),$ где $a'$ --- константа. Пусть $t$ --- замкнутый терм (то есть не содержащий переменных) языка диаграммы $M$; $t_M$ --- значение терма $t$ --- определим индуктивно.

\pt{1} $c$ --- константа из $\Sigma\Ra c_M$ --- соответствующий элемент в $M;$

\pt{2} $c=a'\Ra c_M=a;$

\pt{3} $t=f(t_1\sco t_n)\Ra t_M=f_M((t_1)_M\sco(t_n)_M).$

\end{df}

\begin{df}
Пусть $\Ms=(M,\Sigma);$ будем говорить, что замкнутая формула $A$ истинна в $\Ms$ $(\Ms\models A),$ если:

\pt{1} пусть $A=P(t_1\sco t_n);$ тогда $\Ms\models A\Lra P_M((t_1)_M\sco(t_n)_M)=1;$

\pt{2} $\Ms\models(A\wedge B)\Lra\Ms\models A$ и $\Ms\models B,$

$\Ms\models(A\vee B)\Lra\Ms\models A$ или $\Ms\models B,$

$\Ms\models(A\ra B)\Lra\Ms\not\models A$ или $\Ms\models B,$

$\Ms\models(\neg A)\Lra\Ms\not\models A;$

\pt{3} $\Ms\models(\forall x A)\Lra$ для всех $a\in M\:\Ms\models A[x/a];$

$\Ms\models(\exists x A)\Lra$ существует $a\in M$ такой, что $\Ms\models A[x/a].$

\end{df}

Поясним, что написано в последнем пункте. Для этого индукцией по построению формулы определим свободное и связанное вхождения переменной в формулу.

\begin{df} {\itshape Вхождением} будем называть любой экземпляр переменной в записи формулы.

\pt{1} В атомарной формуле $A$ все вхождения всех переменных --- свободные;

\pt{2} При образовании формулы из $A$ и $B$ связками логики высказываний свободные вхождения --- это в точности свободные вхождения в $A$ и в $B;$

\pt{3} Если имеется квантор (например, $\forall v_i A$), то любое вхождение $v_i$ в $(\forall v_i A)$ --- связано. Все оставшиеся переменные наследуют свою свободность/связанность из формулы $A.$

\end{df}

\begin{df}
$A[{v_i}/t]$ --- результат замены всех {\itshape свободных} вхождений $v_i$ в $A$ на терм $t.$  {\itshape Замкнутая формула} --- формула без свободных переменных.
\end{df}

Скажем, что формулы эквивалентны $(A\equiv B),$ если $\Ms\models A\Leftrightarrow\Ms\models B.$ Для незамкнутых формул договоримся, чтобы $\forall\stackrel{\ra}{a}\in M\:(\Ms\models A[x/a]\Lra\Ms\models B[x/a]),$ где $\stackrel{\ra}{x}$ содержит все свободные переменные $A$ и $B.$

Теперь сформулируем аксиомы исчисления предикатов (сигнатуры $\Sigma$).

\pt{1} Схемы аксиом логики высказываний, например, $A\ra(B\ra A),$ где $A,B\in\mathrm{Fm}_\Sigma$.

\pt{2} $(\forall x A)\ra A[x/t],$ если терм $t$ подстановочен вместо $x$ в $A,$ то есть никакое вхождение ни одной из переменных, присутствующих в терме $t,$ не превратится в связанное в результате его подстановок в формулу $A[x/t];$

$A[x/t]\ra(\exists x A)$ при тех же условиях\footnote{Приведём пример важности условия подстановочности. Пусть дана формула $\forall x[\exists y(x\neq y)]\ra(\exists y(t\neq y)).$ Попытка подставить вместо $t$ терм $y$ приведёт к конфузу.}.

\pt{3} (MP и правила Бернайса):

\begin{prooftree}
\AxiomC{$A,A\ra B$}
\UnaryInfC{$B$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$A\ra B$}
\UnaryInfC{$A\ra(\forall x B)$}
\end{prooftree}

(если $x$ не входит свободно в $A$);

\begin{prooftree}
\AxiomC{$A\ra B$}
\UnaryInfC{$(\exists x A)\ra B$}
\end{prooftree}

(если $x$ не входит свободно в $B$).

\begin{theorem}[О корректности]
$\mathrm{PC}_\Sigma\vdash A\Ra$ для любой модели $\Ms$ сигнатуры $\Sigma$ $\forall a\in M$ --- вектора $\Ms\models A[a].$
\end{theorem}
\begin{proof}Индукция по построению $A.$
\end{proof}

\lectmark{4 декабря 2014 г.}{18 декабря 2014 г.}
\begin{theorem}[О дедукции]
Если $\Gamma,A$ состоит из \textbf{замкнутых}\footnote{Если разрешить незамкнутые посылки, то рассуждение не проходит, потому что теорема просто неверна. В самом деле: из гипотезы $A(x)$ выводится формула $\forall x\:A(x)$ (первое правило Бернайса), а вот $A(x)\ra\forall x\:A(x)$ вообще не общезначима.} формул, то $\Gamma,A\vdash B\Leftrightarrow\Gamma\vdash A\rightarrow B.$
\end{theorem}
\begin{proof}
(В сложную сторону) Индукция по построению вывода $\Gamma,A\ra B.$ Первые четыре варианта разбираются совершенно аналогично пропозициональному случаю.

\pt{1} $B$ аксиома исчисления предикатов. $B,B\ra(a\ra B),A\ra B.$

\pt{2} $B\in\Gamma.$ То же самое.

\pt{3} $B=A.$ $\vdash A\ra A.$

\pt{4} MP. $B=B_2\:\Gamma,A\ra B_1\:\Gamma,A\vdash B_1\ra B_2.$ Тогда добавляем в вывод:

$\Gamma\vdash A\ra B_1, \Gamma\vdash A\ra (B_1\ra B_2), (A\ra(B_1\ra B_2))\ra((A\ra B_1)\ra(A\ra B_2)), MP, MP, \Gamma\vdash A\ra B_2.$

\pt{5} Существенный случай: пусть применялось правило Бернайса: например, из предположения индукции $A\ra(\phi\ra\psi)$ нужно получить $A\ra(\phi\ra\forall x\:\psi(x)),$ где $x$ не параметр формулы $\psi.$ Здесь можно перейти, например, от $A\ra(\phi\ra\psi)$ к $(A\wedge\phi)\ra\psi$ и уже здесь применить правило Бернайса (поскольку $A$ замкнута и заведомо не может иметь параметр $x$); из полученной $(A\wedge\phi)\ra\forall x\:\psi$ осталось симметрично вернуть $A$ влево.

Аналогично рассматривается и второе правило Бернайса, только теперь $A\ra(\phi\ra\psi)$ нужно по пропозициональным тавтологиям переписать как $\phi\ra(A\ra\psi),$ навесить квантор существования слева и протащить $A$ обратно.
\end{proof}

\begin{df}
\textit{Теория} $T$ --- это множество замкнутых формул. $T$ \textit{непротиворечива,} если из неё нельзя вывести противоречие, то есть $\nexists A\:T\vdash A,\neg A.$
\end{df}

\begin{theorem}[Теорема о полноте в форме существования модели; Гёдель, 1929]
Всякая непротиворечивая теория имеет модель: $T\nvdash\bot\Rightarrow\exists \Ms\:\Ms\models T.$
\end{theorem}

Для доказательства введём несколько новых понятий и докажем ряд лемм. Идея рассуждения такова: в качестве искомой модели рассмотреть совокупность всех замкнутых термов в сигнатуре. Тогда формулы интерпретируются сами собой (соотношение $t=f^n(t_1\sco t_n)$ задаёт отображение из $M^n$ в $M=\{t\}$), но если термов <<слишком мало>> неясно даже, как интерпретировать предикаты, не говоря уже о возможности навешивать квантор с сохранением истинности. Итак, для реализации нашей программы теорию необходимо расширять, что мы и далее сделаем, следуя Хенкину\footnote{\textbf{Хенкин, Леон Альберт} (1921 -- 2006) --- американский логик XX века, профессор Калифорнийского университета.} (1947).

\lectmark{18 декабря 2014 г.}{12 февраля 2015 г.}

\begin{df}
$T$ --- теория со \textit{свойством Хенкина,} если для любой выводимой в $T$ \textit{экзистенциальной} формулы, то есть формулы вида $\exists x\varphi(x)$ существует такая константа $c\in\Const_\Sigma,$ что $T\vdash\varphi(c).$
\end{df}
\begin{df}
$T$ --- \textit{полна,} если $T$ непротиворечива, и~для любого предложения $\varphi\in\Lc_T\:(T\vdash\varphi\text{ или }T\vdash\neg\varphi).$
\end{df}
\begin{ex}
$Th(\Ms)=\{A\mid\Ms\models A\}$ является полной теорией; её принято называть \textit{элементарной теорией модели.}
\end{ex}

Следующая лемма обосновывает значение введённых понятий.
\begin{lemma}[1, о существовании модели]
\label{Godel1}
Если $T$ --- полная теория со свойством Хенкина, то у~неё существует модель $\Mc\models T.$
\end{lemma}
\begin{proof}
Пусть $M$ --- множество всех замкнутых термов $\Sigma.$ Как и планировалось, положим $f_M(t_1\sco t_n)\eqdef f^n(t_1\sco t_n),$ а значение предиката $P_M(t_1\sco t_n),$ соответствующего символу $P^n,$ определим из полноты: как единицу, если выводима (атомарная) формула $P(t_1\sco t_n),$ и как нуль, если, напротив, $T\vdash\neg P(t_1\sco t_n).$ Докажем, что истинность любой формулы логики предикатов в предложенной $M$ тогда в точности эквивалентна её выводимости в рамках теории $T.$ Индукция по глубине формулы $A.$

\pt{1} $A$ атомарна: из определения истинности предиката.

\pt{2} $A$ получена логическими связками: по аналогии с пропозициональным случаем. Утверждение, что $T\vdash\neg A$ эквивалентно $T\nvdash A$ формализует полноту и непротиворечивость $T,$ свойства конъюнкции, дизъюнкции и импликации устанавливаем разбором случаев или же ссылкой на выводимость частных случаев всех тавтологий логики высказываний.

\pt{3} $A$ имеет вид $\exists x\:\phi(x).$ Пусть $A$ выводима. Это значит, что (существенно используем свойство Хенкина!) существует такая константа (то есть замкнутый терм теории $T$) $c,$ что $\phi(c)$ выводима. По предположению индукции, $\phi(c)$ истинна; итак, в самом деле существует такой терм, что $\phi$ обращается в истину, то есть $\exists x\:\phi(x),$ и $M\models A.$

Обратно: пусть $A$ истинна в $M.$ Это означает по её смыслу, что есть некий терм $t\in M,$ обращающий в истину формулу $\phi.$ По предположению индукции, тогда $\phi(t)$ выводима; но формула $\phi(t)\ra\exists x\:\phi(x)$ является одной из аксиом. Итак, опять $T\vdash A.$
\end{proof}

Итак, цель поставлена: нужно так расширить нашу теорию $T$ (и, видимо, обогатить её язык константами), чтобы она обрела два свойства: полноты и Хенкина, не утратив при этом своей непротиворечивости. Начнём с полноты, потому что она не отличается от случая из логики высказываний.

\begin{lemma}[2, Линденбаума]
\label{Godel2}
Всякая непротиворечивая теория $T$ в~сигнатуре $\Sigma$ имеет в~$\Sigma$ полное расширение.
\end{lemma}
\begin{proof}
Вместо повторения рассуждений из пропозиционального случая с последовательным добавлением в теорию либо формулы $\phi,$ либо $\neg\phi,$ которое отлично работает в случае счётной сигнатуры, но перестаёт нас удовлетворять при увеличении её мощности, когда формул становится слишком много. Поэтому взамен мы неконструктивно сошлёмся на \sref{лемму}{Zorn}: рассмотрим множество всех непротиворечивых теорий, содержащих $T$ и упорядоченных по включению. Если $\{T_i\mid i\in I\}$ --- цепь, то объединение всех $T_i$ является её верхней гранью. Теперь фиксируем максимальный элемент и замечаем, что его противоречивость достигалась бы конечным числом аксиом и поэтому выявилась бы уже на конечном шаге построения.
\end{proof}

Теперь научимся расширять теорию, добиваясь свойства Хенкина. Весьма очевидно чисто синтаксическое вспомогательное утверждение:
\begin{lemma}[3, о свежей константе]
\label{Godel3}
Пусть $T$ --- теория в $\Sigma,$ и $c\notin\Sigma.$ Тогда, если $T\vdash\varphi(c)$ в сигнатуре $\Sigma\cup\{c\},$ то $T\vdash\varphi(a),$ где $a$ --- прежде не использовавшаяся в выводе $\varphi(c)$ свободная переменная.
\end{lemma}
Отсюда следует, что при добавлении в сигнатуру новой константы и рассмотрении прежней теории новых выводимостей не появляется: если в $\varphi$ константа $c$ в действительности не появляется, то $T\vdash\phi$ в $\Sigma\cup\{c\}$ влечёт $T\vdash\varphi$ и в $\Sigma$\footnote{Это свойство расширения называется \textit{консервативностью}.}.

\begin{imp}
Пусть $T$ --- непротиворечивая теория, в которой выводится формула $\forall x\:\phi(x),$ и
\begin{center}
$T'\eqdef T\cup\{\varphi(c)\},$
\end{center}
где $c$ --- свежая константа. Тогда $T'$ также непротиворечива.
\end{imp}
\begin{proof}
От противного: пусть $T'$ противоречиво, то есть на самом деле из $T$ выводится отрицание $\phi(c):$ существует конечный поднабор посылок $\gamma\subseteq T,$ что $\gamma\ra\neg\phi(c).$ Но $\gamma$ ничего не знает о свежей константе $c!$ Итак, по \sref{лемме}{Godel3}, выводимо просто $\gamma\ra\neg\phi.$ Согласно контрапозиции, отсюда вытекает $\phi\ra\neg\gamma,$ а правило Бернайса влечёт $\exists x\:\phi(x)\ra\neg\phi.$ Но, согласно условию, $\exists x\:\phi(x)$ выводилось из $T,$ то есть $T\vdash\neg\gamma,$ и $T$ уже было противоречивым ранее. Противоречие.
\end{proof}

Естественно, это рассуждение обобщается и на любое число констант.

\begin{lemma}[4]
\label{Godel4}
Пусть $T$ --- непротиворечивая теория, и
\begin{center}
$T'\eqdef T\cup\{\phi_\alpha(c_\alpha)\mid\alpha\in I\},$
\end{center}
где множество $I$ индексирует все формулы вида $\exists v_\alpha\:\phi_\alpha(v_\alpha),$ выводимые из $T,$ а $\Sigma'=\Sigma\cup\{c_\alpha\mid\alpha\in I\}$ --- расширение сигнатуры $\Sigma$ попарно различными константами. Тогда $T'$ --- непротиворечива.
\end{lemma}
\begin{proof}
В самом деле: из соображений компактности противоречие реализуется как вывод конечной длины, и мы можем конечное число раз повторить рассуждения предыдущего следствия.
\end{proof}

Заметим, что \sref{лемма}{Godel2} обеспечивает расширение, которое полно, но ничего не говорит о свойстве Хенкина. Напротив, \sref{лемма}{Godel4} приближает нас к свойству Хенкина (но не гарантирует его: про формулы вида $\exists x\:\phi(x),$ содержащие вновь добавленные константы, нам ничего не известно), но никак не гарантирует полноты. Однако мы можем их повторять\ldots

\begin{lemma}[5, основная]
\label{Godel5}
Всякая непротиворечивая теория $T$ в сигнатуре $\Sigma$ имеет непротиворечивое расширение $S$ в языке $\Sigma',$ обогащённом константами, обладающее одновременно полнотой и свойством Хенкина.
\end{lemma}
\begin{proof}
Счётное число раз поочерёдно применим описанные процедуры пополнения и добавления констант. В пределе получим объединение, обладающее обоими свойствами одновременно. В самом деле: непротиворечивость следует из компактности (противоречие использует конечное число формул и поэтому появляется в конечный момент времени.) Из конечности длины формулы следует, что в ней лишь конечное число новых констант, поэтому на конечном шаге очередное пополнение добавит либо её, либо её отрицание в теорию. Наконец, свойство Хенкина тоже реализуется благодаря конечности: когда все новые константы нашей формулы появятся в сигнатуре, следующее добавление констант обеспечит искомую $c.$
\end{proof}

\textbf{Доказательство теоремы Гёделя.} Берём любую непротиворечивую теорию $T$ и расширяем её до надтеории $P$ в языке $\Sigma',$ обладающей одновременно и непротиворечивостью, и полнотой, и свойством Хенкина (\sref{Лемма}{Godel5}). Но тогда, теперь уже по \sref{лемме}{Godel1}, у теории $P$ существует модель, являющаяся моделью и для своей подтеории $T.$ Теорема Гёделя доказана.

\begin{theorem}[Гёделя, о полноте, стандартная формулировка]
$T\models\varphi\Rightarrow T\vdash\varphi,$ то есть в любой модели $\Mc$ из $\Mc\models T$ следует $\Mc\models\varphi.$
\end{theorem}
\begin{proof}В самом деле: пусть, напротив, $T\nvdash\varphi\Rightarrow T\cup\{\neg\varphi\}$ --- непротиворечиво. Но тогда выходит, что в этой модели $\Mc\models T,\neg\varphi,$ что означает $T\not\models\varphi$.
\end{proof}

В частности, в пустой модели имеем ожидаемое $\models\varphi\:\Rightarrow\:\vdash\varphi.$

Выпишем теперь классические следствия теоремы Гёделя. Первое очень употребимо в теории моделей и влечёт ряд неожиданных результатов:

\begin{theorem}[Гёделя-Мальцева, о компактности]
\label{compact}
$T$ имеет модель тогда и только тогда, когда её любая конечная подтеория $T_0$ имеет модель.
\end{theorem}
\begin{proof}
Очевидно: противоречие состоит из конечного числа использованных формул.
\end{proof}

\begin{ex}
Рассмотрим в совокупности $(\NN;+;\cdot;0;=)$ стандартную теорию $Th(\NN)=\{A\in L_{arith}\mid\NN\models A\}.$ Назовём \textit{нестандартной моделью арифметики} модель $M\not\cong\NN\:M\models Th(\NN).$ Почему такие существуют?

Рассмотрим язык $L(c),$ где $c$ --- константа. Взяв теорию $C\eqdef \{c\neq 0,\,c\neq 1,\ldots\}.$ Пусть $T\eqdef Th(\NN)\cup C.$ Тогда, если $\Mc\models T$ и $c_\Mc$ --- интерпретация $c$ в $\Mc,$ то $c\notin\{0,1,2,\ldots\},$ и это будет нестандартная модель. Но в самом деле: по \sref{теореме}{compact}, для выполнимости $T$ достаточно показать выполнимость каждой \textit{конечной} подтеории $T_0\subset Th(\NN)\cup C.$ Положим $C_0\eqdef T_0\cap C;$ $Th(\NN)+C_0$ имеет модель ($C_0=\{c\neq n_1\sco c\neq n_k\},$ назначим моделью $(\NN;c\eqdef m),$ где, например, $m>\max\{n_1\sco n_k\}$).
\end{ex}

\begin{theorem}[Лёвенгейма-Скулема, слабый вариант]
Для любой непротиворечивой теории первого порядка в счётном языке, существует её счётная модель.
\end{theorem}
\begin{proof}
Наблюдение за мощностью модели в доказательстве теоремы Гёделя.
\end{proof}

\lectmark{12 февраля 2015 г.}{19 февраля 2015 г.}

\subsection{Теории с равенством}
Часто мы рассматриваем языки с двуместным предикатным символом <<равенства>> $=;$ вообще говоря, никаких обременений на значение этого предиката у нас нет. Но часто хочется назначить ему естественное значение.

\begin{df}
\textit{Нормальная модель} --- это модель $\Mc$ в сигнатуре с равенством $=,$ где $=_\Mc$ есть <<настоящее>> равенство $\{<x,x>\mid x\in\Mc\}.$
\end{df}

Такое обременение, естественно, нагружает нормальную теорию дополнительными аксиомами.

\begin{ax}[Равенства для сигнатуры $\Sigma$]

\pt{1} $=$ есть отношение эквивалентности:

$\forall x\:(x=x),\:\forall x,y,x\:(x=y\wedge y=z\ra x=z),\:\forall x,y\:(x=y\ra y=x).$

\pt{2} Для каждого $f\in\Sigma,$

$\forall\stackrel{\ra}{x}\:\forall\stackrel{\ra}{y}\:(x_1=y_1\wedge\ldots\wedge x_n=y_n\:\ra\:f(x_1\sco x_n)=f(y_1\sco y_n)).$

\pt{3} Для каждого $P\in\Sigma,$

$\forall\stackrel{\ra}{x}\:\forall\stackrel{\ra}{y}\:(x_1=y_1\wedge\ldots\wedge x_n=y_n\:\ra\:P(x_1\sco x_n)\leftrightarrow P(y_1\sco y_n)).$

\end{ax}

\begin{df}
\textit{Теория с равенством} --- это теория, содержащая все аксиомы равенства\footnote{Для символа $=$ в своей сигнатуре $\Sigma.$}.
\end{df}

\begin{theorem}[О полноте и корректности]

\pt{1} Пусть $\Mc$ --- нормальная модель. Тогда $Th(M)=\{A\mid\Mc\models A\}$ --- (непротиворечивая) теория с равенством.

\pt{2} Пусть $T$ --- непротиворечивая теория с равенством. Тогда $\exists\Mc$ --- нормальная: $\Mc\models T.$

\end{theorem}
\begin{proof}

\pt{1} Очевидно.

\pt{2} По теореме о полноте, $\exists\Mc_{0}:\:\Mc_0\models T.$ На $\Mc_0$ определим отношение эквивалентности:
\begin{center}
$x\sim y\:\ardef\:\Mc_0\models x=y.$
\end{center}

Пусть $\Mc\eqdef\Mc_0/\sim.$ Положим $f_\Mc([x_1]\sco[x_n])\eqdef[f_{\Mc_0}(x_1\sco x_n)],$ $P_\Mc([x_1]\sco[x_n])\ardef[P_{\Mc_0}(x_1\sco x_n)].$ Осталось рутинно (индукцией по построению формулы) проверить, что для любых формулы $A$ и $\stackrel{\ra}{x}\in\Mc_0$ выполняется $\Mc_0\models A(\stackrel{\ra}{x})\:\Leftrightarrow\:\Mc\models A([x_1]\sco[x_n]).$
\end{proof}

\begin{note}
Можно записать аксиомы компактнее:

$T$ --- нормальная модель, если и только если $\forall\stackrel{\ra}{x}\forall\stackrel{\ra}{y},$ $T\vdash(x_1=y_1\wedge\ldots\wedge x_n=y_n\:\ra\:(A(x_1\sco x_n)\,\leftrightarrow\,A(y_1\sco y_n))),$ и $T\vdash$ аксиома 1.
\end{note}

\textbf{Начиная с этого места, мы временно ограничимся в рассмотрении исключительно теориями с равенством. Аксиомы равенства мы всегда будем молчаливо подразумевать, не выписывая.}

\subsection{Теоремы Лёвенгейма-Скулема}
Напомним:
\begin{df}
\textit{Теория модели:} $Th(\Mc)\eqdef\{A\mid\Mc\models A\}.$

\textit{Элементарно эквивалентные модели:} $\Mc_1\equiv\Mc_2\:\ardef\:Th(\Mc_1)=Th(\Mc_2).$

\textit{Элементарная подмодель:} $\Mc_1\prec\Mc_2\:\ardef\:\Mc_1\subset\Mc_2,$ и для любой $A(\stackrel{\ra}{x}),\:\forall\stackrel{\ra}{a}\in\Mc_1\:(\Mc_1\models A[\stackrel{\ra}{a}]\,\Leftrightarrow\,\Mc_2\models A[\stackrel{\ra}{a}]).$ В частности, элементарная подмодель элементарно эквивалентна исходной модели (но, вообще говоря, не наоборот!)
\end{df}

\begin{df}
Наша нестандартная модель арифметики: $\NN\prec\Mc:\:\forall n\in\NN\:(\NN\models A[n]\,\Leftrightarrow\,\Mc\models A[n]).$
\end{df}

\begin{theorem}
Любая бесконечная модель $\Mc$ имеет собственное элементарное расширение $\Mc\prec\Mc'.$
\end{theorem}
\begin{proof}
Добавим к языку ещё одну константу $c$ и запишем следующую теорию $Th(\Mc,\{c_\alpha\mid\alpha\in\Mc\})\cup C,$ где $C\eqdef\{c\neq c_\alpha\mid a\in\Mc\}.$ Тогда любая конечная подтеория, а, значит, и вся теория, имеет модель.
\end{proof}

\begin{theorem}[Лёвенгейма-Скулема-Мальцева, о повышении мощности]
\label{LoeSc}
Любая бесконечная модель $\Mc$ имеет элементарные расширения любой мощности больше мощности $|\Mc|.$
\end{theorem}
\begin{proof}
Заведём константы для всех исходных элементов модели; введём ровно столько новых констант, чтобы получить желаемую мощность; добавляем ещё и серию аксиом, постулирующих попарное различие между значениями всех новых констант. Далее рассуждения по конечным подмоделям аналогичны.
\end{proof}

\begin{theorem}[Лёвенгейма-Скулема, о понижении мощности]
\label{LS}
Любая модель $\Mc$ имеет элементарно изоморфную подмодель $\Nc\prec\Mc$ такую, что $|\Nc|\leqslant\max(\aleph_0,|\Sigma|).$
\end{theorem}
\begin{proof}
Будем, начав с любого $\Nc\subset\Mc,$ строить последовательность элементарных расширений внутри $\Mc:$ $\Nc_0\subset\Nc_1\subset\Nc_2\subset\ldots$ Делать $\Nc_{k+1}$ из $\Nc_{k}$ будем так: пусть $A[v,\stackrel{\ra}{u}];\:\stackrel{\ra}{y}\in\Nc_{k}.$ Допустим, $\Mc\models\exists x\:A[x,\stackrel{\ra}{y}];$ выбираем $a$ из $\Mc,$ чтобы $\Mc\models\:A[a,\stackrel{\ra}{y}],$ и добавим к $\Nc_{k}.$ Затем объединим: $N\eqdef\bigcup\limits_{k<\omega}\Nc_{k}.$

\begin{lemma}[1]
Для любой $A,$ $\forall\stackrel{\ra}{x}\in\Nc\:(\Mc\models\exists y\,A(y,\stackrel{\ra}{x})\,\Leftrightarrow\,\exists y\in\Nc\:\Mc\models A(y,\stackrel{\ra}{x})).$
\end{lemma}
\begin{proof}
$\stackrel{\ra}{x}$ принадлежит какому-то конечному $\Nc_{k}.$
\end{proof}
\begin{lemma}[2]
$\Nc$ есть подмодель $\Mc.$
\end{lemma}
\begin{proof}
Если $x_1\sco x_n\in\N,$ то $f(x_1\sco x_n)\in\N_{k+1}\subset\Nc.$ $\exists y\:y=f(x_1\sco x_n),\:x_1\sco x_n\in\Nc_{k}\:\Rightarrow\:\Mc\models\exists y\in\Nc_{k+1}\:y=f(\stackrel{\ra}{x}).$
\end{proof}
\begin{lemma}[3]
$\forall\stackrel{\ra}{x}\in\Nc\:(\Nc\models A[\stackrel{\ra}{x}]\:\Leftrightarrow\:\Mc\models A[\stackrel{\ra}{x}]).$
\end{lemma}
\begin{proof}
Для атомарных --- из $\Nc\in\Mc.$ Логические связки --- очевидно. TODO
\end{proof}
\end{proof}


\lectmark{19 февраля 2015 г.}{5 марта 2015 г.}

\subsection{Элиминация кванторов. Разрешимость}
\label{Elim}
\epigraph{Once one has eliminated the impossible, whatever remains, however improbable, must also be eliminated.}{Justin Richards}

Пусть $\Sigma$ --- сигнатура, $A$ --- её структура. Часто удаётся доказать факт вида: <<если $\varphi$ --- формула сигнатуры $\Sigma,$ то существует бескванторная формула $\varphi'$ такая, что $A\models\varphi\leftrightarrow\varphi'$>>. Тогда такую алгебраическую структуру называют \textit{допускающей элиминацию кванторов.} Рассмотрим примеры подобных структур и докажем для них это свойство.

\begin{ex}
 \textbf{Теория $(\ZZ,=,0,S).$} В ней можно выразить крайне мало: $SSS\ldots S(u)=SSS\ldots S(v),$ где $u,v$ --- 0 или переменная. Приведём $\varphi$ к предварённой нормальной форме $Q_1 x_1 Q_2 x_2\ldots(Q_n x_n\:\varphi'),$ $Q_i$ --- кванторы, $\varphi'$ --- бескванторная. Используя представление $\forall x\:\varphi'\:\Leftrightarrow\:\neg\exists x\:\neg\varphi',$ можем считать, что все кванторы --- существования, и вести индукцию по кванторной глубине формулы.

\begin{lemma}
$\exists x\:\varphi'$ в $(\ZZ,=,0,S)$ эквивалентна некоторой бескванторной формуле.
\end{lemma}
\begin{proof}
Вынося ненужное за квантор и приводя к ДНФ, будем считать, что наша формула имеет следующий вид:

\begin{gather}
\varphi=\exists x\:\tau(x,x_1\sco x_n)=\exists x\:(t_1=t_2\wedge t_3=t_4\wedge\ldots\wedge\neg t_n=t_{n+1}\ldots),
\end{gather}

и каждая из пар содержит $x$ хотя бы с одной стороны. Если какая-то из пар термов содержит $x$ с обеих сторон, $SS\ldots S(x)=SSS\ldots S(x)$ (аналогично, если не содержит с обеих, когда это просто равенство двух натуральных чисел), то это либо тождественно ложно, и вся формула обращается в ложь, либо истинна; тогда этот множитель можно сократить. Пусть $x$ присутствует с одной стороны, но не с другой: $SSS\ldots S(x)=SSS\ldots S(v),$ $v$ --- другая переменная или 0, то есть просто $x=s_i,i\in\{1\sco k\}$ где $s_i$ --- либо число, либо выражение $t_j+c$ (для простоты мы разрешим прибавлять целые константы вместо натуральных; это не меняет класса выводимых формул, зато оставляет слева одинокий $x$). Рассмотрим формулу $\varphi'=\tau(s_1,x_1\sco x_n)\vee\tau(s_2,x_1\sco x_n)\vee\ldots\vee\tau(s_k,x_1\sco x_n)$ --- дизъюнкцию всевозможных подстановок выражений $s_i$ вместо нужного $x.$

Если при некоторых $x_1\sco x_n$ окажется истинной формула $\varphi',$ то, посмотрев, на котором $i$ достиглась истинность, мы подставим (уже нам известную, ибо $x_1\sco x_n$ сейчас даны) величину числа $s_i$ вместо $x$ и убедимся, что и $\varphi$ верна: такой $x$ существует, и это в точности $s_i.$ Обратное, увы, вообще говоря, пока ещё неверно: никто не гарантировал, что $x,$ делающий формулу истинной, принадлежит набору $\{s_i\}!$ Но добавим к $\varphi'$ формулу $\varphi'',$ получающуюся из $\tau$ заменой всех атомарных формул, содержавших $x,$ на тождественно ложные формулы (любой такой <<неучтённый>> $x$ сделает ложными все атомарные с ним, поэтому в общем-то безразлично, каким именно он будет). Тогда $\varphi'\vee\varphi''$ --- бескванторная формула, эквивалентная исходной.
\end{proof}
\end{ex}

\begin{ex}
\textbf{Теория $(\QQ,<,=)$}\footnote{Или $\RR$.}\textbf{.} Выберем произвольную формулу $\varphi,$ вынесем наружу кванторы и устраняем их по одному изнутри. Вновь мы можем считать, что последний из кванторов --- существования, и нужно разобраться только с утверждением: $\exists x\:\varphi',$ где $\varphi'$ --- бескванторная формула. Атомарные формулы имеют вид: $u<v$ или $u=v.$ Приводя к ДНФ и удаляя отрицания путём замены $\neg(u<v)$ на $(u=v\vee v<u),$ а $\neg(u=v)$ на $(u<v\vee v<u)$, представляем её в виде: $\exists x\:(u_1<v_1\wedge u_2<v_2\wedge\ldots\wedge u_n<v_n\wedge u_{n+1}=v_{n+1}\ldots).$ Выбрасываем $x=x$ и сходные конструкции; если присутствует $x=v,$ то подставим везде $v$ вместо $x$ и выкинем квантор. Если такого равенства нет, то равенств нет вообще (их можно убрать из-под квантора). Если в оставшихся неравенствах $x$ всегда справа (или слева), то такой $x$ всегда существует, и формула просто $\top.$ Иначе выражение $\exists x\:(u_1<x\wedge\ldots\wedge u_n<x\wedge x<v_1\wedge\ldots\wedge x<v_m)$ означает (в силу плотности порядка), что все $u_i$ меньше всех $v_j,$ а это бескванторная формула.
\end{ex}

Заметим, что в обои случаях мы установили факт элиминируемости кванторов конструктивно, а поскольку любая замкнутая формула без кванторов --- либо истинна, либо ложна, то мы одновременно построили алгоритм установления истинности произвольной замкнутой формулы в теории: <<записать эквивалентную бескванторную, в которой будут только константы, подставить их и вычислить, истинно это или ложно>>. Такое свойство теорий называется \textit{разрешимостью.}

Более изощрённым является следующий результат о разрешимости.

\begin{theorem}[Тарского-Зайденберга\footnote{\textbf{Тарский, Альфред} (1901 -- 1983) --- польско-американский математик, логик. Создатель аксиоматизации евклидовой геометрии и разработчик метода элиминации кванторов. \textbf{Зайденберг, Абрахам} (1916 -- 1988) --- американский математик.}]
Пусть $A=(\RR,=,<,0,1,+,\cdot).$ Тогда всякая формула $\varphi$ равносильна в $A$ некоторой бескванторной формулой.
\end{theorem}
\begin{proof}
Начало аналогичное: приводим к предварённой форме и устраняем кванторы по одному; достаточно рассмотреть квантор существования. Итак, рассматриваем запись: $\exists x\:\varphi',$ где $\varphi'$ --- бескванторная формула. Что может стоять под квантором? Выражения двух видов: $t_1=t_2$ и $t_1<t_2,$ где $t_1-t_2\in\NN[x,x_1\sco x_n].$ Перенося всё для простоты налево и вычитая, получаем вид: $t=0,$ $t<0$ или $t>0,$ где уже $t\in\ZZ[x,x_1\sco x_n].$ Приводим к ДНФ и протаскиваем квантор существования, раскладывая формулу на дизъюнкцию нескольких и по индукции разбираем их; отрицания уничтожаем, заменяя на пару дизъюнкций. Итак, теперь $\varphi'$ --- конъюнкция атомов. Докажем основную лемму.
\begin{lemma}
Рассмотрим формулу вида $\exists x\:\varphi',$ где $\varphi'$ --- конъюнкция формул вида $t=0,t<0,t>0,t\in\ZZ[x,x_1\sco x_n].$ Тогда она эквивалентна некоторой бескванторной формуле $\psi$ от переменных $x_1\sco x_n.$
\end{lemma}
\begin{proof}
Запишем многочлен $t$ в виде $\ZZ[x_1\sco x_n][x].$ Пусть формула имеет вид $\exists x\:(t_1(x)=0\wedge t_2(x)=0\wedge\ldots\wedge t_n(x)<0).$ Если бы коэффициенты всех многочленов были числами, то мы могли бы записать следующую таблицу всех корней многочленов и их знаков: $2n+1$ её столбцов ($n$ --- суммарное количество всех корней всех многочленов семейства, за вычетом повторяющихся) соответствуют этим корням и промежуткам между ними, включая бесконечные лучи слева и справа, $k$ строк соответствуют самим многочленам, а их знаки в этих точках и на промежутках обозначены в клетках таблицы знаками $+,\,-\,0$\footnote{Важно, что числовые величины корней в заголовках столбцов не записаны: описывается лишь <<топологическое>> взаиморасположение графиков.}.

Такие таблицы будем называть \textit{диаграммами многочленов.} Будем писать много диаграмм и докажем, что при нескоторых правилах расширения диаграмм диаграмма для много членов степени 0 однозначно восстановит её для исходного набора. Список правил, по которым можно добавлять в таблицу многочлены (если получаются уже имеющиеся, повторять не надо):

\pt{1} Добавить старший член любого из многочленов первой и более степени.

\pt{2} Добавить производную любого многочлена по $x.$

\pt{3} Отбросить старший член одного из многочленов (по $x$) и дописать оставшееся.

\pt{4} Взять многочлены $P,Q$ ($n=deg(P)$ больше $k=deg(Q)$), домножить $P$ на старший член $Q$ в степени $n-k+1,$ чтобы результат деления стал целочисленным (относительно $x_1\sco x_n$) и разделить $P$ на $Q.$ Дописать этот, модифицированный остаток от деления в диаграмму.

Итак, этими способами мы расширяем эту таблицу; за конечное число шагов, добавляя многочлены лишь в меньшей степени, чем прежние, мы дойдём до системы, замкнутой относительно предложенных операций. Получается некоторое множество многочленов $F.$ Обозначим за $F_0$ все находящиеся в нём многочлены степени 0 по $x.$ Наша цель очевидна: пусть дана диаграмма только для $F_0$ (исключительно распределение знаков и нулей, константа во всю длину строки). Докажем, что тогда всю таблицу (при данных $x_1\sco x_n$) можно заполнить снизу вверх.

Будем добавлять назад многочлены по одному, упорядочив по возрастанию степеней. Пусть мы <<возвращаем>> многочлен $P(x,x_1\sco x_n),$ причём все многочлены меньших степеней уже добавлены. Старший коэффициент этого многочлена $a$ у нас уже записан (даже есть в $F_0$); его знак в диаграмме указан. Пусть там сказано, что $a=0.$ Но тогда наш многочлен совпал с многочленом меньшей степени, сделанным по правилу 3. Тогда просто находим этот многочлен и дублируем его строчку. Пусть теперь, для определённости, $a>0.$ Сначала разберём, какие знаки имеет наш многочлен в уже имеющихся в диаграмме точках (не на промежутках). Выберем какой-то корень. Вспоминаем, как именно появился здесь его столбик. Если он есть, то там один многочлен $Q$ (выше в таблице, пока не возвращённый) уже обращался в 0. Для определённости считаем, что старший член $Q$ ненулевой; более того, этот коэффициент $b$ уже есть в $F_0,$ и его знак нам известен. Далее, в списке есть и появившийся по пункту 4 модифицированный остаток от деления $P$ на $Q,$ и он записан ниже, чем $P,$ то есть уже разобран по предположению индукции. Но поскольку $Q$ в этой точке нулевой, то $b^k P=0+R,$ и мы, зная знак для $P$ и знак $b,$ легко вычисляем знак для $P.$

Пусть теперь знаки во всех имеющихся корнях уже вписаны. Пусть в двух подряд корнях стоит один знак; тогда, раз между ними не появилось корня у производной, то в нуль $P$ на этом интервале дополнительно не обращается. В противном случае корень есть (теорема Больцано-Коши), и ровно один из тех же соображений. Тогда добавляем туда новый столбик и вписываем туда нуль; дальше идём по индукции. Осталось понять, что происходит перед первым и после последнего корня. Из соображений корней производной, если знак в крайней точке и знак старшего коэффициента справа совпадают, то новых корней нет; иначе он один. С левого конца аналогично, но с учётом ещё и степени $P.$
\end{proof}

Берём многочлены нашей формулы, доводим его до замкнутого множества, выписываем все возможные диаграммы для $F_0,$ восстанавливаем до диаграммы для $F$ и, если распределение знаков и нулей совпало с требуемым в формуле, дописываем этот вариант в дизъюнкцию. Получается формула от $x_1\sco x_n,$ не содержащая переменной $x.$
\end{proof}
\lectmark{5 марта 2015 г.}{12 марта 2015 г.}

\subsection{Вещественные поля. 17 проблема Гильберта.}

\begin{df}
\textit{Упорядоченное поле} --- это пара $(F,<),$ где $F$ --- поле, $<$ --- линейный порядок на его элементах, такой, что $x<y$ влечёт $x+z<y+z,$ а $x,y>0\:\ra\:x\cdot y>0.$ В частности, поля $\QQ$ и $\RR$ (естественно) упорядочены, а задать такой порядок на $\CC$ невозможно. Давайте установим необходимые и достаточные условия, при которых такой порядок возможно ввести.
\end{df}

\begin{stm}

\pt{1} $\forall x\neq 0\:(x^2>0).$

\pt{2} $1>0.$

\pt{3} Упорядоченное поле всегда имеет характеристику 0.

\pt{4} $-1\neq {a_1}^2+\ldots+{a_n}^2.$
\end{stm}
\begin{proof}

Первый пункт: $x>0\ra x\cdot x>0.$ Если же $x<0,$ то $-x>0,$ и опять же $x\cdot x=(-x)(-x)>0$. Второй следует из первого, так как $1=1^2>0.$ Если $1>0,$ то $1+1>0+1=1>0,$ и~по индукции $1+\ldots+1>0,$ что даёт нам характеристику 0. Если $a>0,$ то $-a<0;$ в частности, $-1<0,$ а сумма квадратов --- больше.
\end{proof}

\begin{df}
Назовём поле $\Fc$ \textit{вещественным} (согласно Артину\footnote{\textbf{Артин, Эмиль} (1898 -- 1962) --- австрийский алгебраист, создатель теории вещественных полей. Автор решения 17 проблемы Гильберта.}), если $\forall n\forall a_1\sco a_n\in\Fc\:(-1\neq{a_1}^2+\ldots+{a_n}^2).$
\end{df}

Мы убедились, что вещественными являются все упорядоченные поля. Но оказывается, что и~обратное верно: на любом формально вещественном поле можно задать линейный порядок, согласованный со структурой.

\lectmark{12 марта 2015 г.}{19 марта 2015 г.}

\begin{theorem}
Если $\Fc$ --- вещественное поле, то $\Fc$ можно упорядочить, то есть задать отношение линейного порядка $<$ над $\Fc$ такое, что $x<y\ra x+z<y+z,$ и $x>0\wedge y>0\ra x\cdot y>0;$ более того, для любого $a$ такого, что $-a\notin\Sigma\Fc^2,$ можно сделать это так, что $a>0.$
\end{theorem}
\begin{proof}

Докажем серию лемм о свойствах таких полей и их алгебраических расширений.

\begin{lemma}[1]
\label{artin1}
Пусть $\Fc$ --- вещественное поле, $a\in\Fc,\:a\neq 0.$ Тогда невозможно, чтобы одновременно выполнялось
\begin{center}
$$\case{a\in\Sigma\Fc^2, \\
-a\in\Sigma\Fc^2.}$$
\end{center}
\end{lemma}
\begin{proof}
Если $a$ и $b$ --- суммы квадратов, то $\frac{a}{b}=\frac{a}{b^2}\cdot b$ является суммой квадратов. Следовательно, если бы $a$ и~$-a$ являлись суммами квадратов одновременно, то их частное $\frac{a}{-a}=-1\in\Sigma\Fc^2,$ и поле $\Fc$ не вещественно.
\end{proof}

\begin{lemma}[2]
\label{artin2}
Если $\Fc$ --- вещественно, $-a\notin\Sigma\Fc^2,$ то $\Fc(\sqrt{a})$ --- вещественно.
\end{lemma}
\begin{proof}
Достаточно рассмотреть существенный случай, когда $\sqrt{a}\notin\Fc.$ Согласно определению, $\Fc(\sqrt{a})=\{u+v\sqrt{a}\mid u,v\in\Fc\}.$ От противного: пусть $\Fc(\sqrt{a})$ не вещественно. Тогда существуют такие $b_i,c_i\in\Fc,$ что
\begin{gather}
-1=\sum(b_i+c_i\sqrt{a})^2=\sum(b_i^2+2b_i c_i\sqrt{a}+c_i^2 a).
\end{gather}
Однако $-1=-1\cdot 1+0\cdot\sqrt{a},$ поэтому слагаемые с корнем зануляются, и в действительности
\begin{gather}
-1=\sum b_i^2+a\sum c_i^2.
\end{gather}
Отсюда выражается
\begin{gather}
-a=\frac{1+\sum b_i^2}{\sum c_i^2}=\frac{\hr{\sum b_i^2}\hr{\sum c_i^2}+\hr{\sum c_i^2}}{\hr{\sum c_i^2}^2},
\end{gather}
откуда $-a$ выражается в виде суммы квадратов. Противоречие.
\end{proof}

\begin{imp}
Если $\Fc$ --- вещественно, то либо $\Fc(\sqrt{a}),$ либо $\Fc(\sqrt{a})$ --- вещественно.
\end{imp}
\begin{lemma}[3]
\label{artin3}
Пусть $\Fc$ --- вещественно замкнуто, то есть никакое его алгебраическое расширение не является более вещественным. Положим $a\ge 0\ardef a\in\Fc^2;$ $x\ge y\ardef x-y\ge 0.$ Тогда $(\Fc,\le)$ --- упорядоченное поле.
\end{lemma}
\begin{proof}
Антисимметричность порядка вытекает из леммы 1. Транзитивность: если $x\ge y\ge z,$ то $x-y=a^2,y-z=b^2.$ Тогда $x-z=a^2+b^2\in\Sigma\Fc^2.$ По лемме 2, мы можем взять из неё корень, и $\Fc(\sqrt{a^2+b^2})$ --- тоже вещественно. Но у поля $\Fc$ нет собственных вещественных алгебраических расширений! Значит, $\sqrt{a^2+b^2}\in\Fc,$ что влечёт $a^2+b^2\in\Fc^2,$ то есть $x-z\in\Fc^2,$ и $x\ge z.$ Линейность: для любого $a\in\Fc,$ либо $a\in\Fc^2,$ либо $-a\in\Fc^2:$ в самом деле, если бы они оба не принадлежали $\Fc^2,$ то среди двух полей $\Fc(\sqrt{a})$ и $\Fc(\sqrt{-a})$ есть собственное вещественное расширение. Согласованность со структурой: если $x<y,$ то $(x+z)-(y+z)\in\Fc^2,$ откуда $y+z>x+z.$
\end{proof}
\begin{lemma}[4]
\label{artin4}
Если $\Fc$ --- вещественное поле, то существует $\Fc'\supseteq\Fc,$ и $\Fc'$ --- вещественно замкнуто.
\end{lemma}
\begin{proof}
Рассмотрим все вещественные поля, содержащие $\Fc,$ фактор которых по $\Fc$ --- алгебраический, с отношением включения. Любая цепь имеет верхнюю грань: это объединение всех её элементов. По лемме Цорна, существует максимальный элемент $\Fc'.$ Он будет алгебраически замкнутым, иначе нарушилась бы максимальность. Значит, он --- искомый.
\end{proof}

Пусть $\Fc$ --- вещественное поле, $-a\notin\Sigma\Fc^2.$ Применим \sref{лемму}{artin2}: $\Fc(\sqrt{a})$ --- тоже вещественно. По \sref{лемме}{artin4}, существует $\Fc'\supseteq\Fc(\sqrt{a}),$ и $\Fc'$ --- уже вещественно замкнуто. Теперь, применяя \sref{лемму}{artin3}, строим на $\Fc'$ такой порядок, что $a>0.$ Рассмотрим сужение $<\eva{\Fc}$ --- это искомое упорядочение.
\end{proof}

\begin{theorem}[17 проблема Гильберта]
Пусть $f$ --- рациональная функция над $\Fc$ --- вещественно замкнутым, $\forall\stackrel{\ra}{a}\:f(\stackrel{\ra}{a})\ge 0.$ Тогда существуют $f_1\sco f_n$ --- такие рациональные функции над $\Fc,$ что $f=\sum\limits_{i=1}^n f_i^2.$
\end{theorem}
\begin{proof}

Пусть $f$ не является суммой квадратов. Тогда у поля рациональных функций $\Fc(X)$ существует упорядочение, причём $f$ можно сделать при нём отрицательным. Вещественно замкнём поле $\Fc(X)$ до $\Rc,$ сохраняя порядок. Тогда $\Rc\models\exists\vec{v}\:(f(\vec{v})<0),$ поскольку $f<0$ в $\Rc.$ Но тогда и $\F\models\exists\vec{v}\:(f(\vec{v})<0),$ что противоречит неотрицательности $f.$ 17 проблема Гильберта полностью решена.
\end{proof}

\textit{Для более глубокого знакомства с вещественными полями рекомендуем обратиться к изданию \cite{Mar} или к <<Алгебре>> С. Ленга.}

\subsection{Категоричные теории}

\begin{df}
Пусть $\alpha$ --- бесконечный кардинал, $T$ --- теория первого порядка в сигнатуре $\Sigma.$ Пусть $T$ имеет модель мощности $\alpha.$ Будем говорить, что $T$ --- \textit{$\alpha$-категорична} (или \textit{категорична в мощности $\alpha$}), если $\forall\Mc_1,\Mc_2\:(\Mc_1\models T\wedge\Mc_2\models T\wedge|\Mc_1|=|\Mc_2|=\alpha\,\ra\,\Mc_1\sim\Mc_2).$
\end{df}

\begin{ex}

\pt{1} Теория равенства $T_=$ (с $\Sigma=\{=\}$) категорична в каждой мощности.

\pt{2} Пусть теория описывает отношение эквивалентности, разделяющее все элементы на два класса, причём они бесконечны. Она категорична в счётной мощности, но ни в какой большей.

\pt{3} Теория $DLO$ плотного линейного порядка без первого и последнего элементов: {симметричность, транзитивность, линейность, плотность, отсутствие наименьшего и наибольшего элементов}. Общеизвестный факт гласит:

\begin{lemma}
$DLO$ категорична в счётной мощности (но ни в какой большей).
\end{lemma}

\pt{4} Обратно, пусть $\Sigma=\{0,+\}$ --- язык аддитивных групп. Будем говорить, что $G$ --- абелева группа с делением без кручения, если $\forall y\exists x\:(x+\ldots+x=y),$ но $\forall x\:(x\neq 0\ra x+\ldots+x\neq 0)$ для любого числа $n$ слагаемых в записи. Пусть $\T$ --- теория таких абелевых групп. Тогда $\Tc$ не категорична в счётной мощности, а во всех остальных --- категорична.

В самом деле, условимся об очевидном обозначении $n\cdot a,$ где $n\in\NN.$ Тогда $forall n\:G\models\forall a\exists!b(nb=a).$ Существование частного --- это аксиома. Единственность: если $a=nb=nb',$ то $0=n(b-b'),$ что противоречит отсутствию кручения. В силу этого введём обозначения: $b=\frac{1}{n}\cdot a.$ Аналогично, обретает смысл запись $\frac{m}{n}a,$ то есть наша группа есть векторное пространство над $\QQ.$ Но векторные пространства имеют очень простой изоморфизм: по размерности. Тогда счётная группа может иметь любую конечную или счётную размерность, что даёт некатегоричность, а вот у более чем счётного векторного пространства размерность совпадает с мощностью, и с точностью до изоморфизма оно единственно.

\pt{5} (без доказательства) Пусть $ACF_p$ --- теория алгебраически замкнутых полей характеристики $p.$ Тогда эта теория категорична для каждого несчётного кардинала. При этом каждая из этих теорий имеет даже конечную модель ($\ZZ_p$).

\pt{6} Доказанный нами факт о существовании нестандартной модели арифметики доказывает счётную некатегоричность арифметики Пеано. Истинностная арифметика (множество всех замкнутых формул, верных в~стандартной модели) --- аналогично.
\end{ex}

\begin{theorem}[Воота/Vaught]
\label{Vaught}
Пусть теория $\Tc$ в сигнатуре $\Sigma$ имеет какую-то модель, но не имеет конечных моделей; пусть, кроме того, $\Tc$ --- $\alpha$-категорична для некоторого $\alpha\ge|\Sigma|$. Тогда $\Tc$ --- полна, то есть $\forall\varphi\in St$ выполнено либо $(\Sigma)$ $\Tc\models\varphi,$ либо $\Tc\models\neg\varphi$\footnote{Значит, и теории из примеров 4 и 5 --- полны. Обратное неверно: рассмотрите истинностную арифметику или пример 3.}.
\end{theorem}
\begin{proof}
От противного: предположим, что $\Tc$ неполна. Зафиксируем формулу $\varphi,$ невыводимую вместе с отрицанием. Тогда обе теории, получаемые из $\Tc$ добавлениями $\varphi$ и $\neg\varphi$ непротиворечивы: у них существуют модели, и их без ограничения мощности можно выбрать мощности $\alpha.$ Тогда они --- модели $\Tc,$ которые заведомо неизоморфны. Противоречие.
\end{proof}

Условие отсутствия конечных моделей существенно: рассмотрим теорию групп, в~ которых каждый элемент имеет порядок 2. У~неё есть конечная (группа из двух элементов) и~бесконечные. Запишем формулу $\exists x,y,z\:(x\neq y\wedge y\neq z\wedge x\neq z).$ Тогда ни её, ни её отрицание нельзя вывести из теории.

\lectmark{19 марта 2015 г.}{9 апреля 2015 г.}

\newpage

\section{Разрешимость, вычислимость, перечислимость}

Рассмотрим арифметику $PA(+,\cdot,0,S,=,\le),$ где $x\le y\leftrightarrow \exists z\:x+z=y.$ Будем изучать, какте именно подмножества натурального ряда являются определимыми. Далее, введём обозначения:

$\forall x\le t\:\varphi(x)\ardef\forall x\:(x\le t\ra\varphi(x)),$

$\exists x\le t\:\varphi(x)\ardef\exists x\:(x\le t\,\wedge\,\varphi(x)),$

где $x$ не входит в $t.$

\begin{df}
\textit{Ограниченные формулы} (класс $\Delta_0$) --- это формулы, все вхождения кванторов в которые ограничены.
\end{df}

\begin{lemma}
Если $\varphi(\stackrel{\ra}{x})\in\Delta_0,$ то существует алгоритм проверки $\NN\models\varphi(\stackrel{\ra}{n})$ для некоторого набора $n.$
\end{lemma}

В самом деле, достаточно перейти к TODO.

\begin{df}
\textit{Классы $\Sigma_n$ и $\Pi_n$.}

$\varphi\in\Sigma_1\ardef\varphi=\exists x\:\varphi_0(\stackrel{\ra}{x},\stackrel{\ra}{y}),\:\varphi_0\in\Delta_0,$

$\varphi\in\Pi_1\ardef\varphi=\forall x\:\varphi_0(\stackrel{\ra}{x},\stackrel{\ra}{y}),\:\varphi_0\in\Delta_0,$

$\varphi\in\Sigma_{n+1}\ardef\varphi=\exists x\:\varphi(\stackrel{\ra}{x},\stackrel{\ra}{y}),\:\varphi\in\Pi_n,$

$\varphi\in\Pi_{n+1}\ardef\varphi=\forall x\:\varphi(\stackrel{\ra}{x},\stackrel{\ra}{y}),\:\varphi\in\Sigma_n,$

\end{df}

Привычно полагать $\Sigma_0=\Pi_0=\Delta_0.$ Если мы находимся в~стандартной модели арифметики, то обозначаем за $\Delta^\NN_n$ те формулы, что эквивалентны как $\Sigma_n,$ так и $\Pi_n$ формуле. Это не совпадает, например, с $\Delta^{PC}_n$ --- аналогичных для исчисления предикатов!

Существуют естественные включения: $\Delta_0^{PC}\in\Delta^{PC}_1\in\Sigma^{PC}_1\cap\Pi^{PC}_1;$ $\Sigma^{PC}_1,\Pi^{PC}_1\in\Delta^{PC}_2\in\Sigma^{PC}_3\cap\Pi^{PC}_3$ и так далее (индекс $PC$ означает классы эквивалентности в логике предикатов).

Заметим, что мы даром получили и классификацию предикатов: скажем, что предикат $P\subseteq\NN^k$ лежит (например) в $\Sigma_n,$ если $P$ определим $\Sigma_n$-формулой. Аналогично

\begin{lemma}
Любая арифметическая формула эквивалентна некоторой $\Sigma_n$-формуле.
\end{lemma}
\begin{proof}
По теореме о предварённой нормальной форме. Вообще говоря, ни представление, ни $n$ не единственны (но среди них можно выделить максимальный).
\end{proof}

Основная теорема этого раздела:

\begin{theorem}[Об эквивалентности $\Sigma_1$-определимости и перечислимости; около Гёделя]
Предикат $P\subseteq\NN^k$ является $\Sigma_1$-определимым в том и только в том случае, когда $P$ перечислим.
\end{theorem}

Давайте напомним важные определения и факты:

\pt{1} $f\colon\NN^k\ra\NN^s$ \textit{вычислима,} если существует машина Тьюринга, на любом входе $<n_1\sco n_k>,$ вычисляющая $m=f(n_1\sco n_k).$ Функция $f$ может быть заданной и частично, если $\Dom(f)\subsetneq\NN^k;$ тогда на отсутствующих входах машина Тьюринга зацикливается.

\pt{2} Подмножество $P\subseteq\NN^k$ \textit{перечислимо,} если существует вычислимая функция $f,$ что область её определения равна $P.$ Можно доказать, что это эквивалентно существованию такой вычислимой $f,$ чтобы $P$ стало её областью значений, и даже такой тотальной (то есть всюду заданной) вычислимой $f$ с фиксированной областью значений (но в последнем случае нужно специально оговориться, что ещё бывает $P=\es,$ не являющееся областью значений никакой тотальной функции).

Связь определений обеспечивает замечательная \textit{теорема о графике:} Функция $f$ вычислима $\Leftrightarrow$ график $f=\{<x,y>\mid f(x)=y\}$ перечислим.

\pt{3} Множество $P$ \textit{разрешимо,} если вычислима его характеристическая функция, то есть есть алгоритм, способный проверить произвольный вход\footnote{Из $\NN^k.$} на принадлежность $P.$ Простейшая \textit{теорема Поста} гласит, что $P$ разрешима, если и только если $P$ и $\NN^k\setminus P$ одновременно перечислимы.

Оказывается, что разрешимые множества --- это $\Delta_1,$ а перечислимые совпадают с $\Sigma_1$ (это мотивация для обозначения множеств из $\Pi_1$ как \textit{коперечислимых}). Чтобы быть готовыми к доказательству нашей теоремы, введём одно понятие, следуя Гёделю.

\subsection{Примитивно рекурсивные функции}
\begin{df}
\textit{Примитивно рекурсивные функции} $f\colon\NN^k\ra\NN$ определяется по индукции. Начальные функции: $z(x)\equiv 0,\:S(x)=x+1,\:I^n_k(x_1\sco x_n)=x_k.$ Операции для построения новых:

\pt{1} Композиция: если $f,g_1\sco g_k$ --- примитивно рекурсивные, то $h(\stackrel{\ra}{x})\eqdef f(g_1(\stackrel{\ra}{x})\sco g_n(\stackrel{\ra}{x}))$ такова.

\pt{2} Примитивная рекурсия: если $g,h$ --- примитивно рекурсивные, то строим по следующим правилам.

\begin{gather}
\case
{f(0,\stackrel{\ra}{x})\:=\:g(\stackrel{\ra}{x}), &\\
f(n+1,\stackrel{\ra}{x})\:=\:h(f(n,\stackrel{\ra}{x}),n,\stackrel{\ra}{x}).}
\end{gather}
\end{df}

Приведём примеры примитивно рекурсивных функций, которые понадобятся нам в дальнейшем.

\begin{ex}

\pt{1} $f(x,y)=x+y.$ В самом деле,
\begin{gather}
\case
{f(0,y)\:=\:y, &\\
f(x+1,y)\:=\:S(f(x,y)).}
\end{gather}

\pt{2} $f(x,y)=x\cdot y.$ Почему мы можем вести рекурсию по другому аргументу?
\begin{gather}
\case
{x\cdot 0\:=0, &\\
x\cdot(y+1)\:=\:x\cdot y+x.}
\end{gather}

Дело вот в чём: если $f$ --- п. р., то $g(x,y)=f(y,x)$ тоже, ибо $g(x,y)=f(I^2_2(x,y),I^2_1(x,y))$ (вот и пригодились проекторы!). Итак, можно вести рекурсию совершенно по любой переменной.

\pt{3} $pd(x)=\case
{x-1,x>0, &\\
0,x=0.}$

\begin{gather}
\case
{pd(0)\:=0, &\\
pd(x+1)\:=\:I^3_2(pd(x),x,x).}
\end{gather}

Далее $sgn(x),\neg sgn(x),\:x-y TODO , min, max, case(x,y,z)$ и так далее.

\end{ex}

\begin{proof}

\rproof Записываем $\{\stackrel{\ra}{n}\mid\exists x_1\exists x_2\ldots\exists x_n\:\varphi(x_1\sco x_n,\stackrel{\ra}{n})\}.$ Перебираем все наборы $<m_1\sco m_k>\in\NN^k$ и проверяем формулу $\varphi(m_1\sco m_k,\stackrel{\ra}{n})\in\Delta_0$ на истинность или ложность, что достигается за конечное число шагов.

\end{proof}

\lectmark{9 апреля 2015 г.}{16 апреля 2015 г.}

TODO neg sg --- это sg с чертой над!

Остаток и частное от деления:

$\case{rm(x,0)=0\\
rm(x,y+1)=S(rm(x,y))+sg(\|x-S(rm(x,y))\|)}$

$\case{qt(x,0)=0\\
qt(x,y+1)=qt(x,y)+\neg sgn(\|x-S(rm(x,y))\|)}$

\begin{df}
Пусть $f(\stackrel{\ra}{x},y)$ --- данная функция. Определим функции $\sum\limits_{y<z(y\le z)}f(\stackrel{\ra}{x},y)$ и $\prod\limits{y<z(y\le z)}f(\stackrel{\ra}{x},y).$
\end{df}

\begin{stm}
Эти функции примитивно рекурсивны, если только $f(\stackrel{\ra}{x},y)$ примитивно рекурсивна.
\end{stm}
\begin{proof}
Положим:

$\case{h_f(\stackrel{\ra}{x},0)=0\\
h_f(\stackrel{\ra}{x},y+1)=h_f(\stackrel{\ra}{x},y)+f(\stackrel{\ra}{x},y)}.$
\end{proof}

\begin{df}
Скажем, что отношение $R\subseteq\NN^k$ примитивно рекурсивно, если функция

$\chi_R(\stackrel{\ra}{x})=\case{0,R(\stackrel{\ra}{x})\\
1,\text{иначе}}$

такова.
\end{df}

\begin{ex}
$=,<,\le,x$ делит $y,x$ делится на $y,x$ простое. TODO
\end{ex}
\begin{df}
Пусть $R\subseteq\NN^{k+1}.$ \textit{Ограниченные кванторы:}

$\exists u<v\:R(\stackrel{\ra}{x},u);\:\forall u<v\:R(\stackrel{\ra}{x},u).$
\end{df}

\begin{stm}
Если $R$ примитивно рекурсивно, то $\exists u<y\:R,\:\forall u<y\:R$ такие же.
\end{stm}
\begin{proof}
В самом деле:

$\chi_{\exists u<y\:R}(\stackrel{\ra}{x},u)=\prod\limits_{u<y}\chi_{R}(\stackrel{\ra}{x},u),$

$\chi_{\forall u<y\:R}(\stackrel{\ra}{x},u)=sg\:\sum\limits_{u<y}\chi_{R}(\stackrel{\ra}{x},u).$
\end{proof}

\begin{df}
\textit{Ограниченный $\mu$-оператор:}

$f(\stackrel{\ra}{x},z)=\mu y<z.\:R(\stackrel{\ra}{x},y)=\case{\text{наименьшее $y$ такое, что $y<z$ и $R(\stackrel{\ra}{x},y)$,если он существует,}\\
z,\text{иначе}.}$
\end{df}
\begin{stm}
Если $R$ примитивно рекурсивно, то $\mu\:y<z.\:R(\stackrel{\ra}{x},y)$ примитивно рекурсивно.
\end{stm}
\begin{proof}
Действительно: $\mu\:y<z.\:R(\stackrel{\ra}{x},y)=\sum\limits_{y<z}\prod\limits_{u\le y}\chi_R(\stackrel{\ra}{x},u).$
\end{proof}

\begin{ex}
$p_x$ --- простое число с номером $x$ (по возрастанию).

$p_0=2,\:p_{x+1}=\mu\:y<(p_x)!+1.\:(Prime(y)\wedge p_x<y).$
\end{ex}

Давайте научимся так кодировать последовательности натуральных чисел натуральными числами, чтобы естественные операции над ними сталь примитивно рекурсивными. Нам понадобится вспомогательное утверждение.

\begin{stm}
Функции $f(x,i)=(x)_i$ --- показатель степени при $p_i$ в разложении $x$ на простые множители, $lh(x)$ --- число различных простых делителей $x$ и TODO приписывание --- примитивно рекурсивны.
\end{stm}
\begin{proof}
Предъявим их разложения.

$(x)_i=\mu\:y<x.\:(p_i^y\mid x\wedge\neg p_i^{n+1}\mid x);$

$lh(x)=\sum\limits_{y\le x}\neg sg(\chi_R(x,y)),$ где $R(x,y)=Prime(y)\wedge y\mid x\wedge\neg x=0;$

$x*y=x\cdot\prod\limits{j<lh(y)}(P_{lh(x)+j})^{(y)_j}.$
\end{proof}

\begin{stm}
Примитивно рекурсивна следующая функция разбора случаев:

$f(\stackrel{\ra}{x})=\case{g_1(\stackrel{\ra}{x}),\text{ если $R_1(\stackrel{\ra}{x}),$}\\
g_2(\stackrel{\ra}{x}),\text{ если $R_2(\stackrel{\ra}{x}),$}\\
\ldots\\
g_n(\stackrel{\ra}{x}),\text{ если $R_n(\stackrel{\ra}{x}),$}}$

в которой все $g_i$ примитивно рекурсивны, а $\cup R_i=\NN^k,\:R_i\cap R_j=0\:(i\neq j),\:R_i$ --- примитивно рекурсивны.
\end{stm}
\begin{proof}
$f(\stackrel{\ra}{x})=g_1(\stackrel{\ra}{x})\cdot\neg sg(\chi_{R_1}(\stackrel{\ra}{x}))+\ldots .$
\end{proof}

\begin{df}
Совместная рекурсия: пусть $g_1,g_2,h_1,h_2$ --- примитивно рекурсивные функции. Положим $f_i(\stackrel{\ra}{x},g)=g_i(\stackrel{\ra}{x}),$

$f_i(\stackrel{\ra}{x},y+1)=h_i(\stackrel{\ra}{x},y,f_1(\stackrel{\ra}{x},y),f_2(\stackrel{\ra}{x},y)).$ Тогда $f_i$ примитивно рекурсивны $(i=1,2).$
\end{df}
\begin{proof}
TODO
\end{proof}

Следующая формула задаст нумерацию пар чисел:
TODO точки
$pair(x,y)=sg(x-.y)(x^2+2y+1)+\neg sg(x-.y)(y^2+2x).$ Порядок будет таким: $(0,0);(0,1),(1,0),(1,1);(0,2),(2,0),(1,2),(2,1),(2,2);\ldots$

Обратные к ней:
$left(0)=right(0)=0,$

$left(n+1)=\case{right(n),left(n)<right(n),\\
right(n)+1,left(n)>right(n),\\
0,left(n)=right(n),}$

$right(n+1)=\case{left(n),left(n)\neq right(n),\\
left(n)+1,left(n)=right(n).}$

Итак, разбор случаев и двойная рекурсия обеспечили нам примитивную рекурсивность.

\begin{df}
\textit{Возвратная рекурсия:}
$f_\sharp(\stackrel{\ra}{x},y)=\prod\limits{u<z}(p_u)^{f(\stackrel{\ra}{x},u)}.$

(При этом $f(\stackrel{\ra}{x},y)=(f_\sharp(\stackrel{\ra}{x},y+1))_{y+1}$.)
\end{df}

\begin{stm}
Если $h$ примитивно рекурсивна, то $f(\stackrel{\ra}{x},y)\eqdef h(\stackrel{\ra}{x},y,f_\sharp(\stackrel{\ra}{x},y))$ --- тоже.
\end{stm}
\begin{proof}
TODO
\end{proof}

Идея возвратной рекурсии --- задавать значение функции в точке, исходя не только из одного предыдущего, но и из всех предшествовавших значений. Например, последовательность Фибоначчи $(a_0=1,\:a_1=1,\:a_n=a_{n-1}+a_{n-2}(n\ge 2))$ или определение терма:

\pt{1} $Tm(t)=1,$ если $Var(t)\vee Const(t);$

\pt{2} Если $t=f(t_1\sco t_n)\wedge Fn(f^n)\wedge\forall i\in 1\sco n\: (Tm(t_i)=1),$ то $Tm(t)=1;$

\pt{3} $Tm(t)=0,$ иначе.

\lectmark{16 апреля 2015 г.}{23 апреля 2015 г.}

Мы разобрались, относительно какого богатства операций замкнуты примитивно рекурсивные отношения и функции. Мы знаем, как кодировать натуральными числами последовательности натуральных чисел\footnote{Модифицируем код, чтобы допустить в последовательности нули.}:

$S=(n_1\sco n_k)\mapsto p_0^{n_0+1}\cdot\ldots\cdot p_k^{n_k+1},$ где $p_0=2,\: p_1=3$ и т. д.; кодом пустой последовательности станет число $0.$ Кодами последовательностей являются не все натуральные числа, большие нуля, а только единица и те, все простые делители которых идут по порядку, без пропусков, начиная с $2.$ \textit{Длина} последовательности --- это $ln(s)\eqdef\mu i\le s.\:(p_i\nmid s).$

Функция $f(x)$ порождает последовательность $F(x)=(f(0)\sco f(x-1)).$ Затем можно сказать $f(n,\stackrel{\ra}{a})=g(F(n,\stackrel{\ra}{a}),n,\stackrel{\ra}{a}),:$ $f(0,\stackrel{\ra}{a})=g(\varepsilon,0,\stackrel{\ra}{a}).$

Всякая ли (всюду определённая) вычислимая функция является примитивно рекурсивной? Оказывается, нет! Классический пример:

\begin{ex}
Функция \textit{Аккермана:}

$\case{Ack(0,x)=x+2,\\
Ack(n+1,0)=Ack(n,0),\\
Ack(n+1,m+1)=Ack(n,Ack(n+1,m)).}$
\end{ex}

Тогда $Ack(1,0)=2,Ack(1,m+1)=Ack(1,m)+2,$

$Ack(2,0)=2,Ack(2,m+1)=2(Ack(2,m))+2,$ что влечёт $Ack(2,m)\ge 2^m.$ Можно доказать, что $k$-тая ветвь функции Аккермана растёт быстрее любой примитивно рекурсивной функции, в которой не более $k$ вложенных рекурсий (теорема несложна, но вычислительно неприятна). В частности, диагонализированная $Ack(n,n)$ является не-примитивно рекурсивной функцией одной переменной.

\subsection{Рекурсивные функции (в широком смысле)}

Добавим ещё один оператор построения функций из уже имеющихся --- \textit{неограниченный $\mu$-оператор.}

\begin{df}
Пусть $f$ --- тотальная функция. Положим
\begin{gather}
g(\stackrel{\ra}{a})=\mu n.\:f(n,\stackrel{\ra}{a})=0\eqdef\bcase{\min\{n\in\NN\mid f(n,\stackrel{\ra}{a})=0\},\text{ если $n$ существует,}\\
\text{не определена, иначе.}}
\end{gather}
\end{df}

\begin{stm}
$f$ --- вычислима $\Rightarrow$ $g$ --- вычислима.
\end{stm}

\begin{theorem}[Клини, об униформизации]
Существуют такие примитивно рекурсивная функция $U$ и примитивно рекурсивный предикат $T,$ что для любой (частичной) вычислимой функции $f(\stackrel{\ra}{x})$ можно подобрать число $e\in\NN,$ что $\forall\stackrel{\ra}{x}\:f(\stackrel{\ra}{a})\equiv U(\mu y.\:T(e,\stackrel{\ra}{x},y)).$
\end{theorem}

\subsection{Кодирование синтаксиса языка}

Пора научиться кодировать натуральными числами не только числа и последовательности, но и слова языка. Что нам нужно записать? $\Sigma,f^n_i,P^n_i,$ переменные $Var=\{v_0,v_1,v_2,\ldots\},$ символы $(),\wedge\neg\forall$ . Но мы сталкиваемся с проблемой: мы хотим, чтобы были <<хорошими>> следующие множества\footnote{То есть соответствующие предикаты.}: $Tm$,$Fm$,$FrVar$,$LogAx$,$Ax_T$,$Pr\,f_T(x,y)$,\\$Pr_T(x),$ где последнее есть \textit{<<$x$ доказуемо в $T$>>}. Научимся сопоставлять каждому слову его \textit{гёделев номер,} который будет гарантировать, что почти всякое из этих множеств (кроме последнего) станет примитивно рекурсивным. Сделаем что-нибудь в таком роде: $N[\forall x(x=x)]=(N[\forall],N[x],\forall[(],\ldots).$

\lectmark{23 апреля 2015 г.}{30 апреля 2015 г.}

Пусть $\Sigma$ --- не более чем счётная сигнатура, содержащая функциональные символы $\{f_i^n\},$ предикатные символы $\{R_i^n\},$ переменные $v_0,v_1,\ldots$ Например, положим $=$ как $R^2_0,$ $0$ как $f^0_0,$ $S$ есть $f^1_0$ и~так далее. Наша цель --- приписать гёделевы номера объектам языка, чтобы разным соответствовали разные натуральные числа, а~смысл слова мог бы определяться примитивно рекурсивным образом. Обозначив гёделев номер объекта $A$ как $\ulcorner A\urcorner,$ распределим номера, скажем, так:

\begin{gather}
\ulcorner v_i\urcorner\eqdef\langle 1,i \rangle\\
\ulcorner f_i^n\urcorner\eqdef\langle 2,\langle n,i\rangle\rangle\\
\ulcorner R_i^n\urcorner\eqdef\langle 3,\langle n,i\rangle\rangle\\
\ulcorner \neg\urcorner\eqdef\langle 4,0 \rangle\\
\ulcorner \ra\urcorner\eqdef\langle 4,1 \rangle\\
\ulcorner \forall\urcorner\eqdef\langle 4,2 \rangle\\
\ulcorner s\urcorner > 4\text{ для любого символа $s$.}
\end{gather}

Скрытая идея: мы не хотим, чтобы коды символов пересекались с~кодами составленных из них выражений. В качестве примера, $\ulcorner 0\urcorner\:=\:\ulcorner f_0^0\urcorner\:=\:\langle 2,\langle 0,0 \rangle\rangle.$

Для записи термов применим префиксную запись (чтобы избавиться от скобок):

\begin{gather}
\ulcorner f_i^n(t_1\sco t_n)\urcorner\eqdef\langle\ulcorner f_i^n\urcorner,\ulcorner t_1 \urcorner\sco\ulcorner t_n\urcorner\rangle\\
\ulcorner R_i^n(t_1\sco t_n)\urcorner\eqdef\langle\ulcorner R_i^n\urcorner,\ulcorner t_1 \urcorner\sco\ulcorner t_n\urcorner\rangle.
\end{gather}

В~частности, $\ulcorner(A\ra B)\urcorner=\langle\ulcorner\ra\urcorner,\ulcorner A\urcorner,\ulcorner B\urcorner\rangle,$ $\ulcorner\neg A \urcorner=\langle\ulcorner\neg\urcorner,\ulcorner A\urcorner\rangle,$ $\ulcorner\forall v_i A\urcorner=\langle\ulcorner\forall\urcorner,\ulcorner v_i\urcorner,\ulcorner A\urcorner\rangle.$ Довольно понятно, как разбирать выражение по его коду и понимать, чем оно является. Оказывается, это примитивно рекурсивные процедуры!

\begin{ex}

Например, рассмотрим характеристическую функцию $Tm(x)$ и~выпишем явно функцию проверки <<$x$ есть гёделев номер терма>>:

\pt{1} Вернуть $0,$ если $\exists i\le x\: x=\langle 1,i \rangle$

\pt{2} Вернуть $0,$ если $Seq(x)\wedge\exists n\le x\: lh(x)=n+1\wedge\exists i\le x\:(x)_0=\langle 2,\langle n,i \rangle\rangle\wedge\forall j<:Tm((x)_{j+1})=0,$

\pt{3} Вернуть $1,$ иначе.

То, что смысл верен, ясно: мы проверяем, что либо $x$ --- номер переменной, либо кодирует последовательность из функционального символа и~термов. Примитивная рекурсивность выполняется в~силу того, что наше определение построено по возвратной рекурсии.

\end{ex}

Научимся ещё проверять, что $x$ --- код атомарной формулы $(AtFm(x))$: это бывает, если $Seq(x)\wedge\exists n,i\le x((x)_0=\langle 3,\langle n,i \rangle\rangle\wedge lh(x)=n+1\wedge\forall j<n\:Tm((x)_{j+1})=0).$

\begin{df}
\textit{<<$x$ есть гёделев номер формулы>>:} $Fm(x).$

\pt{1} Вернуть $0,$ если $AtFm(x)=0,$

\pt{2} Вернуть $0,$ если $Seq(x)\wedge lh(x)=2\wedge(x)_0=\ulcorner\neg\urcorner\wedge Fm((x)_1)=0,$

\pt{3} Вернуть $0,$ если $Seq(x)\wedge lh(x)=3\wedge(x)_0=\ulcorner\ra\urcorner(x)_1,(x)_2\in Fm\footnote{Договоримся писать вместо $Fm(x)\wedge Fm(y)$ символ <<$x,y\in Fm,$>> и аналогичные.},$

\pt{4} Вернуть $0,$ если $Seq(x)\wedge lh(x)=3\wedge(x)_0=\ulcorner\forall\urcorner\wedge\exists i\le x\:(x)_1=\langle 1,i \rangle\wedge (x)_2\in Fm,$

\pt{5} Вернуть $1,$ иначе.

\end{df}

\begin{df}
\textit{Нумерал} $\underline{n}$ натурального числа $n$ --- это терм вида $S(S\ldots S(0))$ $n$ раз. Положим $nm(x)\eqdef\ulcorner\underline{x}\urcorner;$ она рекурсивно определяется как:

\begin{gather}
\case{nm(0)=\ulcorner 0 \urcorner,\\
nm(n+1)=\langle\ulcorner S \urcorner,nm(n)\rangle}.
\end{gather}

$Num(x)\eqdef\exists n\le x\:x=nm(n).$

\end{df}

Переходим к~самому технически тонкому моменту всей конструкции.

\begin{df}
\textit{Подстановка:} $Sub(x,i,y)$ <<результат подстановки в $x$ выражения $y$ вместо свободных вхождений переменной $v_i$>>. То есть, если $x=\ulcorner\varphi\urcorner,$ то выполняется $Sub(\ulcorner\varphi\urcorner,i,\ulcorner t \urcorner)=\ulcorner\varphi[t/v_i]\urcorner.$

\pt{1} $Sub(\ulcorner v_i \urcorner,i,y)=y,$

\pt{2} $Sub(\ulcorner v_j \urcorner,i,y)=\ulcorner v_j \urcorner,$ если $j\neq i,$

\pt{3} $Sub(\ulcorner f_j^n(t_1\sco t_n)\urcorner,i,y)=\langle\ulcorner f_j^n\urcorner,Sub(\ulcorner t_1 \urcorner,i,y)\sco Sub(\ulcorner t_n \urcorner,i,y)\rangle,$

\pt{4} $Sub(\ulcorner R_j^n(t_1\sco t_n)\urcorner,i,y)=\langle\ulcorner R_j^n\urcorner,Sub(\ulcorner t_1 \urcorner,i,y)\sco Sub(\ulcorner t_n \urcorner,i,y)\rangle,$

\pt{5} $Sub(\ulcorner\neg\varphi\urcorner,i,y)=\langle\ulcorner\neg\urcorner,Sub(\ulcorner\varphi\urcorner,i,y)\rangle,$

\pt{6} $Sub(\ulcorner\ra\varphi\urcorner,i,y)=\langle\ulcorner\ra\urcorner,Sub(\ulcorner\varphi\urcorner,i,y)\rangle,$

\pt{7} $Sub(\ulcorner\forall v_j\varphi\urcorner,i,y)=\case{\ulcorner\forall v_i\varphi\urcorner,\text{ если $i=j,$}\\
\langle\ulcorner\forall\urcorner,\ulcorner v_j \urcorner,Sub(\ulcorner\varphi\urcorner,i,y)\rangle,\text{ если $i\neq j,$}}$

\pt{8} $0$ (например), иначе.
\end{df}

Теперь мы научились проверять свободность вхождения: это неизменность при подстановке.

\begin{df}

$Free(x,y)$ <<$x$ есть гёделев номер переменной, имеющей свободное вхождение в $y$>>:

$\exists i\le x\:(x=\ulcorner v_i \urcorner=\langle 1,i \rangle\wedge Sub(y,i,\ulcorner 0 \urcorner)\neq y).$

$Tm(t)\wedge Free(x,t)$ <<переменная $x$ входит в $t$>>.

\end{df}

\begin{exer}

Возвратной рекурсией по построению $y$ выпишите аналогичным образом определение $SubFm(x,y)$ <<$x$ есть подформула $y$>>.

\end{exer}

\begin{df} \textit{(Менее формальное):}
$Sbnt(t,i,\varphi)\quad$<<$t$ подстановочен в $\varphi$ вместо свободного вхождения переменной $v_i$>>:

$Sbnt(t,i,\varphi)=0\leftrightarrow Tm(t)\wedge Var(v_i)\wedge Fm(\varphi)\wedge\{\text{\:одно из нижеперечисленного:}\}$

\pt{1} $AtFm(\varphi);$

\pt{2} $\exists\varphi_1,\varphi_2<\varphi\:\varphi=(\varphi_1\wedge\varphi_2)\footnote{Неформальность --- в отождествлении логических связок с примитивно рекурсивными функциями, вычисляющими их номера.}\wedge Sbnt(t,i,\varphi_1)=0\wedge Sbnt(t,i,\varphi_2)=0;$

\pt{3} $\exists\varphi_1<\varphi\:\varphi=(\neg\varphi_1)\wedge Sbnt(t,i,\varphi_1)=0;$

\pt{4} $\exists\psi<\varphi\:\varphi=P(x,v_i)\wedge (j=i\vee(Sbnt(t,i,\psi)\wedge\neg(v_j\in Var(t)\wedge Free(v_i,\psi)))).$

$LogAx(x)=\bigvee\limits_{i=1}^{k}Ax_i(x),$

где, например, $Ax_1(x)=\exists a,b\le x\:(a,b\in Fm\wedge x=\langle\ulcorner\ra\urcorner,a,\langle\ulcorner\ra\urcorner,b,a\rangle\rangle)$

\ldots

$Ax_{10}(x)=\exists y\le x\exists i\le x\:x=\ulcorner\forall v_i\varphi\;\ra\;\varphi[t/v_i]\urcorner,$ где $t$ подстановочно вместо $v_i$ в $\varphi,\wedge Tm(t)\wedge Fm(y) \wedge x=\langle\ulcorner\ra\urcorner,\langle\ulcorner\forall\urcorner,\ulcorner v_i \urcorner,y\rangle,Sub(y,i,t)\rangle.$

Имеет смысл также определить выведение через modus ponens:

$MP(x,y,z)\eqdef(y=\langle\ulcorner\ra\urcorner,x,z\rangle\wedge x,y,z\in Fm),$

представимость формулы в виде квантора всеобщности от другой:

$Gen(x,i,y)\eqdef(y=\langle\ulcorner\forall\urcorner,\ulcorner v_i \urcorner,x\rangle);$

теперь мы можем установить \textit{<<$y$ есть вывод $x$ в логике предикатов>>:}

$Prf_{PC}(x,y)=Seq(y)\wedge\forall i<lh(y):Fm((y)_i)\wedge\forall i<lh(y)\:(LogAx((y)_i)\vee\exists j,k<i\:MP((y)_j,(y)_k,(y)_i)\vee\exists p<y\exists j<i\:Gen((y)_j),p,(y)_i).$

\end{df}

\lectmark{30 апреля 2015 г.}{14 мая 2015 г.}

Подведём итоги, чего именно мы добились.

\pt{1} Примитивно рекурсивные функции.

\pt{2} Арифметизация синтаксиса.

\pt{3} Примитивная рекурсивность предикатов выводимости из гипотез $Prf_{PC}(y,x)$ и в языке $Pr_{PC}(x)=\exists y\:Prf_{PC}(y,x).$

\begin{df}
Пусть $T$ --- теория в арифметическом языке. Отношение $P(\stackrel{\ra}{x})\subseteq\NN^k$ \textit{разрешимо} в $T,$ если существует формула $\varphi(\stackrel{\ra}{x}),$ что $\forall\stackrel{\ra}{n}$

\begin{gather}
P(\stackrel{\ra}{n})\Ra T\vdash\varphi(\stackrel{\ra}{\underline{n}})\\
\neg P(\stackrel{\ra}{n})\Ra T\vdash\neg\varphi(\stackrel{\ra}{\underline{n}}).
\end{gather}
\end{df}

\begin{df}
Функция $f(\stackrel{\ra}{x})$ \textit{представима} в $T,$ если существует $\varphi(\stackrel{\ra}{x},y)$ такая, что:
\begin{gather}
f(\stackrel{\ra}{n})=m\Ra T\vdash\varphi(\stackrel{\ra}{\underline{n}},\underline{m})\text{ и}\\
T\vdash\forall y(\varphi(\stackrel{\ra}{\underline{n}},y)\ra\:y=\underline{m}).
\end{gather}
\end{df}

Но наиболее естественным и идейным (не техническим) является такое понятие:

\begin{df}
Функция \textit{доказуемо рекурсивна} в $T,$ если $\exists\varphi(\stackrel{\ra}{x},y)\in\Sigma_1:$
\begin{gather}
f(\stackrel{\ra}{n})=m\Leftrightarrow \NN\models\varphi(\stackrel{\ra}{\underline{n}},\underline{m})\text{ и}\\
T\vdash\forall\stackrel{\ra}{x}\:\exists !y\:\varphi(\stackrel{\ra}{x},y).
\end{gather}
\end{df}

\begin{theorem}

\pt{1} Любая ПРФ $\Sigma_1$-определима в $\NN;$

\pt{2} Любая ПРФ доказуема рекурсивно в $PA$ (и даже в $I\Sigma_1$);

\pt{3} В конечно аксиоматизируемой \textit{арифметике Робинсона} $Q,$ являющейся $PA$ без схемы индукции, но с добавленной аксиомой $\forall y\:(y\neq 0\ra\exists x\:y=S(x))$ разрешимы все ПР (и даже рекурсивные) отношения и представимы все ПРФ.
\end{theorem}

Для доказательства этих фактов нам понадобится другое яркое достижение Гёделя --- иной вариант кодирования последовательностей.

\begin{stm}
Существует такая (тотальная) $\Sigma_1$-определимая функция $\beta(x,y,z),$ что

\begin{gather}
\forall\langle k_0\sco k_n\rangle\:\exists a,b:\:\forall i\le n\:\beta(a,b,i)=k_i.
\end{gather}
\end{stm}

Её легко указать: $\beta(x,y,z)$ --- это остаток от деления $(z+1)\cdot y+1$ на $x.$ Её представляет следующая простая арифметическая формула:

$\beta(x,y,z)=u\ardef\exists q\:((z+1)\cdot y+1=qx+u\wedge u<x)\footnote{Запись <<$x<y$>> означает лишь, что $\exists z\:x+S(z)=y.$}.$

Поверим без доказательства: в теории $I\Sigma_1\vdash\forall x,y,z\:\exists !u\:\beta(x,y,z)=u.$

Положим $m=max(n,k_0\sco k_n),$ $c=m!$ Выпишем последовательность $u_0\sco u_n,$ где $u_i\eqdef c(i+1)+1.$

\begin{stm}
НОД$(u_i,u_j)=1,$ если $i\neq j.$
\end{stm}
\begin{proof}
В самом деле: пусть $p\mid u_i,p\mid u_j.$ Тогда $p\mid(u_i-u_j)=c(i-j).$ Не может быть, чтобы $p\mid c,$ ибо в этом случае $p\mid u_i$ и $p\mid(u_i-1),$ что невозможно; значит, $p\mid(i-j).$ Но $o<i-j\le n\le m,$ откуда $(i-j)\mid m!=c.$ Итак, опять $p\mid c,$ и противоречие. Значит, эти числа взаимно просты.
\end{proof}

Теперь в игру вступает

\begin{theorem}[Китайская теорема об остатках]
$\forall k_0\sco k_n\:\exists b<u_0\sco u_n,$ что $\forall i\le n\:b\equiv k_i\pmod{u_i}.$
\end{theorem}

$k_i<u_i,$ поэтому $k_i$ есть остаток от деления $b$ на $u_i,$ мы получаем $\beta(b,c,i)=rm(b,u_i)=k_i.$

Докажем первый пункт теоремы.
\begin{proof}

\pt{1} $I_k^n,S,Z(x)\equiv 0.$ $S(x)=y$ $x=x\wedge y=0$ $I_k^n=y\leftrightarrow y=x_k.$

\pt{2} Композиция: $f(g(x))=y.$

$g(x)=y,f(u)=v\quad\varphi(x,y),\psi(u,v)\in\Sigma_1\quad\exists z(g(x)=z\wedge f(z)=y).$

\pt{3} Примитивная рекурсия:

$\case{f(0,a)=g(a),\\
f(n+1,a)=h(f(n,a),n,a).}$

\begin{gather}
f(n,a)=y\Leftrightarrow\\
\exists b,c\:\beta(b,c,0)=g(a)\wedge\forall i<n\:\beta(b,c,i+1)=h(\beta(b,c,i),i,a)\wedge\beta(b,c,n)=y\\
\Leftrightarrow\exists b,c,u,v,w:\:\beta(b,c,0)=u=g(0)\wedge\forall i<n\:\beta(b,c,i)=v\wedge h(v,i,a)=w\wedge\beta(b,c,i+1)=w\wedge\beta(b,c,n)=y.
\end{gather}

Для приведения к $\Sigma_1$-виду осталось стереть неограниченные кванторы, сославшись на общий принцип ($\Sigma_1$-ограниченности): $\forall i<n\exists w\:\varphi(i,w)\leftrightarrow\exists z\forall i<n\exists w\le z\:\varphi(i,w).$

\end{proof}

%На самом деле, всего доказанного нами уже достаточно, чтобы доказать первую теорему Гёделя о неполноте: множество всех истинных арифметических формул не может быть перечислимо, потому что тогда было бы перечислимым и её дополнение, состоящее из всех ложных. Их объединение разрешимо, но существует перечислимое, но не разрешимое множество. Записав его $\Sigma_1$-формулой в арифметике, получаем неразрешимость.%

\lectmark{14 мая 2015 г.}{21 мая 2015 г.}

\begin{lemma}

\pt{1} Всякая $\Delta_0$-формула разрешима в арифметике Робинсона $Q;$

\pt{2} Всякая вычислимая формула представима в $Q;$

\pt{3} $Q$ $\Sigma_1$-полна.
\end{lemma}

\begin{proof}

\pt{1} Индукцией по построению $A.$ Рассмотрим сначала $t_1(\stackrel{\ra}{x})=t_2(\stackrel{\ra}{x}).$

Докажем вспомогательный факт о том, что $t(\stackrel{\ra}{m})=n$ влечёт $\vdash_Q t(\stackrel{\ra}{\underline{m}})=\underline{n},$ а $t(\stackrel{\ra}{m})\neq n$ влечёт $\vdash_Q t(\stackrel{\ra}{\underline{m}})\neq\underline{n}.$

В самом деле: TODO.

Для булевых связок разрешимость в $Q$ легко проносится через формулу: $\models A\wedge B\Ra \models A \bigwedge \models B\Ra\vdash_Q A \bigwedge \vdash_Q B \Ra \vdash_Q A\wedge B$ и т. д.

Интерес представляет случай с квантором: $\nvDash\forall x\le t A(x)\Ra n\le t\bigwedge\nvDash A(\underline{n})\Ra\vdash_Q\underline{n}\le t,\:\vdash_Q\neg A(\underline{n})\Ra\vdash_Q\neg\forall x\le t A(x).$ Обратно, пусть $\models\forall x\le t A(x).$ Тогда $t=n,\:\models\forall x\le n A(x)\Ra A(0)\wedge\ldots\wedge A(\underline{n})\Ra A(0)\wedge\ldots\wedge A(\underline{n}).$ Почему отсюда следует желанное $\forall x\le\underline{n}A(x)?$ Это происходит из того факта, что в $Q$ выводится $\forall x\:(x\le\underline{n}\leftrightarrow(x=0\vee\ldots\vee x=n)).$ Индукцией по $n:$ обоснуем, что $x\le 0\lra x=0,$ $x\le S\underline{n}\lra x\le\underline{n}\vee x=S\underline{n}.$ Теперь вспоминаем, что отношение <<меньше или равно>> мы задаём как $x\le y\lra\exists z\:x+z=y.$ Пусть $x+z=0;$ тогда либо $z=0$ (и $x=0$), либо $z=Su$ (и $x+z=S(x+u)\neq 0$) и т. д.

\pt{3} Это следует из пункта 1: пусть $A\in\Sigma_1;$ $\models A\Ra\vdash_Q A.$ $\models\exists\stackrel{\ra}{x}A(\stackrel{\ra}{x})\:(A\in\Delta_0);$ $\models(\stackrel{\ra}{\underline{n}})\Ra\vdash_Q A(\stackrel{\ra}{\underline{n}}),$ $\vdash_{PC}A(\stackrel{\ra}{\underline{n}})\ra\exists\stackrel{\ra}{x}A(\stackrel{\ra}{x}).$
\end{proof}

\latestlectmark{21 мая 2015 г.}
%\begin{prooftree}
%\AxiomC{$\Gamma,B\vdash A$}
%\UnaryInfC{$\Gamma\vdash B\ra A$}
%\end{prooftree}
%\begin{center}
%\begin{tabular}{ll}
%Название&Длина\\
%\ttfamily мясо&1828\\
%\ttfamily кирпич&949\\
%\ttfamily &s3949\\
%\end{tabular}
%\end{center}

\newpage

\begin{thebibliography}{999}
\bibitem[ВШ1]{ВШ1} Н. Верещагин, А. Шень. Начала теории множеств. М.: Издательство МЦНМО, 2008.
\bibitem[ВШ2]{ВШ2} Н. Верещагин, А. Шень. Языки и исчисления. М.: Издательство МЦНМО, 2008.
\bibitem[ВШ3]{ВШ3} Н. Верещагин, А. Шень. Вычислимые функции. М.: Издательство МЦНМО, 2008.
\bibitem[Мен]{Мен} Э. Мендельсон. Введение в математическую логику. М.: Наука, 1984.
\bibitem[Mar]{Mar} David Marker. Model Theory: an Introduction. 2002.
\end{thebibliography}

\trail
\end{document} 