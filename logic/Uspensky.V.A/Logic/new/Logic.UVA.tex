\documentclass[a4paper]{article}
\usepackage{dmvn}

% Sign of sans-serif 'K' x-scaled(-1) by MetaPost to make quantor sign.
\newcommand{\quantor}{\raisebox{-1pt}{\epsfbox{quantor.1}}}

% Small proof step
\newcommand{\sps}{\noindent$\maltese$ }

% TODO Command to #include comments in TOC and in plain text
\newcommand{\todo}[1]{\par\texttt{TODO: #1!}\par\addcontentsline{toc}{subsubsection}{TODO: \texttt{#1}}}

% def... to be inserted into package later
\DeclareMathOperator{\Obj}{Obj}
\newcommand{\llec}{\preccurlyeq}
%\newcommand{\sv}{\bw\vee\ldots\bw\vee}
\newcommand{\e}{,\,}

\makeindex

\begin{document}
\dmvntitle{Курс лекций по}{математической логике}{Лектор\т Владимир Андреевич Успенский}
{I курс, 2 семестр, поток математиков}{Москва, 2003 г.}

\pagebreak
\tableofcontents

\pagebreak

\section*{Введение}

\subsection*{Предисловие}
Настоящее издание представляет собой записи лекций В.\,А.\,Успенского.
Убедительная просьба ко всем читателям: в случае обнаружения ошибок немедленно сообщайте автору на \dmvnmail{}
или загляните на \dmvnwebsite{} и посмотрите, где можно достать в настоящее
время самого автора. Все пожелания и предложения по поводу оформления и содержания документа будут
обязательно приняты к сведению. Последнее обновление: \сегодня~года.

\subsection*{Слова благодарности}
Для начала хотелось бы поблагодарить того, кто изначально набирал эти лекции. К сожалению, История
не сохранила ни \TeX\д овских исходников его лекций, ни имени. Так что данный материал\т улучшенная
версия старого документа.

\subsection*{Принятые в тексте соглашения и используемые сокращения}

\begin{points}{-3}
\item Множество натуральных чисел в математической логике принято начинать с нуля:
      $\N \bw= \hc{0,1,2,3,\dots}$.
\end{points}

\begin{thebibliography}{2}
  \setlength\itemsep{-3pt}
  \bibitem{lect} \emph{Конспекты лекций В.А.\,Успенского по математической логике.} МГУ, 2003.
  \bibitem{vsst} Н.К.\,Верещагин, А.\,Шень. \emph{Лекции по математической логике и теории алгоритмов.
                 Начала теории множеств.} М.: МЦНМО, 2000.
  \bibitem{vslc} Н.К.\,Верещагин, А.\,Шень. \emph{Лекции по математической логике и теории алгоритмов.
                 Языки и исчисления.} М.: МЦНМО, 2000.
  \bibitem{vscf} Н.К.\,Верещагин, А.\,Шень. \emph{Лекции по математической логике и теории алгоритмов.
                 Вычислимые функции.} М.: МЦНМО, 2000.
\end{thebibliography}

\pagebreak

Математическая логика может быть условно разделена на три части:
\begin{items}{-3}
  \item Математическая логика (в более узком смысле)
  \item Теория алгоритмов
  \item Основание математики
\end{items}

\section{Языки и исчисления}

\subsection{Логика высказываний}

\subsubsection{Основные понятия}

Для начала введём несколько понятий, которые постоянно будут использоваться в нашем курсе.

\index{Алфавит}
\begin{df}
  \emph{Алфавит}\т произвольный конечный непустой набор символов. Можно считать, что алфавит\т произвольное
  непустое конечное множество.
\end{df}

\index{Текст}
\begin{df}
  \emph{Текст}\т любая конечная последовательность символов некоторого алфавита.
\end{df}

\index{Слово}
\begin{df}
  \emph{Слово}\т любая конечная последовательность символов некоторого алфавита. Итак, с точки зрения логики,
  слово и текст\т это одно и то же. Пустое слово обозначается буквой~$\La$.
\end{df}

\begin{note}
  Иногда возникает потребность в рассмотрении счётных алфавитов, но в нашем курсе этого не будет.
\end{note}

\begin{imp}
  Множество слов в конечном алфавите счётно.
\end{imp}


\index{Алгоритм}
\begin{df}
  \emph{Алгоритм}\т одно из неопределяемых понятий в математике. Разговор о том, что это такое, у нас
  ещё впереди, однако одним из требований является то, что алгоритм\т это текст, записанный
  в некотором алфавите.
\end{df}

\begin{imp}
  Множество алгоритмов счётно.
\end{imp}

\begin{problem}
  Доказать, что множество функций $f\cln \N \ra \N$ несчётно.
\end{problem}

\begin{imp}
  Существуют функции $f\cln \N\ra\N$, для которых нельзя построить алгоритм~$\Ac$, принимающий на вход
  $x \in \N$ и выдающий на выходе~$f(x)$, \те вычисляющий функцию~$f$.
\end{imp}

\index{Высказывание}
\begin{df}
  \emph{Высказывание} является неопределяемым понятием. Вместо определения скажем, что
  высказывание\т это утверждение, которое может быть либо истинным, либо ложным.
  Высказывания обычно обозначаются буквами $A,B\sco Z, A_1, B_1\sco Z_1,\ldots$.
\end{df}

\index{Истинностное значение}
\index{Истина}
\index{Ложь}
\index{Высказывание!истинное}
\index{Высказывание!ложное}
Если высказывание истинно, то говорят, что его истинностное значение\т <<истина>>,
в противном случае\т <<ложь>>. Для обозначения истинностных значений используются следующие
значки:
\ctab{|c|c|}{
\hline \textbf{Истинные} & \textbf{Ложные} \\
\hline   И       &   Л               \\
\hline   T       &   F               \\
\hline   true    &   false           \\
\hline   $\top$  &   $\bot$          \\
\hline   1       &   1               \\
\hline}
Истинностное значение высказывания $A$ обозначается через $|A|$.

\begin{ex}
  <<14 июля 2004 года\т среда>>\т истинное высказывание.
  <<14 июля 2004 года\т вторник>>\т ложное высказывание.
  <<Среда ли 14 июля 2004 года?>>\т не высказывание.

  Ещё один замечательный пример утверждения, не являющегося высказыванием, таков:
  \cent{\framebox{Всё, что написано в этой рамке, есть ложь}}
  Действительно, попытка определить истинностное значение этого <<высказывания>> приводит к противоречию:
  если то, что написано, истинно, то это противоречит смыслу слов в рамке. То же противоречие
  возникает, если предположить, что оно ложно.
\end{ex}

\index{Высказывания!равносильные}
\index{Высказывания!эквивалентные}
\begin{df}
  Высказывания с одинаковыми истинностными значениями называются \emph{равносильными}, или
  \emph{эквивалентными}. Обозначение: $A \equiv B$.
\end{df}

\index{Логические связки}
\index{Связки логические}
\index{Конъюнкция}
\index{Дизъюнкция}
\index{Отрицание}
\index{Импликация}
Высказывания можно объединять, используя \emph{логические связки}: \emph{отрицание} (<<НЕ>>, $\neg$),
\emph{конъюнкцию} (<<И>>, $ \& $), \emph{дизъюнкцию} (<<ИЛИ>>, $\vee$) и \emph{импликацию}
(<<ЕСЛИ\dots ТО>>, $\Ra$). Их определения приведены в следующих таблицах истинности:
\cent{
\tab{||c||c||}{
\hline $A$ & $\neg A$\\
\hline $0$ & $1$     \\
\hline $1$ & $0$     \\
\hline}
\quad
\tab{||c|c||c|c|c||}{
\hline $A$ & $B$ & $A\& B$ & $A \vee B$ & $A \Ra B$\\
\hline $0$ & $0$ & $0$     & $0$        & $1$      \\
\hline $0$ & $1$ & $0$     & $1$        & $1$      \\
\hline $1$ & $0$ & $0$     & $1$        & $0$      \\
\hline $1$ & $1$ & $1$     & $1$        & $1$      \\
\hline
}}

\index{Закон!логики}
\index{Логический закон}
\begin{df}
  \emph{Закон логики}\т такое высказывание, которое истинно вне зависимости от высказываний,
  входящих в него.
\end{df}

\index{Приоритет логических связок}
Вообще говоря, в логических выражениях нужно везде писать скобки. Однако часто скобки не пишут,
пользуясь правилами приоритета логических связок. Так, отрицание имеет наивысший приоритет,
затем следует конъюнкция и лишь потом\т дизъюнкция. Что касается импликации, то она имеет низший
приоритет. Кроме того, необходимо помнить, что $\vee$ и $\&$ ассоциативны, а $\Ra$\т нет.

\index{Ассоциативность}
\begin{problem}
  Проверьте справедливость утверждений относительно ассоциативности. Указание: доказательство
  ассоциативности провести для трёх высказываний, а затем по индукции обобщить на произвольное
  количество.
\end{problem}

\begin{ex}
  $A \vee B \& C \Ra D \equiv \Br{\br{A \vee (B \& C)} \Ra D}$,
  а выражение $A \Ra B \Ra C$ не имеет смысла. Правильная запись\т $\br{(A\Ra B) \Ra C}$ или
  $\br{A \Ra (B\Ra C)}$, причём это неэквивалентные формулы.
\end{ex}

\begin{note}
  Иногда для обозначения конъюнкции используют знак $\wg$, а для обозначения отрицания\т черту сверху.
  Так, $A \wg B \equiv A \& B$, а $\neg A \equiv \ol{A}$.
\end{note}

\index{Закон!Де Моргана}
\begin{stm}
  Справедливы следующие законы логики:
  \begin{items}{-3}
    \item $\ol{\ol{A}} \equiv A$\т закон снятия двойного отрицания.
    \item $\ol{A \& B} \equiv \ol{A} \vee \ol{B}$, \; $\ol{A \vee B} \equiv \ol{A} \& \ol{B}$\т законы Де Моргана.
    \item $A \& B \equiv \ol{\ol A \vee \ol B}$, \; $A \vee B \equiv \ol{\ol A \& \ol B}$\т выражения
          для конъюнкции и дизъюнкции.
    \item $A \Ra B \equiv \ol A \vee B$\т выражение для импликации.
  \end{items}
\end{stm}
\begin{proof}
  Чтобы доказать любую из этих формул, достаточно проверить её для всех возможных истинностных значений
  высказываний, входящих в неё. Например, докажем, что $\ol{\ol A} \equiv A$. Если $A$ истинно,
  то $\ol A$ ложно, и потому $\ol{\ol A}$ истинно. Если же $A$ ложно, то $\ol A$ истинно, поэтому
  $\ol{\ol A}$ ложно. Аналогично доказываются все остальные формулы.
\end{proof}

Из соотношений, полученных выше, мы видим, что на самом деле можно обойтись всего двумя логическими связками,
например, конъюнкцией и отрицанием, а остальные\т дизъюнкцию и импликацию\т можно выразить через первые две.

\begin{problem}
  Выразить $\vee$ и $\&$ через $\neg$ и $\Ra$.
\end{problem}

\begin{problem}
  Доказать, что нельзя полностью избавиться от отрицания в логических выражениях,
  не вводя других логических связок и не используя импликацию.
\end{problem}

\subsubsection{Язык логики высказываний}

В предыдущем разделе уже использовались термины <<формула>>, <<выражение>> \итп, однако
не были даны точные определения. Настало время исправить этот недостаток и строго определить
\emph{язык логики высказываний}.

Мы уже договорились, что высказывательные переменные мы обозначаем латинскими заглавными буквами.
Алфавитом языка будет следующий набор: $\bc{(,\,),\,\&,\,\vee,\,\Ra,\,\neg}$.

\index{Формула}
Теперь следует определить, что такое формула. Это понятие вводится индуктивно.

\begin{df}
  \begin{items}{-3}
    \item Каждая высказывательная переменная есть формула.
    \item Если $\al$\т формула, то $\ol{\al}$\т тоже формула.
    \item Если $\al$ и $\be$\т формулы, то $(\al \& \be)$, $(\al \vee \be)$, $(\al \Ra \be)$\т тоже формулы.
  \end{items}
\end{df}

Приведём без доказательства теорему, которая обосновывает законность вычисления значения формулы,
построенной таким образом.

\index{Теорема!о главном знаке}
\begin{theorem}[О главном знаке]
  Если $\al$\т формула, то обязательно имеет место один из вариантов:
  \begin{items}{-3}
    \item $\al$\т высказывательная переменная.
    \item $\al = \ol{\be}$.
    \item $\al = \be \& \ga$.
    \item $\al = \be \vee \ga$.
    \item $\al = \be \Ra \ga$.
  \end{items}
  При этом формулы $\be$ и $\ga$ определены однозначно.
\end{theorem}

\index{Формула!безымпликативная}
\begin{df}
  Формула называется \emph{безымпликативной}, если она не содержит знаков импликации.
\end{df}

\index{Формула!нормальный вид}
\index{Нормальный вид формулы}
\index{Формула!нормальная форма}
\begin{df}
  Формула имеет \emph{нормальный вид (нормальную форму)}, если под каждым знаком отрицания находятся только
  высказывательные переменные.
\end{df}

\index{Теорема!о приведении формулы к нормальному виду}
\begin{theorem}
  Каждая формула приводится к нормальному виду.
\end{theorem}
\begin{proof}
  Сначала приводим формулу к безымпликативной форме, заменяя импликацию на её выражение
  через отрицание и дизъюнкцию. Затем раскроем все скобки, используя законы Де Моргана.
  Очевидно, что после этого формула будет приведена к нормальному виду.
\end{proof}

Обозначим через $\B$ множество $\hc{T, F} = \hc{0,1}$.

\index{Логическая функция}
\index{Функция!логическая}
\begin{df}
Функции вида $f\cln \B^n\ra \B$ называются $n$\д \emph{местными логическими функциями}.
\end{df}

Рассмотрим один пример, который оправдывает вводимые ниже обозначения.
Рассмотрим уравнение $x^2 \bw+ y^2\bw=1$. Спросим себя, что задаёт это уравнение?
Если переменными в нём являются только $x$ и $y$, то это окружность. Но с тем же успехом
можно подумать, что это уравнение цилиндра в $\R^3$, параллельного оси $z$.
Хотелось бы исключить данного рода разночтения. Для этого придуманы специальные
$\la$\д обозначения.

\index{$\la$\д обозначения}
Правила записи $\la$\д обозначений таковы:
\cent{\tab{|c|c|c|c|}{\hline $\la$ & список переменных & выражение & подстановка переменных \\ \hline}}

\begin{ex} Возьмём выражение $y + x^2$ и рассмотрим его различные $\la$\д записи:
\cent{\tab{|c|c|}{
\hline \textbf{Запись} & \textbf{Значение} \\
\hline $\la\, xy\quad y + x^2(3,5)$ & $3 + 5^2$ \\
\hline $\la\, xy\quad y + x^2(5,3)$ & $5 + 3^2$ \\
\hline $\la\, zyuxv\quad y + x^2(3,5)$ & не определено \\
\hline $\la\, zyuxv\quad y + x^2(3,0,5,8,11)$ & $0 + 8^2$ \\
\hline $\la\, ztuxv\quad y + x^2(3,0,5,8,11)$ & $y + 8^2$ \\
\hline}}
\end{ex}

Мы видим, что $\la$\д обозначения позволяют определить для каждого выражения
некоторую функцию.

\index{Присоединённая функция}
\index{Функция!присоединённая}
\begin{df}
Функция, задаваемая $\la$\д обозначением некоторой формулы, называется
\emph{присоединённой} к данной формуле.
\end{df}

\index{Литерал}
\begin{df}
\emph{Литералом} называется высказывательная переменная или её отрицание.
\end{df}

\index{Конъюнкция!формул}
\index{Дизъюнкция!формул}
\begin{df}
Формула вида $\al_1\sa \al_n$, где $\al_i$\т формулы, называется \emph{конъюнкцией} формул $\al_1\sco \al_n$.
Дизъюнкция определяется аналогично с заменой $\&$ на $\vee$.
\end{df}

\begin{df}
Пусть $A$\т высказывательная переменная. Положим
$A^1 = A$, а $A^0 = \ol{A}$. Отметим, что $A^\ep$\т литерал.
\end{df}

\begin{stm}
Всякая формула языка логики высказываний задаёт некоторую логическую функцию, и наоборот,
любая логическая функция может быть записана формулой языка логики высказываний.
\end{stm}
\begin{proof}
В одну сторону доказывать нечего, поскольку достаточно рассмотреть подходящее $\la$\д обозначение
для заданной формулы: в качестве списка переменных возьмём все переменные, входящие в формулу.

Обратно, пусть задана функция $f\cln \B^n\ra \B$. Пусть $\Mc$\т множество всех наборов $(a_1\sco a_n) \in \B^n$,
для которых $f(a_1\sco a_n)=1$. Заметим, что $A^\ep = 1$ тогда и только тогда, когда $A = \ep$,
поэтому, если $\Mc \neq \es$, рассмотрим формулу
\eqn{\label{dnf}\bigvee_{(e_1\sco e_n) \in \Mc} \hr{a_1^{e_1}\sa a_n^{e_n}}.}
Проверим, что эта формула обращается в 1 только при $(a_1\sco a_n) \in \Mc$. Действительно,
$a_1^{e_1}\sa a_n^{e_n} = 1$ тогда и только тогда, когда $a_i = e_i$ для $i=1\sco n$. Следовательно,
если набор $(a_1\sco a_n)$ не лежит в $\Mc$, то ни в одной из дизъюнкций не
будет полного совпадения $a_i$ с $e_i$, и каждая из дизъюнкций будет нулевой,
поэтому значение выражения будет ложным. Если же набор $(a_1\sco a_n)$ присутствует
в $\Mc$, то ровно одна конъюнкция станет истинной, поэтому значение всего выражения также будет истинным.

В случае, когда $\Mc$ пусто, достаточно рассмотреть формулу $a_1 \& \ol{a}_1$, которая тождественно ложна.
\end{proof}

\index{Дизъюнктивная нормальная форма}
\index{Конъюнктивная нормальная форма}
\index{Совершенная дизъюнктивная нормальная форма}
\index{Совершенная конъюнктивная нормальная форма}
\index{Дизъюнктивная нормальная форма!совершенная}
\index{Конъюнктивная нормальная форма!совершенная}
\begin{df}
Произвольная дизъюнкция конъюнкций, состоящих из литералов, называется \emph{дизъюнктивной нормальной формой} (ДНФ).
Конъюнкция дизъюнкций, состоящих из литералов, называется \emph{конъюнктивной нормальной формой} (КНФ).
ДНФ (соответственно, КНФ) называются \emph{совершенной}, если каждая переменная или её отрицание входит в каждую
конъюнкцию (соответственно, дизъюнкцию) ровно по одному разу.
\end{df}

Формула (\ref{dnf}) приведена к СДНФ. Очевидно, что для данного состава переменных такое представление единственно: если
две формулы в СДНФ различаются каким-либо дизъюнктом, то на наборе из показателей, соответствующих
этому дизъюнкту, формулы будут иметь разные значения.

Отметим, что попутно нами доказана теорема:
\begin{theorem}
Любая функция, не являющаяся тождественно ложной, выражается формулой в СДНФ.
\end{theorem}

\index{Тавтология}
\begin{df}
Тождественно истинные высказывания называются \emph{тавтологиями} и обозначаются $\models$.
\end{df}

\begin{df}
Наряду с импликацией, часто используется логическая связка \emph{эквивалентности},
определяемая так: $A \Lra B \equiv (A \Ra B) \& (B \Ra A)$. Несложно видеть,
что она имеет таблицу истинности
\cent{\tab{||c|c||c||}{
\hline $A$ & $B$ & $A\Lra B$\\
\hline $0$ & $0$ & $1$      \\
\hline $0$ & $1$ & $0$      \\
\hline $1$ & $0$ & $0$      \\
\hline $1$ & $1$ & $1$      \\
\hline
}}
\end{df}

\begin{ex}
\\\pt{1}. $\al \equiv \be$ тогда и только тогда, когда $\models (\al \Lra \be)$.
\\\pt{2}. $\models (A \vee \ol A)$.
\end{ex}

\index{Равенство}
\begin{note}
Знак равенства между выражениями означает, что это имена одного и того же объекта.
\end{note}

\index{Разрешимый язык}
\index{Язык!разрешимый}
\begin{df}
Язык называется \emph{разрешимым}, если некоторое высказывание отмечено как истинное,
и существует алгоритм, который для любого высказывания определяет, истинно оно или ложно.
\end{df}

\begin{ex}
Язык логики высказываний разрешим.
\end{ex}

\subsection{Упорядоченные множества}

\subsubsection{Бинарные отношения}

\index{Множество!всех подмножеств}
\begin{df}
  Символом $2^\Mc$ мы будем обозначать множество всех подмножеств множества $\Mc$.
\end{df}

\index{Бинарное отношение}
\index{Отношение!бинарное}
\begin{df}
Пусть $\Mc$\т некоторое множество. Говорят, что на $\Mc$ задано \emph{бинарное отношение} $\Rs$,
если выделено подмножество $\Rs \subs \Mc \times \Mc$. Про элементы $x, y \in \Mc$
говорят, что они \emph{находятся в отношении} $\Rs$, если $(x,y) \in \Rs$. При этом пишут
$x \Rs y$.
\end{df}

\index{Отношение!рефлексивное}
\index{Отношение!транзитивное}
\index{Отношение!симметричное}
\begin{df}
\\\pt{1}. $\Rs$ называется \emph{рефлексивным}, если $\fa x \in \Mc$ имеем $x \Rs x$.
\\\pt{2}. $\Rs$ называется \emph{симметричным}, если из того, что $x \Rs y$ следует, что и $y \Rs x$.
\\\pt{3}. $\Rs$ называется \emph{транзитивным}, если из того, что $x \Rs y$ и $y \Rs z$ следует,
что $x \Rs z$.
\end{df}

\index{Отношение!эквивалентности}
\begin{df}
Отношение $\Rs$, удовлетворяющее свойствам \pt{1}, \pt{2} и \pt{3}, называется \emph{отношением эквивалентности}.
\end{df}

\index{Линейно упорядоченное множество}
\index{Множество!линейно упорядоченное}
\index{Множество!упорядоченное!линейно}
\index{Связанность}
\begin{df}
Будем говорить, что множество $\Mc$ \emph{линейно упорядочено}, если на нём введено рефлексивное транзитивное
бинарное отношение $\llec$
со следующими свойствами:\\
\pt{1}. Если $x \llec y$ и $y \llec x$, то $x=y$.\\
\pt{2}. Всегда выполнено $x \llec y$ или $y \llec x$\т \emph{связанность}.

В этом случае отношение $\llec$ называется \emph{отношением линейного порядка}.
\end{df}

\index{Порядок!строгий}
\index{Порядок!нестрогий}
\begin{note}
Это определение сформулировано для случая <<нестрогого>> порядка. Для строгого порядка нужно
подправить свойство связанности: всегда выполнено $x \llec y$ или $y \llec x$ или $x = y$.
\end{note}

\index{Форма!высказывательная}
\index{Высказывательная форма}
\begin{note}
Если в выражение $x \llec y$ вместо $x$ и $y$ подставить конкретные элементы множества,
то получится высказывание, истинное, если верно, что $x \llec y$, и ложное в противном случае.
Таким образом, $x \llec y$\т \emph{высказывательная форма}.
\end{note}

\index{Частичное упорядочение}
\index{Упорядочение!частичное}
\index{Частично упорядоченное множество}
\index{Множество!частично упорядоченное}
\index{Множество!упорядоченное!частично}
\begin{df}
\emph{Частичное упорядочение} отличается от линейного упорядочения отсутствием требования связанности.
В этом случае множество называется \emph{частично упорядоченным}.
\end{df}

\index{Изоморфизм}
\index{Множества!изоморфные}
\index{Изоморфные множества}
\begin{df}
\emph{Изоморфизм} упорядоченных множеств $\Mc$ и $\Nc$\т биекция $\ph\cln \Mc \ra \Nc$ со свойством
$\ph(x) \bw\llec \ph(y)$ тогда и только тогда, когда $x \llec y$. Если между множествами
существует изоморфизм, то такие множества называются \emph{изоморфными}.
\end{df}

\begin{ex}
Покажем, что между $(\Z, \le)$ и $(\Q, \le)$ не существует изоморфизма. Здесь
$\le$\т обычное нестрогое неравенство, очевидно, являющееся отношением порядка.
Действительно, допустим, что $\ph\cln\N\ra \Q$\т изоморфизм, тогда рассмотрим $a := \ph(3)$ и $b := \ph(4)$.
Число $\frac{a+b}{2}$ должно иметь прообраз в $\N$, но его <<некуда запихнуть>>, потому что между
$3$ и $4$ нет натуральных чисел.
\end{ex}

\begin{ex}
Для класса всех множеств $\Mc$ можно ввести отношение частичного порядка следующим образом:
$A \llec B$ тогда и только тогда, когда $A \subs B$.
\end{ex}

\begin{problem}
Доказать, что каждое частично упорядоченное множество изоморфно некоторому классу множеств.
\end{problem}

\begin{problem}
Изоморфны ли $\R$ и $\R \wo \Q$?
\end{problem}

Для изоморфных частично упорядоченных множеств любое утверждение, сформулированное только в терминах
отношения порядка, автоматически переносится с одного множества на другое.

\todo{Определения минимальных и наименьших элементов}

\index{Квазипорядок}
\index{Предпорядок}
\index{Отношение!квазипорядка}
\index{Отношение!предпорядка}
\begin{df}
Бинарное отношение называется квазипорядком (или предпорядком), если оно рефлексивно и транзитивно.
\end{df}

\begin{problem}\label{quasiorder.equiv}
Пусть $\llec$\т квазипорядок на множестве $\Mc$. Скажем, что $a\sim b$, если $a \llec b$ и $b \llec a$. Доказать,
что $\sim$ задаёт отношение эквивалентности.
\end{problem}

\begin{problem}
Пусть $(\Mc, \llec, \sim)$\т множество, квазипорядок и отношение эквивалентности из задачи \ref{quasiorder.equiv}.
Рассмотрим фактормножество классов эквивалентности $\Fc = \fact{\Mc}{\sim}$. Пусть $[a], [b] \in \Fc$.
Рассмотрим условия:\\
\pt{1}. $\exi x \in [a], \exi y \in [b]$ такие, что $x \llec y$.\\
\pt{2}. $\fa x \in [a], \fa y \in [b]$ имеем $x \llec y$.\\
Доказать, что \pt{1} равносильно \pt{2}. Скажем, что $[a] \llec [b]$, если выполнено любое из
условий \pt{1} или \pt{2}. Доказать, что введённое таким образом отношение задаёт упорядочение на $\Fc$.
\end{problem}

\begin{problem}\label{lindenbaum.corr}
Введём на формулах математической логики отношение: $\al \llec \be$ тогда и только тогда,
когда $\models (\al \Ra \be)$. Доказать, что $\llec$ является квазипорядком.
\end{problem}

\index{Алгебра Линденбаума}
Если решить задачу \ref{lindenbaum.corr}, то мы докажем существование \emph{алгебры Линденбаума}\т
множества $\Ag$ классов эквивалентных формул. Впрочем, поскольку в нашем случае получаемое отношение
эквивалентности есть просто $\equiv$, предыдущие задачи можно и не решать. Действительно,
по определению, оно может быть записано как $\al \sim \be$ тогда и только тогда, когда $\models (\al \Ra \be)$
и $\models (\be \Ra \al)$, но это и означает, что $\al \equiv \be$.
На элементах алгебры Линденбаума можно ввести логические операции: $[\al] \& [\be] := [\al \& \be]$.
Ясно, что такое определение корректно ввиду совпадения $\sim$ c $\equiv$.

\index{Разбиение множества}
\index{Множество!разбиение}
\begin{df}
Говорят, что $A$ и $B$ образуют \emph{разбиение} множества $\Mc$, если $A \cup B = \Mc$, при этом
$A, B\neq \es$ и $A \cap B = \es$. Мы\footnote{Обозначение введено автором данного документа} будем
обозначать разбиения так: $\Mc = (A;B)$.
\end{df}

Пусть $(\Mc, \llec)$\т линейно упорядоченное множество.

\index{Сечение}
\index{Левый смежный класс}
\index{Правый смежный класс}
\index{Смежный класс!левый}
\index{Смежный класс!нижний}
\index{Смежный класс!правый}
\index{Смежный класс!верхний}
\begin{df}
Разбиение $(A;B)$ множества $\Mc$ называется \emph{сечением}, если $\fa x \in A, \fa y \in B$ имеем
$x \llec y$.
В этом случае $A$ называется \emph{левым (нижним) смежным классом} (ЛСК), a $B$\т \emph{правым (верхним)
смежным классом} (ПСК). Обозначение: $\Mc = (A|B)$.
\end{df}

Пусть $(A|B)=\Mc$, а $\ph\cln \Mc \ra \Nc$\т изоморфизм. Очевидно, что $\br{\ph(A)|\ph(B)}$\т
сечение $\Nc$. Иными словами, при изоморфизмах сечение переходит в сечение.

\index{Скачок}
\index{Щель}
\index{Дедекиндово сечение}
\index{Сечение!дедекиндово}
\cent{\tab{|c|c|c|}{
\hline \textbf{Название сечения} & \textbf{$\exi$ наибольший элемент в ЛСК} & \textbf{$\exi$ наименьший элемент в ПСК} \\
\hline Скачок & Да & Да \\
\hline Дедекиндово сечение & Нет & Да \\
\hline Дедекиндово сечение & Да & Нет\\
\hline Щель & Нет & Нет \\
\hline
}}

\begin{problem}
Доказать, что изоморфизм сохраняет скачки, щели и дедекиндовы сечения.
\end{problem}

\subsubsection{Язык описания упорядоченных множеств}

Алфавитом нашего языка будет следующий набор символов:
$\bc{\vee \e \& \e \neg \e \Ra \e ) \e ( \e = \e \llec \e \prec \e \exi \e \fa}$.
Индивидные переменные: $x, y,\ldots$.

\begin{ex}
Формула $\exi x\cln \fa y\, (x \llec y)$ существования минимального элемента отличает
$\N$ и отрезок от множеств $\Z$, $\Q$ и $\R$.
\end{ex}

\index{Плотное множество}
\index{Множество!плотное}
\begin{df}
Упорядоченное множество $\Mc$, между любыми двумя различными элементами которого существует
промежуточный элемент, \те $\fa x,y\cln x \neq y, \exi z\cln x \prec z \prec y$, называется \emph{плотным}.
\end{df}

\begin{ex}
$\R$ и $\Q$ являются плотными, а $\Z$ и $\N$\т нет.
\end{ex}

\index{Атомарная формула}
\index{Атомная формула}
\index{Формула!атомарная}
\index{Формула!атомная}
\begin{df}
Если $\xi$ и $\eta$\т метапеременные (произвольные переменные языка), то выражения
$(\xi = \eta)$, $(\xi \llec \eta)$ и $(\xi \prec \eta)$ называются \emph{атомными (атомарными) формулами}.
\end{df}

При построении языка логики высказываний мы уже давали определение формулы.
Естественно, что в новом языке формулы будут строиться по-другому.

\index{Формула}
\begin{df}
\begin{itemize}
\setlength{\itemsep}{-1mm}
\item Всякая атомная формула есть формула.
\item Если $\Ag$\т формула, то $\ol{\Ag}$\т тоже формула.
\item Если $\Ag$ и $\Bg$\т формулы, то $(\Ag \vee \Bg)$, $(\Ag \& \Bg)$, $(\Ag \Ra \Bg)$\т тоже формулы.
\item Если $\Ag$\т формула, а $\xi$\т метапеременная, то $(\fa \xi \Ag)$ и $(\exi\xi\Ag)$\т тоже
формулы.
\end{itemize}
\end{df}

\subsubsection{Связанные и свободные вхождения переменных}

\index{Приставка!кванторная}
\index{Кванторная приставка}
\index{Область действия}
Рассмотрим понятия связанных и свободных вхождений переменных в формулы.
В формулах $\exi x A$ и $\fa x A$ выражения $\exi x$ и $\fa x$ называются \emph{кванторными приставками},
а $A$\т \emph{областью действия} квантора. После квантора может стоять только переменная, но не имя.
Иначе говоря, бессмысленно подставлять вместо этой переменной какое либо имя: $\exi 5 A$ не определено.

\index{Связанное вхождение}
\index{Свободное вхождение}
\index{Вхождение!свободное}
\index{Вхождение!связанное}
\begin{df}
Вхождение переменной в область действия квантора или в кванторную приставку означает, что вхождение
этой переменной \emph{связанное}. Вхождения, не являющиеся связанными, называются \emph{свободными}.
\end{df}

\begin{ex}
Рассмотрим формулу
$$
  \fa \ul{\ul{\ul x}}\bbr{P\br{f(\ul{\ul{\ul x}})}\& \exi \ul x (\ul x = z) \Ra
  \exi \ul{\ul x} R(\ul{\ul x},\ul{\ul x})} \vee z = x.
$$
В этой формуле подчёркнуты все связанные вхождения переменной $x$, причём вхождения,
связанные одной кванторной приставкой, подчёркнуты одинаковым числом чёрточек.
Неподчёркнутые вхождения переменных\т свободные.
\end{ex}

\index{Подстановка}
\begin{df}
\emph{Подстановка} переменной\т замена всех свободных вхождений переменной.
Подстановка обозначается символом $[\dots/\dots]$.
\end{df}
\begin{ex}
Результатом $(x=y)\& \exi x (x=z)[5/x]$ будет $(5=y)\& \exi x (x=z)$.
\end{ex}

\index{Графическое равенство}
\index{Равенство!графическое}
\begin{df}
\emph{Графическое равенство}\т совпадение слов. Обозначается знаком $\eqcirc$.
\end{df}

\begin{ex}
$\exi x \fa x (x=x)[5/x] \eqcirc \exi x\fa x (x=x)$, поскольку переменная $x$ везде связана.
\end{ex}

Символом $\quantor$ мы будем обозначать квантор $\forall$ или $\exists$.
Символом $\nabla$ мы будем обозначать логические связки $\vee$ и $\&$.
Если эти символы встречаются в формуле, то всякий раз они заменяют один и тот же
квантор или связку. Иначе говоря, если написана формула  типа
$\quantor \xi \Ag(\xi) \equiv \quantor \eta \Ag(\eta)$, то это значит,
что имеют место формулы $\exi \xi \Ag(\xi) \equiv \exi \eta \Ag(\eta)$
и $\fa \xi \Ag(\xi) \equiv \fa \eta \Ag(\eta)$.

\index{Связывающий оператор}
В общем случае можно рассматривать разные связывающие операторы. Примерами таких связывающих
операторов являются $\int\,\ldots\,d\xi$ и $\bc{\xi \vl \ldots }$. Так, все вхождения $\xi$ под
знаком интеграла и слева от вертикальной черты в имени множества будут связанными. Здесь
$\xi$\т метапеременная.

\index{Именная форма}
\index{Форма!именная}
\begin{df}
Именная форма\т форма, при подстановке вместо переменных конкретных значений в которую получается имя.
\end{df}
\begin{ex}
Форма $\frac{e^x -1}{x}$ является именной формой.
\end{ex}

\index{Переименование}
\begin{note}
Связанные переменные можно разумно переименовывать. Например, $\liml{x \ra x_0} \frac{e^x-1}{x} =
\liml{y \ra x_0} \frac{e^y-1}{y}$. Переменная $x_0$ в данном выражении свободна, поэтому её переименовывать
нельзя.
\end{note}

\begin{stm}
Справедливы следующие законы:
\begin{items}{-3}
\item $\ol{\fa \xi \Ag} \equiv \exi \xi \ol \Ag$.
\item $\ol{\exi \xi \Ag} \equiv \fa \xi \ol \Ag$.
\item $\exi \xi(\Ag \vee \Bg) \equiv \br{\exi \xi \Ag} \vee \br{\exi \xi \Bg}$.
\item $\fa \xi(\Ag \& \Bg) \equiv \br{\fa \xi \Ag} \& \br{\fa \xi \Bg}$.
\end{items}
Кроме того, если $\xi$ не входит свободно в $\Ag$, то
\begin{items}{-3}
\item $(\Ag \nabla \Bg)[e/\xi] \eqcirc \Ag \nabla \Bg[e/\xi]$.
\item $\quantor \xi (A \& B) \equiv \Ag \& \quantor \xi \Bg$.
\item $\quantor \xi (A \vee B) \equiv \Ag \vee \quantor \xi \Bg$.
\end{items}
\end{stm}

\begin{problem}
Пусть $a$\т имя. Тогда $\exi x \br{(x = a) \& \Ag} \equiv \Ag[a/x]$.
\end{problem}


\subsubsection{Приведение формулы к предварённой форме}

\index{Предварённая форма}
\index{Формула!в предварённой форме}
\begin{df}
\emph{Формула в предварённой форме}\т формула, в которой все кванторы вынесены в начало.
Она имеет вид $\quantor_1\xi_1\ldots\quantor_n\xi_n \Ag$, где $\Ag$\т бескванторная формула.
\end{df}

\index{Переменная!свежая}
\index{Свежая переменная}
\begin{df}
Переменная $\xi$ называется \emph{свежей} по отношению к формуле $\Ag$, если $\xi$ не встречается в $\Ag$.
\end{df}

\index{Предварённая форма!алгоритм приведения}
Существует \emph{алгоритм приведения формулы к предварённой форме}. Вместо того, чтобы формально его
описывать, рассмотрим пример, на котором всё станет ясно. Для начала избавимся от импликаций. Пусть теперь
$\Ag$\т безымпликативная формула, например, такая: $\Ag = \exi x A \vee \fa y B$. Пусть $w$\т свежая
переменная по отношению к $A$ и $B$.
Тогда $\Ag \equiv \exi w A[w/x] \vee \fa y B \equiv \exi w\br{A[w/x]\vee \fa y B}$.
Пусть $t$\т свежая переменная по отношению к $A$ и $B$. Тогда $\Ag \equiv \exi w\br{A[w/x] \vee \fa t B[t/y]}\equiv
\exi w \fa t \br{A[w/x] \vee B[y/t]}$, и формула приведена к предварённой форме.

\subsubsection{Теорема о свободной подстановке}

Покажем, что не всякие подстановки бывают правильными. Пусть~$a$\т имя, а~$x$ и~$y$\т переменные.
Зададимся вопросом, всегда ли верно ли утверждение
$\Ag[a/x][a/y]\eqcirc \Ag[y/x][a/y]$? Приведём пример, когда это неверно, например, рассмотрим
$\Ag = \intl{0}{1}x\,dy$ и $a = 5$. Результатом первой подстановки, как легко видеть, будет
$\intl{0}{1}5\,dy$, а результатом второй\т $\intl{0}{1}y\,dy$. В этом примере
при подстановке $[y/x]$ переменная $x$, бывшая свободной, попала
в область действия связывающего оператора $\int \ldots dy$. Чтобы исключить такие
оказии, определим класс <<правильных>> подстановок.

\index{Свободная подстановка}
\index{Разрешённая подстановка}
\index{Допустимая подстановка}
\index{Подстановка!свободная}
\index{Подстановка!разрешённая}
\index{Подстановка!допустимая}
\begin{df}
\emph{Свободной (разрешённой, допустимой)} подстановкой переменной  называется такая подстановка~$[y/x]$,
при которой каждое свободное вхождение переменной~$x$ превращается в свободное вхождение переменной~$y$.
\end{df}

Очевидно, что если $y$\т свежая переменная для $\Ag$, то подстановка $\Ag[y/x]$ будет свободной.
В дальнейшем мы будем рассматривать только свободные подстановки, а если
$\Ag[y/x]$\т несвободная подстановка, то такую запись будем считать бессмысленной.

\index{Теорема!о свободной подстановке}
\begin{theorem}[О свободной подстановке]
Для свободных подстановок имеем $\Ag[a/x][a/y]\eqcirc \Ag[y/x][a/y]$.
\end{theorem}
\begin{proof}
Пусть, например, $\Ag = \ldots x \ldots y \dots$. Тогда при подстановке слева получаем
$\Ag[a/x] = \ldots a \ldots y \ldots$, а затем $\Ag[a/x][a/y] = \ldots a \ldots a \ldots$.
Справа будет так: $\Ag[y/x] = \ldots a \ldots y \ldots$, а затем $\Ag[y/x][a/y] = \ldots a \ldots a \ldots$.
Разницы никакой, потому что никакое свободное вхождение при промежуточных подстановках не стало связанным.
Таким образом, графически результат левой и правой подстановки одинаков.
Общий случай ничем не отличается от частного.
\end{proof}

\begin{imp}
Пусть $y$\т переменная. Если $\Ag[y/x]$ определено, то $\exi x \br{(x=y)\& \Ag} \equiv \Ag[y/x]$.
\end{imp}
\begin{proof}
Слева и справа стоят высказывательные формы, зависящие как минимум от $y$, но не от $x$.
Подставим вместо всех свободных переменных произвольные константы, причём вместо $y$ подставим имя $a$.
Надо доказать, что $\exi x \br{(x=a)\& \Ag[a/y]} \equiv \Ag[y/x][a/y]$. Но, как мы знаем,
левая часть эквивалентна формуле $\Ag[a/y][a/x]$. Осталось применить теорему о свободной подстановке
и заметить, что доказанное утверждение не зависит от~$a$, а потому оно верно для всех~$a$.
\end{proof}

\subsubsection{Теорема об элиминации кванторов}

\index{Язык!элементарный}
\index{Сорт переменной}
\index{Переменная!сорт}
\index{Носитель}
Язык упорядоченных множеств называется \emph{элементарным}, поскольку в нём все переменные имеют
один и тот же \emph{сорт} (\те одну и ту же область значений, называемую \emph{носителем}).

\index{Замкнутая формула}
\index{Формула!замкнутая}
\begin{df}
Формула называется \emph{замкнутой}, если в ней нет свободных переменных.
Ясно, что такая формула может быть либо истинной, либо ложной.
\end{df}

\begin{df}
Назовём \emph{хорошим} плотное линейно упорядоченное множество без наименьшего и наибольшего элемента.
\end{df}

\index{Интервал}
\begin{df}
Пусть на множестве~$\Mc$ введены отношения порядка $\prec$ и $\succ$,
тогда \emph{интервалом} $(a,b)$ называется множество $\hc{x \in \Mc\cln a \prec x \prec b}$.
\end{df}

Добавим в наш язык символы $\top$ и $\bot$, чтобы можно было построить замкнутую формулу без переменных.

\index{Теорема!об элиминации кванторов}
\begin{theorem}[Об элиминации кванторов]
Пусть $\Mc$\т хорошее множество. Для всякой формулы $\Ag$ можно эффективно построить такую бескванторную
формулу $\Bg$, что всякая переменная, свободно входящая в $\Bg$, свободно входит в $\Ag$, и при этом
$\Ag \equiv \Bg$.
\end{theorem}
\begin{proof}
Доказательство разобьём на несколько этапов.

\pt{0} Если $\Ag$\т бескванторная, то доказывать нечего.

\pt{1} Пусть $\Ag$ имеет вид $\exi z \hr{A_1 \sa A_s}$, причём $A_i$\т атомные формулы.
Следовательно, $A_i$ имеют вид $\top$, $\bot$, $(\xi=\xi)$, $(\xi \prec \xi)$, $(\xi \prec \eta)$, $(\xi = \eta)$
или $(\xi \succ \eta)$. Очевидно, что $(\xi = \xi)$\т это $\top$, а $(\xi \prec \xi)$ и $(\xi \succ \xi)$\т
это $\bot$. Ясно, что $\top$ можно зачеркнуть, а если есть хоть одна $\bot$, то и вся конъюнкция ложна.
Все $A_i$, не содержащие $z$, можно вынести за знак квантора.

Осталось три возможности: $(\xi = z)$, $(\xi \prec z)$ и $(\xi \succ z)$. Если есть хоть одно равенство,
то от формулы $Q\& \exi z \br{(z=\xi) \& B}$ можно перейти к равносильной формуле $Q\& B[\xi/z]$. В этом случае
последняя формула будет искомой формулой $\Bg$.

В случае, когда ни одного равенства нет, возможны три случая:

\sps Все формулы имеют вид $(\xi \prec z)$. Поскольку в хороших множествах нет наименьшего элемента, формула
$\exi z\br{(\xi \prec z)\sa (\xi_n \prec z)}$ тождественно истинна.

\sps Все формулы имеют вид $(\xi \succ z)$. Поскольку в хороших множествах нет наибольшего элемента,
формула $\exi z\br{(\xi \succ z)\sa (\xi_n \succ z)}$ тождественно истинна.

\sps Формула имеет вид $\exi z\br{(\xi_1 \prec z)\sa(\xi_n \prec z)\,\&\, (\eta_1 \succ z)\sa (\eta_m \succ z)}$.
Вдумаемся в то, что означает эта формула. Видно, что в ней спрашивается, найдётся ли число $z$, строго большее
чисел $\xi_1\sco\xi_n$ и строго меньшее чисел $\eta_1\sco \eta_m$. Если пересечение всех интервалов
вида $(\xi_i, \eta_j)$ непусто, то, в силу плотности множества~$\Mc$, такое $z$ найдётся, в
противном случае\т заведомо не найдётся.
Итак, получаем, что в этом случае формула эквивалентна бескванторной формуле
$$\ampl{i,j}{} (\xi_i \prec \eta_j).$$
Таким образом, первый этап полностью разобран.

\pt{2} Пусть $\Ag$ имеет вид $\exi z (A_1\sv A_s)$, где каждая из $A_s$\т конъюнкция атомарных формул.
Протащим квантор внутрь через дизъюнкцию, получим формулу $\hr{\exi z\, A_1}\sv\hr{\exi z\, A_s}$ и применим
к каждой из формул $\exi z\, A_i$ правила этапа \pt{1}.

\pt{3} Пусть $\Ag$ имеет вид $\exi z \Bg$, где $\Bg$\т произвольная бескванторная формула.
Приведём $\Bg$ к нормальной форме, тогда отрицания будут стоять при атомарных формулах.
После этого уничтожим отрицания, используя следующие правила:

\sps $\ol{\xi = \eta} \equiv (\xi \prec \eta) \vee (\xi \succ \eta)$.

\sps $\ol{\xi \prec \eta} \equiv (\xi = \eta) \vee (\xi \succ \eta)$.

\sps $\ol{\xi \succ \eta} \equiv (\xi = \eta) \vee (\xi \prec \eta)$.

После уничтожения отрицаний остаётся перейти к этапу \pt{2}.

\pt{4} Пусть $\Ag$ не содержит квантора $\fa$, но содержит кванторы существования. Поскольку их конечное
число, найдём среди них самый внутренний, \те такой, который не захватывает в свою область действия других
кванторов существования. К этому квантору можно применить этап \pt{3}, после чего количество кванторов уменьшится
на единицу. Осталось повторить этот процесс столько раз, сколько кванторов в нашей формуле.

\pt{5} Пусть $\Ag$\т произвольная формула. Уничтожим все кванторы существования по правилу
$\fa z\, \Cg \equiv \ol{\exi z\, \ol{\Cg}}$, после чего можно переходить к этапу \pt{4}.
\end{proof}

\begin{note}
Другое доказательство этой теоремы можно прочесть в \cite[стр. 115\ч 117]{vslc}.
\end{note}

\begin{note}
В формулировке теоремы присутствовало выражение <<эффективно построить>>. Это означает, что существует алгоритм
построения. Взглянув ещё раз на доказательство, легко убедиться в том, что приведение формулы к бескванторному
виду можно запрограммировать, например, на $\Cb$++.
\end{note}

\index{Следствие!об элементарной эквивалентности}
\begin{imp}
  Все хорошие множества элементарно эквивалентны, \те не существует замкнутой формулы в нашем
  языке упорядоченных множеств, которая была бы тождественно истинной на одном хорошем множестве
  и тождественно ложна на другом.
\end{imp}
\begin{proof}
  Рассмотрим замкнутую формулу $\Ag$ и уничтожим в ней кванторы, используя предыдущую теорему.
  Получим эквивалентную ей бескванторную замкнутую формулу. Она может быть либо тождественно истинной,
  либо тождественно ложной. Но приведение к бескванторному виду не зависит от множества.
\end{proof}


\subsection{Неэлементарные языки первого порядка}

\subsubsection{Предикаты}

Пусть $\Mc$\т некоторое множество.

\index{Предикат}
\index{Предикат!валентность}
\index{Валентность}
\begin{df}
  Функция вида $P\cln \Mc^k\ra \B$ называется \emph{$k$\д местным предикатом} на множестве $\Mc$.
  Число $k$ называется \emph{валентность}ю предиката\footnote{Иногда используется термин <<арность>>,
  происходящий от английского \emph{arity}\т количество аргументов.\т Прим. наб.}.
  Множество $k$\д местных предикатов обозначается $\Ps^{(k)}$.
\end{df}

\index{Свойство}
\index{Отношение!бинарное}
\index{Бинарное отношение}
\begin{df}
  Одноместные предикаты называют \emph{свойствами}, двуместные\т \emph{бинарными отношениями}.
\end{df}

Поясним, откуда берётся такая терминология. Пусть $P$\т одноместный предикат,
рассмотрим множество $A := P^{-1}(1)$. Будем говорить, что элемент $x$ множества $\Mc$
обладает свойством $P$, если $x \in A$, \те если $P(x) = 1$. Разумеется, верно и обратное:
если $A \subs \Mc$, то можно рассмотреть предикат <<$x \in A$?>>, определённый вполне естественным образом:
$$
  P(x) = \case{1, & x \in A;\\0, & x \notin A.}
$$
Таким образом, между одноместными предикатами и множеством $2^\Mc$ установлено взаимно однозначное соответствие.

Аналогично, полный прообраз истины для двуместного предиката выделит некоторое подмножество в $\Mc\bw\times\Mc$,
поэтому можно говорить о бинарном отношении $\Rs := P^{-1}(1)$, задаваемом двуместным предикатом. Очевидно,
обратное также верно, поэтому между бинарными отношениями и двуместными предикатами также имеется биекция.

Таким образом, предикаты\т это в каком\д то смысле обобщение понятий свойств и отношений.
Следующий пример показывает, что введение предикатных переменных в язык упорядоченных множеств
позволяет построить формулу, различающую $\R$ и $\Q$, хотя, как мы уже доказали, в элементарном языке такой формулы
не существует.

\begin{ex}
Формула
$$
  \fa P\bbr{\fa x\fa y\br{P(x)\& \ol{P(y)} \Ra x < y} \Ra
  \exi z \fa x\fa y\BS{\br{P(x) \Ra x \le z} \& \br{\ol{P(y)} \Ra z \le y}}}
$$
истинна в $\R$ и ложна в $\Q$. Здесь $x,y,z \in \Mc$, a $P \in \Ps^{(1)}$. Левая часть этой формулы
выделяет из всех подмножеств множества (или, что то же самое, из всех предикатов) те, которые задают
левые классы. Правая часть говорит, что либо в левом классе существует наибольший элемент, либо в правом
существует наименьший. Для~$\R$ это свойство верно, а для~$\Q$\т нет: достаточно в качестве предиката взять, например,
<<$x < \sqrt2$>>. Конечно, вместо~$\sqrt2$ можно было бы взять любое другое иррациональное число.
\end{ex}


\subsubsection{Общее определение языка первого порядка}

Как обычно, начнём с примера, предваряющего длинное общее определение.

\index{Язык!теории групп}
\begin{ex}
Построим язык теории групп. Рассмотрим группу $(G, \circ)$. В этом языке есть одно
выделенное имя\т единица группы. Обозначим её через $e$.
Кроме основной операции $\circ$, есть ещё унарная операция ${}^{-1}$ взятия обратного элемента.

\index{Терм!теории групп}
\begin{df} Определим \emph{терм} теории групп следующим образом:
\begin{items}{-3}
\item Единица $e$, а также все переменные $x,y\sco x_1,y_1,\ldots$\т термы.
\item Если $t$\т терм, то $(t^{-1})$\т тоже терм.
\item Если $t,s$\т термы, то $(t \circ s)$\т тоже терм.
\end{items}
\end{df}

Если $t,s$\т термы, то $(t=s)$\т атомная формула. Формулы строятся из атомных формул тем же правилам,
что и для языка упорядоченных множеств.
\end{ex}

\index{Носитель}
\index{Язык!первого порядка}
\index{Имя!индивидное}
\index{Имя!функциональное}
\index{Имя!предикатное}
\begin{df}
  Пусть задано некоторое множество $\Mc$, которое мы в дальнейшем будем называть \emph{носителем}.
  Будем говорить, что задан \emph{язык первого порядка}, если
  заданы списки индивидных функциональных и предикатных имён. При этом каждому функциональному и
  предикатному символу должна быть приписана его валентность. Множество функциональных $k$\д местных символов
  мы будем обозначать $\Fs^{(k)}$.
\end{df}

\begin{ex}
\ctab{|c|c|c|}{
\hline \textbf{Категория имён} & \textbf{Язык упорядоченных множеств} & \textbf{Язык теории групп} \\
\hline Индивидные имена & $\es$ & <<$e$>> \\
\hline Функциональные имена & $\es$ & <<$\circ$>>, <<${}^{-1}$>> \\
\hline Предикатные имена & <<$<$>> & $\es$ \\
\hline}
\end{ex}

\index{Терм}
\index{Атомная формула}
\index{Формула!атомная}
Термы и атомные формулы языка строятся следующим образом:
\begin{items}{-3}
  \item Любое индивидное имя есть терм.
  \item Любая индивидная переменная есть терм.
  \item Если $f^{(k)}$\т функциональное имя валентности $k$, а $t_1\sco t_k$\т термы, то $f(t_1\sco t_k)$\т терм.
  \item Если $P^{(k)}$\т предикатное имя валентности $k$, а $t_1\sco t_k$\т термы, то $P(t_1\sco t_k)$\т атомная формула.
  \item Если $t,s$\т термы, то $(t=s)$\т атомная формула.
\end{items}

Формулы строятся из атомных формул тем же правилам,
что и для языка упорядоченных множеств.

\begin{note}
Имя, константа, символ\т это одно и то же. Область значения индивидных переменных\т обязательно носитель.
\end{note}

Ранее мы уже давали определение элементарного языка. Настало время его уточнить.

\index{Элементарный язык}
\index{Язык!элементарный}
\begin{df}
Язык называется \emph{элементарным}, если в нём есть только индивидные переменные. В противном
случае язык называется неэлементарным.
\end{df}

Приведём несколько полезных примеров неэлементарных формул.

\begin{ex}
Формула, ложная на всех множествах, в которых менее, чем $n$ элементов:
$$
  \al_n \eqcirc \exi x_1\ldots\exi x_n \ampl{i\neq j}{} \ol{(x_i = x_j)}.
$$
\end{ex}

\begin{problem}
Постройте формулу, истинную только на $n$\д элементном множестве.
\end{problem}

\begin{ex}
Формула, истинная на любом бесконечном множестве:
$$
  \be \eqcirc \exi \ph\bbc{\BS{\fa x \fa y \br{\ph(x) = \ph(y) \Ra x = y}} \& \BS{\exi z \ol{\exi x \br{\ph(x)=z}}}}.
$$
Здесь $\ph \in \Fs^{(1)}$. Эта формула говорит, что на данном множестве существует инъекция,
не являющаяся при этом биекцией.
\end{ex}

Мы уже видели на примере формулы, различающей $\Q$ и $\R$, что <<возможности>> неэлементарных языков
значительно шире. Чтобы ещё больше подчеркнуть это различие, приведём без доказательства теорему, верную только
для элементарных языков:

\index{Теорема!о компактности}
\index{Модель}
\begin{theorem}[О компактности элементарных языков первого порядка]
Если есть список элементарных формул, каждая из конечных подсистем которого имеет модель,
то и весь список имеет модель.
Скажем, что список формул имеет модель\footnote{Более точное определение этого понятия будет
дано в разделе \ref{struc.sig.interp.models}\т \emph{Прим. наб.}}, если найдётся носитель, на
котором все эти формулы будут истинными.
\end{theorem}

Рассмотрим теперь такой список формул: $\Sig = \bc{\ol{\be};\,\al_1,\al_2,\ldots}$. В нём формула $\ol\be$\т не
является элементарной.
Очевидно, что весь список модели не имеет: формула $\ol{\be}$ не позволяет множеству $\Mc$ быть бесконечным,
а формула $\al_{|\Mc|+1}$ не оставляет шансов и в том случае, когда $|\Mc| < \infty$.
Покажем теперь, что для этого списка неверна теорема компактности. Рассмотрим конечную подсистему $\Pi \subs \Sig$.
Если $\ol{\be} \in \Pi$, то достаточно взять множество из $\max\hc{i\cln \al_i \in \Pi}$ элементов. Если
же $\ol{\be} \notin \Pi$, то можно взять любое бесконечное множество, например, $\N$.

\subsection{Структуры и сигнатуры, интерпретации и модели}

В этом разделе мы рассмотрим понятия, которые во многом обобщают то, что было рассмотрено нами ранее
и более точно определим то, о чём ранее упоминали лишь вскользь.

\subsubsection{Математические модели}

\label{struc.sig.interp.models}

\index{Математическая структура}
\index{Структура!математическая}
\index{Носитель}
\index{Носитель!структуры}
\begin{df}
Математическая структура\т это некоторое непустое множество $\Mc$, называемое \emph{носителем структуры} (или
просто \emph{носителем}) + \emph{выделенные объекты}: выделенные элементы $\Mc$, операции над носителем,
отношения на носителе \итд Разумеется, в каждом конкретном случае что\д либо в этом списке может и отсутствовать.
\end{df}

\begin{ex}
Группа является математической структурой с выделенным элементом~$e$, групповой операцией~$\circ$
и операцией взятия обратного элемента~${}^{-1}$.
\end{ex}

\begin{ex}
Линейно упорядоченное множество~$(\Mc, \prec)$ является математической структурой с бинарным отношением~$\prec$.
\end{ex}

\begin{ex}
Пусть $\Mc$\т совокупность всех точек и прямых евклидовой плоскости. Пусть одноместный предикат $P$ выражает
свойство быть точкой, а предикат $L$ выражает свойство быть прямой.

\begin{df}
Объекты $x,y\in \Mc$ называются инцидентными, если у них есть общие точки.
\end{df}

Определим бинарное отношение инцидентности $I(x,y)$ как свойство $x,y$ быть инцидентными друг другу.
Заметим, что это отношение симметрично. Теперь можно записать, например, одну из аксиом евклидовой геометрии:
<<Через любые две различные точки проходит прямая>>. Формула будет следующей:
$$
  \fa x \fa y \Br{P(x) \& P(y) \Ra \exi z \br{L(z) \& I(x,z) \& I(y,z)}}.
$$

\begin{problem}
Уточните аксиому требованием единственности такой прямой.
\end{problem}
\end{ex}

\index{Сигнатура}
\begin{df}
\emph{Сигнатура} данной структуры $\Sig$\т список имён выделенных объектов, индивидные, функциональные и предикатные
переменные с указанными валентностями.
\end{df}

\index{Изоморфизм}
\index{Изоморфизм!структур}
\begin{df}
\emph{Изоморфизм структур} $\Sig$ и $\Pi$ с одинаковой сигнатурой $\Om$\т биекция $\Phi$ между их носителями $\Mc$ и $\Nc$,
сохраняющая все определённые операции, отношения и сигнатуру, \те для всякого
имени $N \in \Om$ имеем $\Phi\br{\Obj_\Sig(N)} = \Obj_\Pi(N)$. Здесь
$\Obj_X(N)$\т элемент носителя сигнатуры $X$ с именем $N$.
Изоморфизм структур различной сигнатуры не определён.
\end{df}

\index{Объект}
\index{Имя}
\begin{note}
После столь длинного определения полезно сделать маленькое лирическое отступление об \emph{объектах} и \emph{именах}.
Как говорил Владимир Андреевич Успенский, в природе нет математики, но есть имена её жителей.
Действительно, попробуйте\д ка найти в природе число <<5>>! В лучшем случае мы найдём его
изображение. Сами объекты <<живут>> только в мозгу людей, и больше нигде. Кроме того, один и тот же
объект может быть именован по\д разному. Например, $\es$ и $A \cap \ol A$\т два разных имени пустого множества,
да и то при зафиксированном смысле значков, входящих в эту запись. Две одинаковые по виду записи могут означать
разные вещи, стоит их только по\д разному проинтерпретировать.

Мораль этого отступления в следующем: имеет место необходимость ссылаться на объекты по их именам.
Выражаясь более программистскими терминами, имя\т ссылка на объект, а $\Obj$\т разыменование ссылки.
При этом, разыменовывая ссылку, нужно помнить, <<в каком адресном пространстве мы находимся>>,
то бишь указывать структуру, к которой относится данное имя. При изоморфизме важно, чтобы объекты
переходили в объекты другой структуры <<без перекоса ссылок>>.
\end{note}

\index{Язык}
\index{Язык!сигнатуры}
Определив сигнатуру, можно определить и \emph{язык} в этой сигнатуре. \emph{Алфавит} составляется из
уже знакомых нам символов и элементов сигнатуры: $\As = \bc{(\e)\e=\e\neg\e\&\e\vee\e\Ra\e\fa\e\exi} \cup \Om$.

Как обычно, следующий шаг состоит в построении формул. Чтобы не перечислять всякий раз, что мы
имеем ввиду либо имя, либо переменную, введём соответствующее понятие.

\index{Буква}
\begin{df}
Буква\т либо имя, либо переменная. Мы будем рассматривать индивидные, функциональные и предикатные буквы,
причём последние два типа обладают валентностью.
\end{df}


\newpage
\scriptsize
\input{Logic.UVA.ind}

\end{document}
